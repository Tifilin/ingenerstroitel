<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–†–∞—Å—á–µ—Ç –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–π –Ω–∞–≥—Ä—É–∑–∫–∏ –æ—Ç —Å–ø–æ–ª–∑–∞–Ω–∏—è —Å–Ω–µ–≥–∞</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üìê –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ –æ—Ç —Å–ø–æ–ª–∑–∞–Ω–∏—è —Å–Ω–µ–≥–∞</h1>
            <p class="subtitle">–ø. 10.13 –°–ü 20.13330.2016 —Å –ò–∑–º–µ–Ω–µ–Ω–∏–µ–º ‚Ññ5</p>
        </div>

        <div class="content-card">
            <div class="formula-section">
                <h3>–§–æ—Ä–º—É–ª–∞ —Ä–∞—Å—á–µ—Ç–∞</h3>
                <div class="formula">
                    T = k<sub>x</sub> √ó S<sub>0</sub> √ó (sin Œ± - ŒΩ √ó cos Œ±) √ó L
                </div>
                <p class="formula-reference">–§–æ—Ä–º—É–ª–∞ 10.4 –°–ü 20.13330.2016</p>
            </div>

            <div class="input-section">
                <h3>üìã –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞</h3>
                
                <div class="parameters-grid">
                    <div class="param-group">
                        <label>–ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç k<sub>x</sub>:</label>
                        <input type="number" id="kx" value="0.9" step="0.01" min="0.9" max="0.9" readonly>
                        <p class="note">–ø.10.13: –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç, —É—á–∏—Ç—ã–≤–∞—é—â–∏–π —Ç–∞—è–Ω–∏–µ —Å–Ω–µ–≥–∞</p>
                    </div>

                    <div class="param-group">
                        <label>–ù–æ—Ä–º–∞—Ç–∏–≤–Ω–∞—è —Å–Ω–µ–≥–æ–≤–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ S‚ÇÄ (–∫–ü–∞):</label>
                        <input type="number" id="s0" value="1.0" step="0.1" min="0">
                        <p class="note">–ù–æ—Ä–º–∞—Ç–∏–≤–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ —Å–Ω–µ–≥–æ–≤–æ–π –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ –ø–æ–∫—Ä—ã—Ç–∏–µ</p>
                    </div>

                    <div class="param-group">
                        <label>–£–∫–ª–æ–Ω –ø–æ–∫—Ä—ã—Ç–∏—è Œ± (¬∞):</label>
                        <input type="number" id="slopeAngle" value="20" step="1" min="12" max="90">
                        <p class="note">–ø.10.13: —É–∫–ª–æ–Ω –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–∏ –ø–æ–∫—Ä—ã—Ç–∏—è, –ø—Ä–∏–Ω–∏–º–∞–µ–º—ã–π –Ω–µ –º–µ–Ω–µ–µ 12¬∞</p>
                    </div>

                    <div class="param-group">
                        <label>–ú–∞—Ç–µ—Ä–∏–∞–ª –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–∏ –ø–æ–∫—Ä—ã—Ç–∏—è:</label>
                        <select id="material">
                            <option value="steel_sheet">–°—Ç–∞–ª—å –ª–∏—Å—Ç–æ–≤–∞—è</option>
                            <option value="steel_folded">–°—Ç–∞–ª—å, —Ñ–∞–ª—å—Ü–µ–≤–∞—è –∫—Ä–æ–≤–ª—è</option>
                            <option value="aluminum">–ê–ª—é–º–∏–Ω–∏–π</option>
                            <option value="glass">–°—Ç–µ–∫–ª–æ</option>
                            <option value="pvc">–ü–æ–ª–∏–º–µ—Ä–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ –∏–∑ –ø–æ–ª–∏–≤–∏–Ω–∏–ª—Ö–ª–æ—Ä–∏–¥–∞</option>
                            <option value="wood_dry">–î–µ—Ä–µ–≤–æ, —Å—É—Ö–æ–π —Å–Ω–µ–≥</option>
                            <option value="wood_wet">–î–µ—Ä–µ–≤–æ, –≤–ª–∞–∂–Ω—ã–π —Å–Ω–µ–≥</option>
                            <option value="ice">–õ–µ–¥</option>
                            <option value="metal_tile">–ú–µ—Ç–∞–ª–ª–æ–∫–µ—Ä–µ–º–∏–∫–∞</option>
                            <option value="ceramic_tile">–ö–µ—Ä–∞–º–∏—á–µ—Å–∫–∞—è —á–µ—Ä–µ–ø–∏—Ü–∞</option>
                        </select>
                    </div>

                    <div class="param-group">
                        <label>–ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç —Ç—Ä–µ–Ω–∏—è ŒΩ:</label>
                        <input type="number" id="frictionCoefficient" value="0.055" step="0.001" min="0.01" max="0.3">
                        <p class="note">–ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç —Ç—Ä–µ–Ω–∏—è —Å–Ω–µ–≥–∞ –ø–æ –º–∞—Ç–µ—Ä–∏–∞–ª—É –ø–æ–∫—Ä—ã—Ç–∏—è</p>
                    </div>

                    <div class="param-group">
                        <label>–î–ª–∏–Ω–∞ –∑–æ–Ω—ã —Å–ø–æ–ª–∑–∞–Ω–∏—è L (–º):</label>
                        <input type="number" id="slipLength" value="10" step="0.1" min="1" max="100">
                        <p class="note">–î–ª–∏–Ω–∞ –∑–æ–Ω—ã —Å–ø–æ–ª–∑–∞–Ω–∏—è —Å–Ω–µ–≥–∞ –∏–ª–∏ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –º–µ–∂–¥—É —Å–Ω–µ–≥–æ–∑–∞–¥–µ—Ä–∂–∏–≤–∞—é—â–∏–º–∏ –ø—Ä–µ–≥—Ä–∞–¥–∞–º–∏</p>
                    </div>
                </div>
            </div>

            <div class="calculation-result">
                <div class="result-header">
                    <h3>üìä –†–µ–∑—É–ª—å—Ç–∞—Ç —Ä–∞—Å—á–µ—Ç–∞</h3>
                    <button type="button" class="btn-info" onclick="calculateHorizontalLoad()">üîÑ –ü–µ—Ä–µ—Å—á–∏—Ç–∞—Ç—å</button>
                </div>
                
                <div class="final-result">
                    <strong>–ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ T = <span id="t-result">0.00</span> –∫–ù/–º</strong>
                </div>
                
                <div id="calculation-details">
                    <!-- –î–µ—Ç–∞–ª–∏ —Ä–∞—Å—á–µ—Ç–∞ -->
                </div>
            </div>

            <div class="actions">
                <button class="btn-secondary" onclick="goToStep('result.html')">‚Üê –ù–∞–∑–∞–¥ –∫ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º</button>
                <button class="btn-primary" onclick="saveHorizontalLoad()">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ä–∞—Å—á–µ—Ç</button>
            </div>
        </div>

        <!-- –°–ø—Ä–∞–≤–∫–∞ –ø–æ –Ω–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–º –¥–æ–∫—É–º–µ–Ω—Ç–∞–º -->
        <div class="reference-section">
            <h3>üìö –ù–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–µ —Å—Å—ã–ª–∫–∏</h3>
            <ul>
                <li>–°–ü 20.13330.2016 "–ù–∞–≥—Ä—É–∑–∫–∏ –∏ –≤–æ–∑–¥–µ–π—Å—Ç–≤–∏—è" —Å –ò–∑–º–µ–Ω–µ–Ω–∏–µ–º ‚Ññ5</li>
                <li>–ø. 10.13 - –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ –æ—Ç —Å–ø–æ–ª–∑–∞–Ω–∏—è —Å–Ω–µ–≥–∞</li>
                <li>–§–æ—Ä–º—É–ª–∞ 10.4 - –†–∞—Å—á–µ—Ç –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–π –Ω–∞–≥—Ä—É–∑–∫–∏ T</li>
                <li>–¢–∞–±–ª–∏—Ü–∞ 10.3 - –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã —Ç—Ä–µ–Ω–∏—è —Å–Ω–µ–≥–∞ –ø–æ –º–∞—Ç–µ—Ä–∏–∞–ª–∞–º</li>
            </ul>

            <h3>üìã –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã —Ç—Ä–µ–Ω–∏—è –ø–æ –º–∞—Ç–µ—Ä–∏–∞–ª–∞–º (—Ç–∞–±–ª–∏—Ü–∞ 10.3)</h3>
            <div class="reference-table">
                <table>
                    <thead>
                        <tr>
                            <th>–ú–∞—Ç–µ—Ä–∏–∞–ª –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–∏ –ø–æ–∫—Ä—ã—Ç–∏—è</th>
                            <th>–ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç —Ç—Ä–µ–Ω–∏—è ŒΩ</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr><td>–°—Ç–∞–ª—å –ª–∏—Å—Ç–æ–≤–∞—è</td><td>0,02</td></tr>
                        <tr><td>–°—Ç–∞–ª—å, —Ñ–∞–ª—å—Ü–µ–≤–∞—è –∫—Ä–æ–≤–ª—è</td><td>0,05</td></tr>
                        <tr><td>–ê–ª—é–º–∏–Ω–∏–π</td><td>0,04</td></tr>
                        <tr><td>–°—Ç–µ–∫–ª–æ</td><td>0,012</td></tr>
                        <tr><td>–ü–æ–ª–∏–º–µ—Ä–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ –∏–∑ –ø–æ–ª–∏–≤–∏–Ω–∏–ª—Ö–ª–æ—Ä–∏–¥–∞</td><td>0,014</td></tr>
                        <tr><td>–î–µ—Ä–µ–≤–æ, —Å—É—Ö–æ–π —Å–Ω–µ–≥</td><td>0,055</td></tr>
                        <tr><td>–î–µ—Ä–µ–≤–æ, –≤–ª–∞–∂–Ω—ã–π —Å–Ω–µ–≥</td><td>0,1</td></tr>
                        <tr><td>–õ–µ–¥</td><td>0,028</td></tr>
                        <tr><td>–ú–µ—Ç–∞–ª–ª–æ–∫–µ—Ä–µ–º–∏–∫–∞</td><td>0,1</td></tr>
                        <tr><td>–ö–µ—Ä–∞–º–∏—á–µ—Å–∫–∞—è —á–µ—Ä–µ–ø–∏—Ü–∞</td><td>0,2</td></tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <script src="common.js"></script>
    <script src="data.js"></script>
    <script>
        let currentT = 0.0;

        function initPage() {
            loadSavedData();
            setupEventListeners();
            calculateHorizontalLoad();
        }

        function setupEventListeners() {
            // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ—Å—á–µ—Ç –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
            const inputs = ['s0', 'slopeAngle', 'material', 'frictionCoefficient', 'slipLength'];
            inputs.forEach(id => {
                const element = document.getElementById(id);
                if (element) {
                    element.addEventListener('input', calculateHorizontalLoad);
                    element.addEventListener('change', calculateHorizontalLoad);
                }
            });

            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–∞ —Ç—Ä–µ–Ω–∏—è –ø—Ä–∏ –≤—ã–±–æ—Ä–µ –º–∞—Ç–µ—Ä–∏–∞–ª–∞
            document.getElementById('material').addEventListener('change', updateFrictionCoefficient);
        }

        function updateFrictionCoefficient() {
            const material = document.getElementById('material').value;
            const friction = FRICTION_COEFFICIENTS[material] || 0.055;
            document.getElementById('frictionCoefficient').value = friction;
            calculateHorizontalLoad();
        }

        function calculateHorizontalLoad() {
            const kx = 0.9; // –ø.10.13: –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç, —É—á–∏—Ç—ã–≤–∞—é—â–∏–π —Ç–∞—è–Ω–∏–µ —Å–Ω–µ–≥–∞
            const s0 = parseFloat(document.getElementById('s0').value) || 1.0;
            const slopeAngle = parseFloat(document.getElementById('slopeAngle').value) || 20;
            const friction = parseFloat(document.getElementById('frictionCoefficient').value) || 0.055;
            const L = parseFloat(document.getElementById('slipLength').value) || 10;

            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–≥–æ —É–∫–ª–æ–Ω–∞
            if (slopeAngle < 12) {
                document.getElementById('calculation-details').innerHTML = `
                    <div class="protocol-step error">
                        <div class="protocol-description"><strong>–û—à–∏–±–∫–∞:</strong> –£–∫–ª–æ–Ω –ø–æ–∫—Ä—ã—Ç–∏—è –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –Ω–µ –º–µ–Ω–µ–µ 12¬∞ (–ø.10.13)</div>
                    </div>
                `;
                currentT = 0;
                document.getElementById('t-result').textContent = '0.00';
                return;
            }

            // –ü–µ—Ä–µ–≤–æ–¥ —É–≥–ª–∞ –≤ —Ä–∞–¥–∏–∞–Ω—ã
            const alphaRad = slopeAngle * Math.PI / 180;
            
            // –†–∞—Å—á–µ—Ç –ø–æ —Ñ–æ—Ä–º—É–ª–µ 10.4
            const sinAlpha = Math.sin(alphaRad);
            const cosAlpha = Math.cos(alphaRad);
            const bracketValue = sinAlpha - friction * cosAlpha;
            
            // –ï—Å–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ –≤ —Å–∫–æ–±–∫–∞—Ö –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–æ–µ, –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–µ –≤–æ–∑–Ω–∏–∫–∞–µ—Ç
            if (bracketValue <= 0) {
                currentT = 0;
                document.getElementById('t-result').textContent = '0.00';
                document.getElementById('calculation-details').innerHTML = `
                    <div class="protocol-step">
                        <div class="protocol-description"><strong>–†–µ–∑—É–ª—å—Ç–∞—Ç:</strong> –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–µ –≤–æ–∑–Ω–∏–∫–∞–µ—Ç</div>
                        <div class="protocol-description">(sin Œ± - ŒΩ √ó cos Œ±) = (${sinAlpha.toFixed(3)} - ${friction.toFixed(3)} √ó ${cosAlpha.toFixed(3)}) = ${bracketValue.toFixed(3)} ‚â§ 0</div>
                    </div>
                `;
                return;
            }

            currentT = kx * s0 * bracketValue * L;

            document.getElementById('t-result').textContent = currentT.toFixed(2);
            
            // –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ —Ä–∞—Å—á–µ—Ç–∞
            document.getElementById('calculation-details').innerHTML = `
                <div class="protocol-step">
                    <div class="protocol-description"><strong>–ü—Ä–æ—Ç–æ–∫–æ–ª —Ä–∞—Å—á–µ—Ç–∞:</strong></div>
                    <div class="protocol-formula">
                        T = k<sub>x</sub> √ó S‚ÇÄ √ó (sin Œ± - ŒΩ √ó cos Œ±) √ó L<br>
                        T = ${kx} √ó ${s0.toFixed(2)} √ó (sin ${slopeAngle}¬∞ - ${friction.toFixed(3)} √ó cos ${slopeAngle}¬∞) √ó ${L.toFixed(1)}<br>
                        T = ${kx} √ó ${s0.toFixed(2)} √ó (${sinAlpha.toFixed(3)} - ${friction.toFixed(3)} √ó ${cosAlpha.toFixed(3)}) √ó ${L.toFixed(1)}<br>
                        T = ${kx} √ó ${s0.toFixed(2)} √ó ${bracketValue.toFixed(3)} √ó ${L.toFixed(1)}<br>
                        T = ${currentT.toFixed(2)} –∫–ù/–º
                    </div>
                    <div class="protocol-reference">–ø.10.13 –°–ü 20.13330.2016</div>
                </div>
            `;
        }

        function loadSavedData() {
            const data = getCalculationData();
            
            // –ó–∞–≥—Ä—É–∂–∞–µ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
            if (data.horizontalLoadData) {
                const hData = data.horizontalLoadData;
                if (hData.s0) document.getElementById('s0').value = hData.s0;
                if (hData.slopeAngle) document.getElementById('slopeAngle').value = hData.slopeAngle;
                if (hData.material) document.getElementById('material').value = hData.material;
                if (hData.frictionCoefficient) document.getElementById('frictionCoefficient').value = hData.frictionCoefficient;
                if (hData.slipLength) document.getElementById('slipLength').value = hData.slipLength;
                
                updateFrictionCoefficient();
            } else {
                // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º S0 –∏–∑ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Ä–∞—Å—á–µ—Ç–∞ –µ—Å–ª–∏ –µ—Å—Ç—å
                if (data.s0) {
                    const s0 = data.sg * data.ce * data.ct * data.mu;
                    document.getElementById('s0').value = s0.toFixed(2);
                }
            }
        }

        function saveHorizontalLoad() {
            const saveData = {
                horizontalLoadData: {
                    s0: document.getElementById('s0').value,
                    slopeAngle: document.getElementById('slopeAngle').value,
                    material: document.getElementById('material').value,
                    frictionCoefficient: document.getElementById('frictionCoefficient').value,
                    slipLength: document.getElementById('slipLength').value,
                    calculatedT: currentT
                }
            };
            
            updateCalculationData(saveData);
            showNotification('–†–∞—Å—á–µ—Ç –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–π –Ω–∞–≥—Ä—É–∑–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω!', 'success');
        }

        document.addEventListener('DOMContentLoaded', initPage);
    </script>
</body>
</html>