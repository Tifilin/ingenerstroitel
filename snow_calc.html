
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–†–∞—Å—á—ë—Ç —Å–Ω–µ–≥–æ–≤–æ–π –Ω–∞–≥—Ä—É–∑–∫–∏ –ø–æ –°–ü 20.13330.2016</title>
    <style>
        body { 
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
            margin: 15px; 
            line-height: 1.4;
            color: #333;
            max-width: 1200px;
            margin-left: auto;
            margin-right: auto;
            font-size: 14px;
        }
        .step { 
            margin-bottom: 20px; 
            padding: 15px; 
            border: 1px solid #ddd; 
            border-radius: 6px;
            background: #fff;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        .step h2 { 
            color: #2c3e50; 
            margin-top: 0;
            border-bottom: 1px solid #3498db;
            padding-bottom: 8px;
            font-size: 18px;
        }
        img { 
            max-width: 100%; 
            height: auto; 
            display: block; 
            margin: 10px auto;
            border: 1px solid #ddd;
            border-radius: 3px;
        }
        select, input { 
            padding: 6px 8px; 
            margin: 5px 3px; 
            border: 1px solid #ddd;
            border-radius: 3px;
            font-size: 13px;
        }
        button { 
            padding: 8px 16px; 
            background: #3498db; 
            color: white; 
            border: none; 
            border-radius: 4px; 
            cursor: pointer;
            font-size: 13px;
            font-weight: bold;
            transition: background 0.3s;
        }
        button:hover { 
            background: #2980b9; 
        }
        #report { 
            display: none; 
            margin-top: 20px; 
            padding: 15px; 
            background: #f8f9fa; 
            border-radius: 6px;
            border-left: 3px solid #3498db;
        }
        table { 
            border-collapse: collapse; 
            width: 100%; 
            margin: 10px 0; 
            background: white;
            font-size: 13px;
        }
        th, td { 
            border: 1px solid #ddd; 
            padding: 8px; 
            text-align: left; 
        }
        th { 
            background-color: #f2f2f2; 
            font-weight: bold;
        }
        #roofImage { 
            max-width: 350px; 
        }
        .italic { 
            font-style: italic; 
            font-weight: normal; 
            color: #7f8c8d;
            font-size: 12px;
        }
        #snowMap, #sp131Table { 
            display: none; 
        }
        #ceValue, #muValue { 
            font-weight: bold; 
            color: #e74c3c; 
            font-size: 14px;
        }
        .terrain-type { 
            display: block; 
            margin-bottom: 5px; 
            padding: 6px;
            background: #f8f9fa;
            border-radius: 3px;
            font-size: 13px;
        }
        .method-label { 
            display: block; 
            margin-bottom: 6px; 
            padding: 6px;
            cursor: pointer;
            font-size: 13px;
        }
        .method-label input {
            margin-right: 6px;
        }
        #sgDisplay { 
            font-weight: bold; 
            color: #2ecc71; 
            font-size: 14px;
        }
        .zone-table {
            margin: 10px 0;
            background: #ecf0f1;
            padding: 10px;
            border-radius: 4px;
        }
        .scheme-toggle {
            margin: 8px 0;
        }
        .scheme-toggle button {
            padding: 6px 12px;
            margin-right: 8px;
            background: #95a5a6;
            font-size: 12px;
        }
        .scheme-toggle button.active {
            background: #3498db;
        }
        .calculation-formula {
            background: #2c3e50;
            color: white;
            padding: 10px;
            border-radius: 4px;
            margin: 10px 0;
            font-family: 'Courier New', monospace;
            font-size: 12px;
        }
        .note {
            background: #fff3cd;
            border-left: 3px solid #ffc107;
            padding: 8px;
            margin: 10px 0;
            border-radius: 3px;
            font-size: 12px;
        }
        .warning {
            background: #f8d7da;
            border-left: 3px solid #dc3545;
            padding: 8px;
            margin: 10px 0;
            border-radius: 3px;
            font-size: 12px;
        }
        .info {
            background: #d1ecf1;
            border-left: 3px solid #17a2b8;
            padding: 8px;
            margin: 10px 0;
            border-radius: 3px;
            font-size: 12px;
        }
        .algorithm {
            background: #d1ecf1;
            border-left: 3px solid #17a2b8;
            padding: 15px;
            margin: 20px 0;
            border-radius: 4px;
            font-size: 13px;
        }
        .roof-scheme {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin: 15px 0;
        }
        .scheme-diagram {
            flex: 1;
            min-width: 280px;
            background: white;
            padding: 10px;
            border-radius: 4px;
            border: 1px solid #ddd;
        }
        .scheme-values {
            flex: 1;
            min-width: 280px;
        }
        .temperature-control {
            background: #e8f5e8;
            padding: 8px;
            border-radius: 4px;
            margin: 8px 0;
        }
        .calculation-method {
            margin: 8px 0;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        .calculation-method label {
            display: block;
            margin-bottom: 6px;
            font-weight: bold;
            font-size: 13px;
        }
        .sp-calculation {
            display: none;
            margin-top: 12px;
            padding: 12px;
            background: #f8f9fa;
            border-radius: 4px;
        }
        .manual-input {
            margin-top: 12px;
        }
        .city-temperature {
            background: #e8f5e8;
            padding: 8px;
            border-radius: 4px;
            margin: 8px 0;
        }
        .disclaimer {
            background: #fff3cd;
            border: 1px solid #ffc107;
            padding: 10px;
            border-radius: 4px;
            margin: 15px 0;
            font-size: 12px;
            text-align: center;
        }
        .feedback-link {
            float: right;
            font-size: 12px;
            color: #7f8c8d;
            margin-top: -5px;
        }
        .feedback-link a {
            color: #3498db;
            text-decoration: none;
        }
        .feedback-link a:hover {
            text-decoration: underline;
        }
        .snow-height-info {
            background: #e8f5e8;
            padding: 8px;
            border-radius: 4px;
            margin: 8px 0;
            font-size: 12px;
        }
        .mu-manual-option {
            margin-top: 10px;
            padding: 8px;
            background: #f8f9fa;
            border-radius: 4px;
        }
        .detailed-explanation {
            background: #e8f5e8;
            padding: 10px;
            border-radius: 4px;
            margin: 10px 0;
            font-size: 12px;
        }
        .report-actions {
            margin: 15px 0;
            text-align: center;
        }
        .report-actions button {
            margin: 0 10px;
        }
        .btn-print {
            background: #e74c3c;
        }
        .btn-print:hover {
            background: #c0392b;
        }
        .mu-scheme {
            margin: 10px 0;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 4px;
        }
        .mu-zone {
            margin: 5px 0;
            padding: 5px;
            background: white;
            border-radius: 3px;
        }
        .scheme-description {
            background: #e8f5e8;
            padding: 10px;
            border-radius: 4px;
            margin: 10px 0;
            font-size: 12px;
        }
        .zone-calculation {
            background: #f8f9fa;
            padding: 10px;
            border-radius: 4px;
            margin: 5px 0;
        }
        .load-result {
            background: #2c3e50;
            color: white;
            padding: 8px;
            border-radius: 4px;
            margin: 5px 0;
            font-family: 'Courier New', monospace;
        }
        .scheme-usage {
            background: #fff3cd;
            padding: 8px;
            border-radius: 4px;
            margin: 5px 0;
            font-size: 12px;
        }
        @media print {
            body * {
                visibility: hidden;
            }
            #report, #report * {
                visibility: visible;
            }
            #report {
                position: absolute;
                left: 0;
                top: 0;
                width: 100%;
                border: none;
                box-shadow: none;
            }
            .report-actions {
                display: none;
            }
        }
    </style>
</head>
<body>
    <div class="feedback-link">
        –û–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å: <a href="https://dzen.ru/ingenerstroitel" target="_blank">dzen.ru/ingenerstroitel</a>
    </div>
    
    <h1>üßÆ –†–∞—Å—á—ë—Ç —Å–Ω–µ–≥–æ–≤–æ–π –Ω–∞–≥—Ä—É–∑–∫–∏ –ø–æ –°–ü 20.13330.2016</h1>
    
    <div class="disclaimer">
        <strong>–í–Ω–∏–º–∞–Ω–∏–µ:</strong> –î–∞–Ω–Ω—ã–π –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Å–ø—Ä–∞–≤–æ—á–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å –Ω–æ—Ä–º–∞–º–∏ –°–ü 20.13330.2016. 
        –û–¥–Ω–∞–∫–æ –Ω–µ —Å–ª–µ–¥—É–µ—Ç —Å–ª–µ–ø–æ –¥–æ–≤–µ—Ä—è—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º - –¥–ª—è –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã—Ö –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–π –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–≤–∞–ª–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–º —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–º.
    </div>

    <div class="step">
        <h2>üìä –®–∞–≥ 1: –ù–æ—Ä–º–∞—Ç–∏–≤–Ω–∞—è —Å–Ω–µ–≥–æ–≤–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ Sg –∏ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞</h2>
        <p class="italic">Sg, –ø. 10.2; –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –¥–ª—è –ø. 10.11</p>
        
        <div class="calculation-method">
            <label>–°–ø–æ—Å–æ–± –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è Sg:</label>
            <label class="method-label">
                <input type="radio" name="sgMethod" value="manual" checked onchange="toggleSgMethod()"> 
                ‚úèÔ∏è –í–≤–µ—Å—Ç–∏ –∑–Ω–∞—á–µ–Ω–∏–µ –≤—Ä—É—á–Ω—É—é
            </label>
            <label class="method-label">
                <input type="radio" name="sgMethod" value="sp" onchange="toggleSgMethod()"> 
                üìñ –†–∞—Å—Å—á–∏—Ç–∞—Ç—å –ø–æ –°–ü 20.13330.2016
            </label>
        </div>

        <div id="sgManualInput" class="manual-input">
            <label>–ù–æ—Ä–º–∞—Ç–∏–≤–Ω–∞—è —Å–Ω–µ–≥–æ–≤–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ Sg (–∫–ü–∞): 
                <input type="number" id="sgManual" step="0.1" value="1.8" min="0">
            </label>
            <p class="note">–£—Ç–æ—á–Ω–µ–Ω–Ω–æ–µ Sg (–ø–æ –¥–∞–Ω–Ω—ã–º –†–æ—Å–≥–∏–¥—Ä–æ–º–µ—Ç–∞, –∫–ü–∞, –µ—Å–ª–∏ –æ–±—ä–µ–∫—Ç –Ω–∞ –≥—Ä–∞–Ω–∏—Ü–µ —Ä–∞–π–æ–Ω–æ–≤ –∏–ª–∏ –≤ —Å–ª–æ–∂–Ω–æ–º —Ä–µ–ª—å–µ—Ñ–µ)</p>
        </div>

        <div id="sgSpCalculation" class="sp-calculation">
            <p><strong>–°–ø–æ—Å–æ–± –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø–æ –°–ü 20.13330.2016:</strong></p>
            <label class="method-label">
                <input type="radio" name="spMethod" value="city" checked onchange="showSpMethod('city')"> 
                üèôÔ∏è –ü–æ –Ω–∞—Å–µ–ª–µ–Ω–Ω–æ–º—É –ø—É–Ω–∫—Ç—É
            </label>
            <label class="method-label">
                <input type="radio" name="spMethod" value="map" onchange="showSpMethod('map')"> 
                üìç –ü–æ –∫–∞—Ä—Ç–µ —Å–Ω–µ–≥–æ–≤—ã—Ö —Ä–∞–π–æ–Ω–æ–≤
            </label>

            <div id="cityMethod">
                <label>–ù–∞—Å–µ–ª–µ–Ω–Ω—ã–π –ø—É–Ω–∫—Ç: 
                    <select id="citySelect" onchange="setFromCity()">
                        <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –≥–æ—Ä–æ–¥</option>
                        <option value="–ú–æ—Å–∫–≤–∞" data-temp="-7.7" data-district="III">–ú–æ—Å–∫–≤–∞</option>
                        <option value="–°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥" data-temp="-5.5" data-district="III">–°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥</option>
                        <option value="–ï–∫–∞—Ç–µ—Ä–∏–Ω–±—É—Ä–≥" data-temp="-12.6" data-district="IV">–ï–∫–∞—Ç–µ—Ä–∏–Ω–±—É—Ä–≥</option>
                        <option value="–ù–æ–≤–æ—Å–∏–±–∏—Ä—Å–∫" data-temp="-16.2" data-district="V">–ù–æ–≤–æ—Å–∏–±–∏—Ä—Å–∫</option>
                        <option value="–°–æ—á–∏" data-temp="5.0" data-district="II">–°–æ—á–∏</option>
                        <option value="–Ø–∫—É—Ç—Å–∫" data-temp="-39.6" data-district="VII">–Ø–∫—É—Ç—Å–∫</option>
                        <option value="–ö—Ä–∞—Å–Ω–æ–¥–∞—Ä" data-temp="-0.3" data-district="II">–ö—Ä–∞—Å–Ω–æ–¥–∞—Ä</option>
                        <option value="–í–ª–∞–¥–∏–≤–æ—Å—Ç–æ–∫" data-temp="-9.9" data-district="IV">–í–ª–∞–¥–∏–≤–æ—Å—Ç–æ–∫</option>
                    </select>
                </label>
                <p id="sgDisplay">Sg: <span id="sgValue">1.8</span> –∫–ü–∞</p>
            </div>

            <div id="mapMethod" style="display: none;">
                <label>–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ä—Ç—É: 
                    <select id="mapType" onchange="updateMapSrc()">
                        <option value="main">–û—Å–Ω–æ–≤–Ω–∞—è –†–æ—Å—Å–∏—è</option>
                        <option value="krym">–ö—Ä—ã–º</option>
                        <option value="sakhalin">–°–∞—Ö–∞–ª–∏–Ω</option>
                    </select>
                </label>
                <br>
                <button type="button" id="mapToggleBtn" onclick="toggleMap('snowMap')">üó∫Ô∏è –ü–æ–∫–∞–∑–∞—Ç—å –∫–∞—Ä—Ç—É</button>
                <img id="snowMap" src="https://saitinpro.ru/wp-content/uploads/2018/03/Karta-1_sneg.gif" alt="–ö–∞—Ä—Ç–∞ —Å–Ω–µ–≥–æ–≤—ã—Ö —Ä–∞–π–æ–Ω–æ–≤ –†–æ—Å—Å–∏–∏ –ø–æ –°–ü 20.13330.2016" style="display: none;">
                <label>–í—ã–±—Ä–∞–Ω–Ω—ã–π —Å–Ω–µ–≥–æ–≤–æ–π —Ä–∞–π–æ–Ω: 
                    <select id="snowDistrictMap" onchange="updateSgFromMap()">
                        <option value="I">I (0.8 –∫–ü–∞)</option>
                        <option value="II">II (1.2 –∫–ü–∞)</option>
                        <option value="III">III (1.8 –∫–ü–∞)</option>
                        <option value="IV">IV (2.4 –∫–ü–∞)</option>
                        <option value="V">V (3.2 –∫–ü–∞)</option>
                        <option value="VI">VI (4.0 –∫–ü–∞)</option>
                        <option value="VII">VII (5.6 –∫–ü–∞)</option>
                        <option value="VIII">VIII (7.0 –∫–ü–∞)</option>
                    </select>
                </label>
            </div>

            <div class="note">
                <label>–£—Ç–æ—á–Ω–µ–Ω–Ω–æ–µ Sg (–ø–æ –¥–∞–Ω–Ω—ã–º –†–æ—Å–≥–∏–¥—Ä–æ–º–µ—Ç–∞, –∫–ü–∞): 
                    <input type="number" id="customSg" step="0.1" placeholder="–û—Å—Ç–∞–≤–∏—Ç—å –ø—É—Å—Ç—ã–º –¥–ª—è —Ç–∞–±–ª–∏—á–Ω–æ–≥–æ">
                </label>
                <p class="italic">–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –µ—Å–ª–∏ –æ–±—ä–µ–∫—Ç –Ω–∞ –≥—Ä–∞–Ω–∏—Ü–µ —Ä–∞–π–æ–Ω–æ–≤ –∏–ª–∏ –≤ —Å–ª–æ–∂–Ω–æ–º —Ä–µ–ª—å–µ—Ñ–µ</p>
            </div>
        </div>

        <!-- –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ —è–Ω–≤–∞—Ä—è —Ç–µ–ø–µ—Ä—å –≤ —à–∞–≥–µ 1 -->
        <div id="temperatureControl" class="temperature-control">
            <label>üå°Ô∏è –°—Ä–µ–¥–Ω–µ–º–µ—Å—è—á–Ω–∞—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ —è–Ω–≤–∞—Ä—è: 
                <select id="januaryTemp" onchange="updateTemperatureInfo()">
                    <option value="unknown">–ù–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞</option>
                    <option value="cold">‚â§ -5¬∞C (—Ö–æ–ª–æ–¥–Ω–∞—è –∑–∏–º–∞)</option>
                    <option value="warm">> -5¬∞C (—Ç–µ–ø–ª–∞—è –∑–∏–º–∞)</option>
                </select>
            </label>
            <p class="italic">–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –≤—ã–±–æ—Ä–µ –≥–æ—Ä–æ–¥–∞ –∏–ª–∏ –≤—Ä—É—á–Ω—É—é</p>
            <div id="temperatureInfo">
                <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–µ –±—É–¥–µ—Ç –∑–∞–ø–æ–ª–Ω—è—Ç—å—Å—è –∑–¥–µ—Å—å -->
            </div>
        </div>
    </div>

    <div class="step">
        <h2>üåÑ –®–∞–≥ 2: –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –≤–æ–∑–¥–µ–π—Å—Ç–≤–∏—è –≤–µ—Ç—Ä–∞ Ce</h2>
        <p class="italic">–ø. 10.5-10.9</p>
        
        <div class="calculation-method">
            <label>–°–ø–æ—Å–æ–± –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è Ce:</label>
            <label class="method-label">
                <input type="radio" name="ceMethod" value="manual" checked onchange="toggleCeMethod()"> 
                ‚úèÔ∏è –í–≤–µ—Å—Ç–∏ –∑–Ω–∞—á–µ–Ω–∏–µ –≤—Ä—É—á–Ω—É—é
            </label>
            <label class="method-label">
                <input type="radio" name="ceMethod" value="sp" onchange="toggleCeMethod()"> 
                üìñ –†–∞—Å—Å—á–∏—Ç–∞—Ç—å –ø–æ –°–ü 20.13330.2016
            </label>
        </div>

        <div id="ceManualInput" class="manual-input">
            <label>–ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –≤–æ–∑–¥–µ–π—Å—Ç–≤–∏—è –≤–µ—Ç—Ä–∞ Ce: 
                <input type="number" id="ceManual" step="0.01" value="1.0" min="0.5" max="1.0">
            </label>
        </div>

        <div id="ceSpCalculation" class="sp-calculation">
            <p><strong>–¢–∏–ø –º–µ—Å—Ç–Ω–æ—Å—Ç–∏:</strong></p>
            <p class="terrain-type">üåä A - –æ—Ç–∫—Ä—ã—Ç—ã–µ –ø–æ–±–µ—Ä–µ–∂—å—è –º–æ—Ä–µ–π, –æ–∑–µ—Ä –∏ –≤–æ–¥–æ—Ö—Ä–∞–Ω–∏–ª–∏—â, –ø—É—Å—Ç—ã–Ω–∏, —Å—Ç–µ–ø–∏, –ª–µ—Å–æ—Å—Ç–µ–ø–∏, —Ç—É–Ω–¥—Ä–∞;</p>
            <p class="terrain-type">üèòÔ∏è B - –≥–æ—Ä–æ–¥—Å–∫–∏–µ —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–∏, –ª–µ—Å–Ω—ã–µ –º–∞—Å—Å–∏–≤—ã –∏ –¥—Ä—É–≥–∏–µ –º–µ—Å—Ç–Ω–æ—Å—Ç–∏, —Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–æ –ø–æ–∫—Ä—ã—Ç—ã–µ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏—è–º–∏ –≤—ã—Å–æ—Ç–æ–π –±–æ–ª–µ–µ 10 –º;</p>
            <p class="terrain-type">üèôÔ∏è C - –≥–æ—Ä–æ–¥—Å–∫–∏–µ —Ä–∞–π–æ–Ω—ã —Å –∑–∞—Å—Ç—Ä–æ–π–∫–æ–π –∑–¥–∞–Ω–∏—è–º–∏ –≤—ã—Å–æ—Ç–æ–π –±–æ–ª–µ–µ 25 –º.</p>
            
            <label>–¢–∏–ø –º–µ—Å—Ç–Ω–æ—Å—Ç–∏: 
                <select id="terrainType" onchange="updateCe()">
                    <option value="A">A (–æ—Ç–∫—Ä—ã—Ç–∞—è)</option>
                    <option value="B" selected>B (—Å –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏—è–º–∏)</option>
                    <option value="C">C (–≥–æ—Ä–æ–¥—Å–∫–∞—è)</option>
                </select>
            </label>
            
            <label>üè† –ó–∞—â–∏—â–µ–Ω–æ –æ—Ç –≤–µ—Ç—Ä–∞? (—Å–æ—Å–µ–¥–Ω–∏–µ –∑–¥–∞–Ω–∏—è, –ª–µ—Å –∏ —Ç.–ø.): 
                <input type="checkbox" id="protected" onchange="updateCe()">
            </label>

            <div id="dimSection">
                <p><strong>–†–∞–∑–º–µ—Ä—ã –ø–æ–∫—Ä—ã—Ç–∏—è –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ —Å–Ω–æ—Å–∞ —Å–Ω–µ–≥–∞:</strong></p>
                <label>–ù–∞–∏–º–µ–Ω—å—à–∏–π —Ä–∞–∑–º–µ—Ä –≤ –ø–ª–∞–Ω–µ l (–º): <input type="number" id="dimMin" value="50" min="0" onchange="updateCe()"></label>
                <label>–ù–∞–∏–±–æ–ª—å—à–∏–π —Ä–∞–∑–º–µ—Ä –≤ –ø–ª–∞–Ω–µ L (–º): <input type="number" id="dimMax" value="50" min="0" onchange="updateCe()"></label>
            </div>

            <p id="ceValue">–†–∞—Å—Å—á–∏—Ç–∞–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ Ce: 1.0</p>
            <div id="ceCalculationDetails"></div>
        </div>
    </div>

    <div class="step">
        <h2>üî• –®–∞–≥ 3: –¢–µ—Ä–º–∏—á–µ—Å–∫–∏–π –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç Ct</h2>
        <p class="italic">–ø. 10.10</p>
        
        <div class="calculation-method">
            <label>–°–ø–æ—Å–æ–± –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è Ct:</label>
            <label class="method-label">
                <input type="radio" name="ctMethod" value="manual" checked onchange="toggleCtMethod()"> 
                ‚úèÔ∏è –í–≤–µ—Å—Ç–∏ –∑–Ω–∞—á–µ–Ω–∏–µ –≤—Ä—É—á–Ω—É—é
            </label>
            <label class="method-label">
                <input type="radio" name="ctMethod" value="sp" onchange="toggleCtMethod()"> 
                üìñ –†–∞—Å—Å—á–∏—Ç–∞—Ç—å –ø–æ –°–ü 20.13330.2016
            </label>
        </div>

        <div id="ctManualInput" class="manual-input">
            <label>–¢–µ—Ä–º–∏—á–µ—Å–∫–∏–π –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç Ct: 
                <input type="number" id="ctManual" step="0.1" value="1.0" min="0.8" max="1.0">
            </label>
        </div>

        <div id="ctSpCalculation" class="sp-calculation">
            <p>Ct=0.8 –¥–ª—è –Ω–µ—É—Ç–µ–ø–ª–µ–Ω–Ω—ã—Ö –ø–æ–∫—Ä—ã—Ç–∏–π (—Ç–µ–ø–ª–æ–≤–æ–µ —Å–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏–µ R < 0.5 –º¬≤¬∑¬∞C/–í—Ç, –±–µ–∑ —Ç–µ–ø–ª–æ–∏–∑–æ–ª—è—Ü–∏–∏ –∏–ª–∏ —Å —Ç–æ–Ω–∫–∏–º —Å–ª–æ–µ–º; –Ω–∞–ø—Ä–∏–º–µ—Ä, –º–µ—Ç–∞–ª–ª–∏—á–µ—Å–∫–∏–µ –∫—Ä—ã—à–∏ –±–µ–∑ —É—Ç–µ–ø–ª–∏—Ç–µ–ª—è) —Å –≤—ã—Å–æ–∫–∏–º —Ç–µ–ø–ª–æ–≤—ã–¥–µ–ª–µ–Ω–∏–µ–º (–ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø–æ–º–µ—â–µ–Ω–∏—è —Å –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ–º >20 –í—Ç/–º¬≤), —É–∫–ª–æ–Ω >3%, —Ö–æ—Ä–æ—à–∏–π –æ—Ç–≤–æ–¥ –≤–æ–¥—ã (–≤–æ–¥–æ—Å—Ç–æ–∫–∏, —É–∫–ª–æ–Ω—ã). –ò–Ω–∞—á–µ Ct=1.0 (–¥–ª—è —É—Ç–µ–ø–ª–µ–Ω–Ω—ã—Ö –∂–∏–ª—ã—Ö –∑–¥–∞–Ω–∏–π).</p>
            <label>Ct: 
                <select id="ct" onchange="updateCalculations()">
                    <option value="1.0" selected>1.0 (—Å—Ç–∞–Ω–¥–∞—Ä—Ç)</option>
                    <option value="0.8">0.8 (—Ç–∞—è–Ω–∏–µ —Å–Ω–µ–≥–∞)</option>
                </select>
            </label>
        </div>
    </div>

    <div class="step">
        <h2>üè† –®–∞–≥ 4: –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –ø–µ—Ä–µ—Ö–æ–¥–∞ Œº</h2>
        <p class="italic">–ø. 10.4, –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ë</p>
        
        <div class="calculation-method">
            <label>–°–ø–æ—Å–æ–± –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è Œº:</label>
            <label class="method-label">
                <input type="radio" name="muMethod" value="manual" checked onchange="toggleMuMethod()"> 
                ‚úèÔ∏è –í–≤–µ—Å—Ç–∏ –∑–Ω–∞—á–µ–Ω–∏–µ –≤—Ä—É—á–Ω—É—é
            </label>
            <label class="method-label">
                <input type="radio" name="muMethod" value="sp" onchange="toggleMuMethod()"> 
                üìñ –†–∞—Å—Å—á–∏—Ç–∞—Ç—å –ø–æ –°–ü 20.13330.2016
            </label>
        </div>

        <div id="muManualInput" class="manual-input">
            <label>–ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –ø–µ—Ä–µ—Ö–æ–¥–∞ Œº: 
                <input type="number" id="muManual" step="0.01" value="1.0" min="0" max="3.0">
            </label>
        </div>

        <div id="muSpCalculation" class="sp-calculation">
            <p>–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø –ø–æ–∫—Ä—ã—Ç–∏—è –∏ —É–∫–∞–∂–∏—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã. –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è Œº –¥–ª—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Å—Ö–µ–º.</p>
            
            <label>–¢–∏–ø –ø–æ–∫—Ä—ã—Ç–∏—è: 
                <select id="roofType" onchange="showParams()">
                    <option value="flat" data-ref="–ë.1">–ü–ª–æ—Å–∫–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ (–ë.1)</option>
                    <option value="single_slope" data-ref="–ë.1">–û–¥–Ω–æ—Å–∫–∞—Ç–Ω–æ–µ (–ë.1)</option>
                    <option value="pitched" data-ref="–ë.1" selected>–î–≤—É—Å–∫–∞—Ç–Ω–æ–µ (–ë.1)</option>
                    <option value="multi_slope" data-ref="–ë.1">–ú–Ω–æ–≥–æ—Å–∫–∞—Ç–Ω–æ–µ (–ë.1)</option>
                    <option value="arched" data-ref="–ë.2">–°–≤–æ–¥—á–∞—Ç–æ–µ/–∞—Ä–æ—á–Ω–æ–µ (–ë.2)</option>
                    <option value="cylindrical" data-ref="–ë.10">–¶–∏–ª–∏–Ω–¥—Ä–∏—á–µ—Å–∫–æ–µ (–ë.10)</option>
                    <option value="dome" data-ref="–ë.11">–ö—É–ø–æ–ª—å–Ω–æ–µ (–ë.11)</option>
                    <option value="cone" data-ref="–ë.12">–ö–æ–Ω–∏—á–µ—Å–∫–æ–µ (–ë.12)</option>
                    <option value="height_drop" data-ref="–ë.8">–° –ø–µ—Ä–µ–ø–∞–¥–æ–º –≤—ã—Å–æ—Ç (–ë.8)</option>
                    <option value="snow_bags" data-ref="–ë.9">–°–Ω–µ–≥–æ–≤—ã–µ –º–µ—à–∫–∏ (–ë.9)</option>
                </select>
            </label>
            
            <p id="roofRef">–°—Å—ã–ª–∫–∞ –Ω–∞ –°–ü: –ë.1</p>
            
            <div id="roofImageContainer">
                <img id="roofImage" src="https://via.placeholder.com/350x180/3498db/ffffff?text=–í—ã–±–µ—Ä–∏—Ç–µ+—Ç–∏–ø+–∫—Ä—ã—à–∏" alt="–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∫—Ä–æ–≤–ª–∏">
            </div>

            <div id="roofParams">
                <label>–£–≥–æ–ª –Ω–∞–∫–ª–æ–Ω–∞ –∫—Ä—ã—à–∏ Œ± (¬∞): <input type="number" id="roofAngle" min="0" max="90" value="30" onchange="updateMu()"></label>
            </div>

            <div id="muCalculationDetails">
                <!-- –î–µ—Ç–∞–ª–∏ —Ä–∞—Å—á–µ—Ç–∞ Œº –±—É–¥—É—Ç –∑–∞–ø–æ–ª–Ω—è—Ç—å—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
            </div>

            <div id="muSchemesContainer">
                <!-- –°—Ö–µ–º—ã —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è Œº –±—É–¥—É—Ç –∑–∞–ø–æ–ª–Ω—è—Ç—å—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
            </div>

            <p id="muValue">–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ Œº = 1.0</p>
        </div>
    </div>

    <div class="step">
        <h2>üìâ –®–∞–≥ 5: –ü–æ–Ω–∏–∂–µ–Ω–Ω–∞—è —Å–Ω–µ–≥–æ–≤–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞</h2>
        <p class="italic">–ø. 10.11</p>
        
        <div class="detailed-explanation">
            <p><strong>üîç –ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ –ø–æ –ø–æ–Ω–∏–∂–µ–Ω–Ω–æ–π –Ω–∞–≥—Ä—É–∑–∫–µ:</strong></p>
            <p>–í <strong>—Ö–æ–ª–æ–¥–Ω—ã—Ö —Ä–µ–≥–∏–æ–Ω–∞—Ö</strong> (t_—è–Ω–≤ ‚â§ -5¬∞C) —Å–Ω–µ–≥ –ª–µ–∂–∏—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ –≤—Å—é –∑–∏–º—É, —Ñ–æ—Ä–º–∏—Ä—É—è –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã–π —Å–Ω–µ–∂–Ω—ã–π –ø–æ–∫—Ä–æ–≤. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–æ–Ω–∏–∂–µ–Ω–Ω—É—é –Ω–∞–≥—Ä—É–∑–∫—É S_n_red = 0.5 √ó S_g –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ –¥–µ—Ñ–æ—Ä–º–∞—Ü–∏–π –∏ –ø—Ä–æ–≥–∏–±–æ–≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–π.</p>
            
            <p>–í <strong>—Ç–µ–ø–ª—ã—Ö —Ä–µ–≥–∏–æ–Ω–∞—Ö</strong> (t_—è–Ω–≤ > -5¬∞C) —Å–∏—Ç—É–∞—Ü–∏—è –ø—Ä–∏–Ω—Ü–∏–ø–∏–∞–ª—å–Ω–æ –∏–Ω–∞—è:</p>
            <ul>
                <li>‚ùÑÔ∏è <strong>–ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏–µ –æ—Ç—Ç–µ–ø–µ–ª–∏</strong> - —Å–Ω–µ–≥ –ø–æ–¥—Ç–∞–∏–≤–∞–µ—Ç –∏ —É–ø–ª–æ—Ç–Ω—è–µ—Ç—Å—è</li>
                <li>üå®Ô∏è <strong>–ù–æ–≤—ã–µ —Å–Ω–µ–≥–æ–ø–∞–¥—ã</strong> - –Ω–∞—Å–ª–∞–∏–≤–∞—é—Ç—Å—è –Ω–∞ —É–ø–ª–æ—Ç–Ω–µ–Ω–Ω—ã–π —Å–Ω–µ–≥</li>
                <li>üíß <strong>–û–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –ª–µ–¥—è–Ω—ã—Ö –∫–æ—Ä–æ–∫</strong> - –º–µ–∂–¥—É —Å–ª–æ—è–º–∏ —Å–Ω–µ–≥–∞ –æ–±—Ä–∞–∑—É—é—Ç—Å—è –ª–µ–¥—è–Ω—ã–µ –ø—Ä–æ—Å–ª–æ–π–∫–∏</li>
                <li>‚öñÔ∏è <strong>–ù–µ–ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ</strong> - –∏–∑-–∑–∞ –Ω–µ—Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–æ–≥–æ —Ç–∞—è–Ω–∏—è –∏ –∑–∞–º–µ—Ä–∑–∞–Ω–∏—è</li>
            </ul>
            
            <div class="warning">
                <p><strong>‚ö†Ô∏è –†–∏—Å–∫–∏ –ø—Ä–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–∏ –ø–æ–Ω–∏–∂–µ–Ω–Ω–æ–π –Ω–∞–≥—Ä—É–∑–∫–∏ –≤ —Ç–µ–ø–ª—ã—Ö —Ä–µ–≥–∏–æ–Ω–∞—Ö:</strong></p>
                <ul>
                    <li><strong>–û–±—Ä—É—à–µ–Ω–∏–µ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–π</strong> - —Ä–µ–∞–ª—å–Ω–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ –º–æ–∂–µ—Ç –ø—Ä–µ–≤—ã—à–∞—Ç—å —Ä–∞—Å—á–µ—Ç–Ω—É—é –≤ 2-3 —Ä–∞–∑–∞</li>
                    <li><strong>–õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è –Ω–∞–≥—Ä—É–∑–æ–∫</strong> - –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ "—Å–Ω–µ–≥–æ–≤—ã—Ö –º–µ—à–∫–æ–≤" —Å –∫–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ü–∏–µ–π –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–π</li>
                    <li><strong>–õ–µ–¥—è–Ω—ã–µ –ø—Ä–æ–±–∫–∏</strong> - –≤ –≤–æ–¥–æ—Å—Ç–æ–∫–∞—Ö —Å–æ–∑–¥–∞—é—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –Ω–∞–≥—Ä—É–∑–∫–∏</li>
                    <li><strong>–ê–≤–∞—Ä–∏–π–Ω—ã–µ —Å–∏—Ç—É–∞—Ü–∏–∏</strong> - –≤ 2010-2020 –≥–≥. –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–æ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–ª—É—á–∞–µ–≤ –æ–±—Ä—É—à–µ–Ω–∏—è –∫—Ä—ã—à –≤ —é–∂–Ω—ã—Ö —Ä–µ–≥–∏–æ–Ω–∞—Ö –†–æ—Å—Å–∏–∏ –∏–º–µ–Ω–Ω–æ –∏–∑-–∑–∞ –Ω–µ–¥–æ—É—á–µ—Ç–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö —Å–Ω–µ–≥–æ–≤—ã—Ö –Ω–∞–≥—Ä—É–∑–æ–∫</li>
                </ul>
            </div>
            
            <p>–ü–æ—ç—Ç–æ–º—É –≤ —Ç–µ–ø–ª—ã—Ö —Ä–µ–≥–∏–æ–Ω–∞—Ö –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –ø–æ–Ω–∏–∂–µ–Ω–Ω–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ <strong>–Ω–µ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è</strong> - —Ä–∞—Å—á–µ—Ç –≤–µ–¥–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø–æ –ø–æ–ª–Ω–æ–π –Ω–æ—Ä–º–∞—Ç–∏–≤–Ω–æ–π –Ω–∞–≥—Ä—É–∑–∫–µ.</p>
        </div>

        <button type="button" onclick="toggleMap('sp131Table')">üìä –ü–æ–∫–∞–∑–∞—Ç—å/–°–∫—Ä—ã—Ç—å —Ç–∞–±–ª–∏—Ü—É –°–ü 131.13330.2020</button>
        <img id="sp131Table" src="https://via.placeholder.com/600x400/95a5a6/ffffff?text=–¢–∞–±–ª–∏—Ü–∞+3.1+–°–ü+131.13330.2020" alt="–¢–∞–±–ª–∏—Ü–∞ 3.1 –°–ü 131.13330.2020" style="display: none;">
        
        <label>üì• –†–∞—Å—Å—á–∏—Ç–∞—Ç—å –ø–æ–Ω–∏–∂–µ–Ω–Ω—É—é –Ω–∞–≥—Ä—É–∑–∫—É? 
            <input type="checkbox" id="reducedLoad">
        </label>
        <p class="italic">–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –¥–ª—è —Ö–æ–ª–æ–¥–Ω—ã—Ö —Ä–µ–≥–∏–æ–Ω–æ–≤ —Å t_—è–Ω–≤ ‚â§ -5¬∞C</p>
    </div>

    <button type="button" onclick="calculate()" style="background: #27ae60; padding: 12px 24px; font-size: 16px;">üéØ –†–∞—Å—Å—á–∏—Ç–∞—Ç—å —Å–Ω–µ–≥–æ–≤—É—é –Ω–∞–≥—Ä—É–∑–∫—É</button>

    <div id="report">
        <h2>üìã –ü–æ–¥—Ä–æ–±–Ω—ã–π –æ—Ç—á—ë—Ç –ø–æ —Ä–∞—Å—á—ë—Ç—É</h2>
        <p class="italic">–ø. 10.1-10.12</p>
        <div class="report-actions">
            <button type="button" onclick="window.print()" class="btn-print">üñ®Ô∏è –ü–µ—á–∞—Ç—å –æ—Ç—á–µ—Ç–∞</button>
            <button type="button" onclick="saveAsPDF()" class="btn-print">üìÑ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∫–∞–∫ PDF</button>
        </div>
        <div id="reportContent"></div>
    </div>

    <script>
        // –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã –∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
        const sgValues = {
            'I': 0.8, 'II': 1.2, 'III': 1.8, 'IV': 2.4,
            'V': 3.2, 'VI': 4.0, 'VII': 5.6, 'VIII': 7.0
        };

        const mapUrls = {
            'main': 'https://saitinpro.ru/wp-content/uploads/2018/03/Karta-1_sneg.gif',
            'krym': 'https://saitinpro.ru/wp-content/uploads/2018/03/Karta-1b_sneg_krym.gif',
            'sakhalin': 'https://saitinpro.ru/wp-content/uploads/2018/03/Karta-1a_sneg_sahalin.gif'
        };

        const roofImages = {
            'flat': 'https://via.placeholder.com/350x180/3498db/ffffff?text=–ü–ª–æ—Å–∫–∞—è+–∫—Ä—ã—à–∞+Œº=1.0',
            'single_slope': 'https://via.placeholder.com/350x200/2ecc71/ffffff?text=–û–¥–Ω–æ—Å–∫–∞—Ç–Ω–∞—è+–∫—Ä—ã—à–∞',
            'pitched': 'https://via.placeholder.com/350x200/e74c3c/ffffff?text=–î–≤—É—Å–∫–∞—Ç–Ω–∞—è+–∫—Ä—ã—à–∞',
            'multi_slope': 'https://via.placeholder.com/350x200/9b59b6/ffffff?text=–ú–Ω–æ–≥–æ—Å–∫–∞—Ç–Ω–∞—è+–∫—Ä—ã—à–∞',
            'arched': 'https://via.placeholder.com/350x180/f39c12/ffffff?text=–ê—Ä–æ—á–Ω–∞—è+–∫—Ä—ã—à–∞',
            'cylindrical': 'https://via.placeholder.com/350x180/1abc9c/ffffff?text=–¶–∏–ª–∏–Ω–¥—Ä–∏—á–µ—Å–∫–∞—è+–∫—Ä—ã—à–∞',
            'dome': 'https://via.placeholder.com/350x200/34495e/ffffff?text=–ö—É–ø–æ–ª—å–Ω–∞—è+–∫—Ä—ã—à–∞',
            'cone': 'https://via.placeholder.com/350x200/16a085/ffffff?text=–ö–æ–Ω–∏—á–µ—Å–∫–∞—è+–∫—Ä—ã—à–∞',
            'height_drop': 'https://via.placeholder.com/350x200/e67e22/ffffff?text=–ü–µ—Ä–µ–ø–∞–¥+–≤—ã—Å–æ—Ç',
            'snow_bags': 'https://via.placeholder.com/350x200/c0392b/ffffff?text=–°–Ω–µ–≥–æ–≤—ã–µ+–º–µ—à–∫–∏'
        };

        let currentScheme = 'uniform';
        let currentCity = '';
        let currentTemperature = null;
        let currentSgMethod = 'manual';

        // –ë–ê–ó–û–í–´–ï –§–£–ù–ö–¶–ò–ò –ü–ï–†–ï–ö–õ–Æ–ß–ï–ù–ò–Ø –ú–ï–¢–û–î–û–í
        function toggleSgMethod() {
            const method = document.querySelector('input[name="sgMethod"]:checked').value;
            currentSgMethod = method;
            document.getElementById('sgManualInput').style.display = method === 'manual' ? 'block' : 'none';
            document.getElementById('sgSpCalculation').style.display = method === 'sp' ? 'block' : 'none';
        }

        function toggleCeMethod() {
            const method = document.querySelector('input[name="ceMethod"]:checked').value;
            document.getElementById('ceManualInput').style.display = method === 'manual' ? 'block' : 'none';
            document.getElementById('ceSpCalculation').style.display = method === 'sp' ? 'block' : 'none';
            if (method === 'sp') {
                updateCe();
            }
        }

        function toggleCtMethod() {
            const method = document.querySelector('input[name="ctMethod"]:checked').value;
            document.getElementById('ctManualInput').style.display = method === 'manual' ? 'block' : 'none';
            document.getElementById('ctSpCalculation').style.display = method === 'sp' ? 'block' : 'none';
        }

        function toggleMuMethod() {
            const method = document.querySelector('input[name="muMethod"]:checked').value;
            document.getElementById('muManualInput').style.display = method === 'manual' ? 'block' : 'none';
            document.getElementById('muSpCalculation').style.display = method === 'sp' ? 'block' : 'none';
            if (method === 'sp') {
                updateMu();
            }
        }

        // –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∫–∞—Ä—Ç–æ–π
        function showSpMethod(method) {
            const cityMethod = document.getElementById('cityMethod');
            const mapMethod = document.getElementById('mapMethod');
            const mapToggleBtn = document.getElementById('mapToggleBtn');
            
            if (method === 'city') {
                cityMethod.style.display = 'block';
                mapMethod.style.display = 'none';
                if (mapToggleBtn) mapToggleBtn.style.display = 'none';
                setFromCity();
            } else {
                cityMethod.style.display = 'none';
                mapMethod.style.display = 'block';
                if (mapToggleBtn) mapToggleBtn.style.display = 'inline-block';
            }
        }

        function toggleMap(id) {
            const elem = document.getElementById(id);
            elem.style.display = elem.style.display === 'none' ? 'block' : 'none';
            const btn = document.getElementById('mapToggleBtn');
            if (btn) {
                btn.textContent = elem.style.display === 'none' ? 'üó∫Ô∏è –ü–æ–∫–∞–∑–∞—Ç—å –∫–∞—Ä—Ç—É' : 'üó∫Ô∏è –°–∫—Ä—ã—Ç—å –∫–∞—Ä—Ç—É';
            }
        }

        function updateMapSrc() {
            const type = document.getElementById('mapType').value;
            document.getElementById('snowMap').src = mapUrls[type];
        }

        // –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –≥–æ—Ä–æ–¥–∞–º–∏
        function setFromCity() {
            const select = document.getElementById('citySelect');
            const option = select.options[select.selectedIndex];
            currentCity = option.value;
            const district = option.getAttribute('data-district');
            const temp = option.getAttribute('data-temp') || null;
            
            currentTemperature = temp ? parseFloat(temp) : null;
            
            if (district) {
                if (document.getElementById('snowDistrictMap')) {
                    document.getElementById('snowDistrictMap').value = district;
                }
            }
            
            const sg = sgValues[district] || '1.8';
            document.getElementById('sgValue').textContent = sg;
            
            // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—É –≤ —Å–µ–ª–µ–∫—Ç–µ
            if (currentTemperature !== null) {
                const tempSelect = document.getElementById('januaryTemp');
                tempSelect.value = currentTemperature <= -5 ? 'cold' : 'warm';
            }
            
            updateTemperatureInfo();
            updateCe();
        }

        function updateSgFromMap() {
            const district = document.getElementById('snowDistrictMap').value;
            const sg = sgValues[district] || '';
            document.getElementById('sgValue').textContent = sg;
        }

        // –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ Ce
        function updateCe() {
            const terrain = document.getElementById('terrainType').value;
            const protected = document.getElementById('protected').checked;
            const dimMin = parseFloat(document.getElementById('dimMin').value) || 50;
            const dimMax = parseFloat(document.getElementById('dimMax').value) || 50;
            const tempSelect = document.getElementById('januaryTemp');
            const warmJan = tempSelect.value === 'warm';
            
            const Ce = calculateCe(terrain, dimMin, dimMax, protected, warmJan);
            document.getElementById('ceValue').textContent = `–†–∞—Å—Å—á–∏—Ç–∞–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ Ce: ${Ce.toFixed(2)}`;
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –¥–µ—Ç–∞–ª–∏ —Ä–∞—Å—á–µ—Ç–∞
            let details = '';
            if (protected) {
                details = '<p class="note">üè† –ó–¥–∞–Ω–∏–µ –∑–∞—â–∏—â–µ–Ω–æ –æ—Ç –≤–µ—Ç—Ä–∞ - –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è Ce = 0.85</p>';
            } else if (warmJan) {
                details = '<p class="note">üå°Ô∏è –¢–µ–ø–ª–∞—è –∑–∏–º–∞ (t_—è–Ω–≤ > -5¬∞C) - –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è Ce = 1.0</p>';
            } else {
                details = `<p class="note">üìè –†–∞–∑–º–µ—Ä—ã –ø–æ–∫—Ä—ã—Ç–∏—è: ${dimMin}√ó${dimMax} –º, —Ç–∏–ø –º–µ—Å—Ç–Ω–æ—Å—Ç–∏: ${terrain}</p>`;
            }
            document.getElementById('ceCalculationDetails').innerHTML = details;
        }

        function calculateCe(terrain, dimMin, dimMax, protected, warmJan) {
            if (protected) return 0.85;
            if (warmJan) return 1.0;
            
            // –†–∞—Å—á–µ—Ç –ø–æ –°–ü 20.13330.2016 –ø.10.6-10.9
            const l = Math.min(dimMin, dimMax);
            const L = Math.max(dimMin, dimMax);
            
            if (terrain === 'A') {
                if (l <= 50 && L <= 100) return 0.7;
                if (l > 100 || L > 200) return 1.0;
                return 0.85;
            } else if (terrain === 'B') {
                if (l <= 50 && L <= 100) return 0.7;
                if (l > 100 || L > 200) return 1.0;
                return 0.85;
            } else if (terrain === 'C') {
                return 1.0;
            }
            
            return 1.0;
        }

        // –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–æ–π
        function updateTemperatureInfo() {
            const temperatureInfo = document.getElementById('temperatureInfo');
            const reducedLoadCheckbox = document.getElementById('reducedLoad');
            const tempSelect = document.getElementById('januaryTemp');
            
            let temperatureHTML = '';
            let isCold = false;
            
            if (tempSelect.value === 'cold') {
                temperatureHTML = `
                    <p>‚úÖ –•–æ–ª–æ–¥–Ω—ã–π —Ä–µ–≥–∏–æ–Ω - –ø–æ–Ω–∏–∂–µ–Ω–Ω–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–∞</p>
                    <p class="italic">${currentCity ? `–î–ª—è –Ω–∞—Å–µ–ª–µ–Ω–Ω–æ–≥–æ –ø—É–Ω–∫—Ç–∞ ${currentCity}` : '–î–ª—è –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —Ä–µ–≥–∏–æ–Ω–∞'}</p>
                `;
                isCold = true;
            } else if (tempSelect.value === 'warm') {
                temperatureHTML = `
                    <p>‚ùå –¢–µ–ø–ª—ã–π —Ä–µ–≥–∏–æ–Ω - –ø–æ–Ω–∏–∂–µ–Ω–Ω–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–µ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è</p>
                    <p class="italic">${currentCity ? `–î–ª—è –Ω–∞—Å–µ–ª–µ–Ω–Ω–æ–≥–æ –ø—É–Ω–∫—Ç–∞ ${currentCity}` : '–î–ª—è –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —Ä–µ–≥–∏–æ–Ω–∞'}</p>
                `;
                isCold = false;
            } else {
                temperatureHTML = `
                    <p class="italic">–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø –∑–∏–º—ã –≤—Ä—É—á–Ω—É—é –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –ø–æ–Ω–∏–∂–µ–Ω–Ω–æ–π –Ω–∞–≥—Ä—É–∑–∫–∏</p>
                `;
                isCold = false;
            }
            
            if (temperatureInfo) {
                temperatureInfo.innerHTML = temperatureHTML;
            }
            
            if (reducedLoadCheckbox) {
                reducedLoadCheckbox.disabled = !isCold;
                if (!isCold) {
                    reducedLoadCheckbox.checked = false;
                }
            }
        }

        // –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ Œº
        function showParams() {
            const type = document.getElementById('roofType').value;
            const ref = document.getElementById('roofType').options[document.getElementById('roofType').selectedIndex].getAttribute('data-ref');
            
            document.getElementById('roofRef').textContent = `–°—Å—ã–ª–∫–∞ –Ω–∞ –°–ü: ${ref}`;
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
            document.getElementById('roofImage').src = roofImages[type] || 'https://via.placeholder.com/350x180/3498db/ffffff?text=–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ+–Ω–µ+–¥–æ—Å—Ç—É–ø–Ω–æ';
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤–≤–æ–¥–∞
            let paramsHTML = '';
            
            switch(type) {
                case 'flat':
                    paramsHTML = '<label>–ü–ª–æ—Å–∫–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ - Œº = 1.0</label>';
                    break;
                case 'single_slope':
                case 'pitched':
                case 'multi_slope':
                    paramsHTML = '<label>–£–≥–æ–ª –Ω–∞–∫–ª–æ–Ω–∞ –∫—Ä—ã—à–∏ Œ± (¬∞): <input type="number" id="roofAngle" min="0" max="90" value="30" onchange="updateMu()"></label>';
                    break;
                case 'arched':
                    paramsHTML = '<label>–û—Ç–Ω–æ—à–µ–Ω–∏–µ f/l: <input type="number" id="archRatio" step="0.01" min="0" max="1" value="0.1" onchange="updateMu()"></label>';
                    break;
                case 'cylindrical':
                    paramsHTML = '<label>–£–≥–æ–ª –Ω–∞–∫–ª–æ–Ω–∞ –æ–±—Ä–∞–∑—É—é—â–µ–π Œ± (¬∞): <input type="number" id="cylindricalAngle" min="0" max="90" value="30" onchange="updateMu()"></label>';
                    break;
                case 'dome':
                    paramsHTML = '<label>–û—Ç–Ω–æ—à–µ–Ω–∏–µ f/d: <input type="number" id="domeRatio" step="0.01" min="0" max="0.5" value="0.1" onchange="updateMu()"></label>';
                    break;
                case 'cone':
                    paramsHTML = '<label>–£–≥–æ–ª –Ω–∞–∫–ª–æ–Ω–∞ –æ–±—Ä–∞–∑—É—é—â–µ–π Œ± (¬∞): <input type="number" id="coneAngle" min="0" max="90" value="30" onchange="updateMu()"></label>';
                    break;
                case 'height_drop':
                    paramsHTML = `
                        <label>–í—ã—Å–æ—Ç–∞ –ø–µ—Ä–µ–ø–∞–¥–∞ h (–º): <input type="number" id="heightDrop" min="0" value="2" onchange="updateMu()"></label>
                        <label>–î–ª–∏–Ω–∞ —Å–∫–∞—Ç–∞ –≤–µ—Ä—Ö–Ω–µ–≥–æ –ø–æ–∫—Ä—ã—Ç–∏—è l1 (–º): <input type="number" id="lengthUpper" min="0" value="10" onchange="updateMu()"></label>
                        <label>–î–ª–∏–Ω–∞ —Å–∫–∞—Ç–∞ –Ω–∏–∂–Ω–µ–≥–æ –ø–æ–∫—Ä—ã—Ç–∏—è l2 (–º): <input type="number" id="lengthLower" min="0" value="10" onchange="updateMu()"></label>
                    `;
                    break;
                case 'snow_bags':
                    paramsHTML = `
                        <label>–®–∏—Ä–∏–Ω–∞ –∑–æ–Ω—ã —Å–Ω–µ–≥–æ–≤–æ–≥–æ –º–µ—à–∫–∞ b (–º): <input type="number" id="snowBagWidth" min="0" value="5" onchange="updateMu()"></label>
                        <label>–î–ª–∏–Ω–∞ –∑–æ–Ω—ã —Å–Ω–µ–≥–æ–≤–æ–≥–æ –º–µ—à–∫–∞ l (–º): <input type="number" id="snowBagLength" min="0" value="10" onchange="updateMu()"></label>
                    `;
                    break;
                default:
                    paramsHTML = '<label>–î–∞–Ω–Ω—ã–π —Ç–∏–ø –ø–æ–∫—Ä—ã—Ç–∏—è —Ç—Ä–µ–±—É–µ—Ç —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–≥–æ —Ä–∞—Å—á–µ—Ç–∞</label>';
            }
            
            document.getElementById('roofParams').innerHTML = paramsHTML;
            updateMu();
        }

        function updateMu() {
            const type = document.getElementById('roofType').value;
            let muResults = {};
            let details = '';
            
            switch(type) {
                case 'flat':
                    muResults = calculateMuForFlatRoof();
                    details = '–ü–ª–æ—Å–∫–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ: Œº = 1.0';
                    break;
                case 'single_slope':
                    const angleSingle = parseFloat(document.getElementById('roofAngle').value) || 0;
                    muResults = calculateMuForSingleSlope(angleSingle);
                    details = `–û–¥–Ω–æ—Å–∫–∞—Ç–Ω–∞—è –∫—Ä—ã—à–∞, —É–≥–æ–ª ${angleSingle}¬∞`;
                    break;
                case 'pitched':
                    const anglePitched = parseFloat(document.getElementById('roofAngle').value) || 0;
                    muResults = calculateMuForPitchedRoof(anglePitched);
                    details = `–î–≤—É—Å–∫–∞—Ç–Ω–∞—è –∫—Ä—ã—à–∞, —É–≥–æ–ª ${anglePitched}¬∞`;
                    break;
                case 'multi_slope':
                    const angleMulti = parseFloat(document.getElementById('roofAngle').value) || 0;
                    muResults = calculateMuForMultiSlope(angleMulti);
                    details = `–ú–Ω–æ–≥–æ—Å–∫–∞—Ç–Ω–∞—è –∫—Ä—ã—à–∞, —É–≥–æ–ª ${angleMulti}¬∞`;
                    break;
                case 'arched':
                    const ratio = parseFloat(document.getElementById('archRatio').value) || 0.1;
                    muResults = calculateMuForArchedRoof(ratio);
                    details = `–ê—Ä–æ—á–Ω–∞—è –∫—Ä—ã—à–∞, f/l = ${ratio}`;
                    break;
                case 'cylindrical':
                    const cylindricalAngle = parseFloat(document.getElementById('cylindricalAngle').value) || 30;
                    muResults = calculateMuForCylindricalRoof(cylindricalAngle);
                    details = `–¶–∏–ª–∏–Ω–¥—Ä–∏—á–µ—Å–∫–∞—è –∫—Ä—ã—à–∞, —É–≥–æ–ª ${cylindricalAngle}¬∞`;
                    break;
                case 'dome':
                    const domeRatio = parseFloat(document.getElementById('domeRatio').value) || 0.1;
                    muResults = calculateMuForDomeRoof(domeRatio);
                    details = `–ö—É–ø–æ–ª—å–Ω–∞—è –∫—Ä—ã—à–∞, f/d = ${domeRatio}`;
                    break;
                case 'cone':
                    const coneAngle = parseFloat(document.getElementById('coneAngle').value) || 30;
                    muResults = calculateMuForConeRoof(coneAngle);
                    details = `–ö–æ–Ω–∏—á–µ—Å–∫–∞—è –∫—Ä—ã—à–∞, —É–≥–æ–ª ${coneAngle}¬∞`;
                    break;
                case 'height_drop':
                    const h = parseFloat(document.getElementById('heightDrop').value) || 2;
                    const l1 = parseFloat(document.getElementById('lengthUpper').value) || 10;
                    const l2 = parseFloat(document.getElementById('lengthLower').value) || 10;
                    muResults = calculateMuForHeightDrop(h, l1, l2);
                    details = `–ü–µ—Ä–µ–ø–∞–¥ –≤—ã—Å–æ—Ç h=${h}–º, l1=${l1}–º, l2=${l2}–º`;
                    break;
                case 'snow_bags':
                    const width = parseFloat(document.getElementById('snowBagWidth').value) || 5;
                    const length = parseFloat(document.getElementById('snowBagLength').value) || 10;
                    muResults = calculateMuForSnowBags(width, length);
                    details = `–°–Ω–µ–≥–æ–≤—ã–µ –º–µ—à–∫–∏, —à–∏—Ä–∏–Ω–∞=${width}–º, –¥–ª–∏–Ω–∞=${length}–º`;
                    break;
                default:
                    muResults = {'–û—Å–Ω–æ–≤–Ω–∞—è –∑–æ–Ω–∞': 1.0};
                    details = '–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ: Œº = 1.0';
            }
            
            // –û—Ç–æ–±—Ä–∞–∂–∞–µ–º —Å—Ö–µ–º—ã —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è Œº
            displayMuSchemes(muResults);
            
            document.getElementById('muCalculationDetails').innerHTML = `<p class="note">${details}</p>`;
        }

        function calculateMuForFlatRoof() {
            return {
                '–°—Ö–µ–º–∞ 1 (—Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–∞—è)': {
                    '–í—Å—è –ø–ª–æ—â–∞–¥—å': 1.0,
                    '–æ–ø–∏—Å–∞–Ω–∏–µ': '–î–ª—è –ø–ª–æ—Å–∫–∏—Ö –ø–æ–∫—Ä—ã—Ç–∏–π –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è —Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å–Ω–µ–≥–∞ –ø–æ –≤—Å–µ–π –ø–ª–æ—â–∞–¥–∏ —Å–æ–≥–ª–∞—Å–Ω–æ –ø.–ë.1 –°–ü 20.13330.2016',
                    '–ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ': '–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ –≤—Å–µ—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –ø–æ–∫—Ä—ã—Ç–∏—è'
                }
            };
        }

        function calculateMuForSingleSlope(angle) {
            if (angle <= 25) {
                return {
                    '–°—Ö–µ–º–∞ 1 (—Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–∞—è)': {
                        '–í—Å—è –ø–ª–æ—â–∞–¥—å': 1.0,
                        '–æ–ø–∏—Å–∞–Ω–∏–µ': '–ü—Ä–∏ —É–≥–ª–∞—Ö –Ω–∞–∫–ª–æ–Ω–∞ –¥–æ 25¬∞ —Å–Ω–µ–≥ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è —Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–æ –ø–æ –≤—Å–µ–π –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–∏ —Å–∫–∞—Ç–∞ —Å–æ–≥–ª–∞—Å–Ω–æ –ø.–ë.1 –°–ü 20.13330.2016',
                        '–ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ': '–û—Å–Ω–æ–≤–Ω–∞—è —Ä–∞—Å—á–µ—Ç–Ω–∞—è —Å—Ö–µ–º–∞ –¥–ª—è –æ–¥–Ω–æ—Å–∫–∞—Ç–Ω—ã—Ö –∫—Ä—ã—à'
                    }
                };
            }
            if (angle >= 60) {
                return {
                    '–°—Ö–µ–º–∞ 1 (—Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–∞—è)': {
                        '–í—Å—è –ø–ª–æ—â–∞–¥—å': 0.0,
                        '–æ–ø–∏—Å–∞–Ω–∏–µ': '–ü—Ä–∏ —É–≥–ª–∞—Ö –Ω–∞–∫–ª–æ–Ω–∞ 60¬∞ –∏ –±–æ–ª–µ–µ —Å–Ω–µ–≥ –Ω–µ –∑–∞–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –Ω–∞ –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–∏ —Å–æ–≥–ª–∞—Å–Ω–æ –ø.–ë.1 –°–ü 20.13330.2016',
                        '–ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ': '–°–Ω–µ–≥–æ–≤–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–µ —É—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è'
                    }
                };
            }
            const mu = 1.0 - (angle - 25) / 35;
            return {
                '–°—Ö–µ–º–∞ 1 (—Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–∞—è)': {
                    '–í—Å—è –ø–ª–æ—â–∞–¥—å': mu.toFixed(2),
                    '–æ–ø–∏—Å–∞–Ω–∏–µ': `–õ–∏–Ω–µ–π–Ω–∞—è –∏–Ω—Ç–µ—Ä–ø–æ–ª—è—Ü–∏—è –º–µ–∂–¥—É 25¬∞ (Œº=1.0) –∏ 60¬∞ (Œº=0.0) —Å–æ–≥–ª–∞—Å–Ω–æ –ø.–ë.1 –°–ü 20.13330.2016. –§–æ—Ä–º—É–ª–∞: Œº = 1.0 - (Œ± - 25¬∞)/35¬∞`,
                    '–ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ': '–û—Å–Ω–æ–≤–Ω–∞—è —Ä–∞—Å—á–µ—Ç–Ω–∞—è —Å—Ö–µ–º–∞ –¥–ª—è —É–≥–ª–æ–≤ –æ—Ç 25¬∞ –¥–æ 60¬∞'
                }
            };
        }

        function calculateMuForPitchedRoof(angle) {
            if (angle <= 25) {
                return {
                    '–°—Ö–µ–º–∞ 1 (—Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–∞—è)': {
                        '–û–±–∞ —Å–∫–∞—Ç–∞': 1.0,
                        '–æ–ø–∏—Å–∞–Ω–∏–µ': '–†–∞–≤–Ω–æ–º–µ—Ä–Ω–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å–Ω–µ–≥–∞ –ø–æ –æ–±–æ–∏–º —Å–∫–∞—Ç–∞–º —Å–æ–≥–ª–∞—Å–Ω–æ –ø.–ë.1 –°–ü 20.13330.2016',
                        '–ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ': '–î–ª—è —Ä–∞—Å—á–µ—Ç–∞ –ø—Ä–æ–≥–∏–±–æ–≤ –∏ —Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–æ –Ω–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤'
                    },
                    '–°—Ö–µ–º–∞ 2 (–Ω–µ—Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–∞—è)': {
                        '–û–¥–∏–Ω —Å–∫–∞—Ç': 1.0,
                        '–î—Ä—É–≥–æ–π —Å–∫–∞—Ç': 0.5,
                        '–æ–ø–∏—Å–∞–Ω–∏–µ': '–ù–µ—Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ - —Å–Ω–µ–≥–æ–æ—Ç–ª–æ–∂–µ–Ω–∏–µ —Å –Ω–∞–≤–µ—Ç—Ä–µ–Ω–Ω–æ–π —Å—Ç–æ—Ä–æ–Ω—ã —Å–æ–≥–ª–∞—Å–Ω–æ –ø.–ë.1 –°–ü 20.13330.2016',
                        '–ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ': '–î–ª—è —Ä–∞—Å—á–µ—Ç–∞ –ø—Ä–æ—á–Ω–æ—Å—Ç–∏ –ø—Ä–∏ –Ω–µ–±–ª–∞–≥–æ–ø—Ä–∏—è—Ç–Ω–æ–º –∑–∞–≥—Ä—É–∂–µ–Ω–∏–∏'
                    }
                };
            }
            if (angle >= 60) {
                return {
                    '–°—Ö–µ–º–∞ 1 (—Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–∞—è)': {
                        '–û–±–∞ —Å–∫–∞—Ç–∞': 0.0,
                        '–æ–ø–∏—Å–∞–Ω–∏–µ': '–°–Ω–µ–≥ –Ω–µ –∑–∞–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –Ω–∞ –∫—Ä—É—Ç—ã—Ö —Å–∫–∞—Ç–∞—Ö —Å–æ–≥–ª–∞—Å–Ω–æ –ø.–ë.1 –°–ü 20.13330.2016',
                        '–ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ': '–°–Ω–µ–≥–æ–≤–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–µ —É—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è'
                    }
                };
            }
            const mu = 1.0 - (angle - 25) / 35;
            return {
                '–°—Ö–µ–º–∞ 1 (—Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–∞—è)': {
                    '–û–±–∞ —Å–∫–∞—Ç–∞': mu.toFixed(2),
                    '–æ–ø–∏—Å–∞–Ω–∏–µ': '–†–∞–≤–Ω–æ–º–µ—Ä–Ω–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ –æ–±–æ–∏–º —Å–∫–∞—Ç–∞–º —Å–æ–≥–ª–∞—Å–Ω–æ –ø.–ë.1 –°–ü 20.13330.2016',
                    '–ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ': '–î–ª—è —Ä–∞—Å—á–µ—Ç–∞ –ø—Ä–æ–≥–∏–±–æ–≤'
                },
                '–°—Ö–µ–º–∞ 2 (–Ω–µ—Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–∞—è)': {
                    '–û–¥–∏–Ω —Å–∫–∞—Ç': (1.5 * mu).toFixed(2),
                    '–î—Ä—É–≥–æ–π —Å–∫–∞—Ç': (0.5 * mu).toFixed(2),
                    '–æ–ø–∏—Å–∞–Ω–∏–µ': '–ù–µ—Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–∞–º–∏ 1.5Œº –∏ 0.5Œº —Å–æ–≥–ª–∞—Å–Ω–æ –ø.–ë.1 –°–ü 20.13330.2016',
                    '–ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ': '–î–ª—è —Ä–∞—Å—á–µ—Ç–∞ –ø—Ä–æ—á–Ω–æ—Å—Ç–∏'
                }
            };
        }

        function calculateMuForMultiSlope(angle) {
            if (angle <= 25) return {
                '–°—Ö–µ–º–∞ 1 (—Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–∞—è)': {
                    '–í—Å–µ —Å–∫–∞—Ç—ã': 1.0,
                    '–æ–ø–∏—Å–∞–Ω–∏–µ': '–†–∞–≤–Ω–æ–º–µ—Ä–Ω–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ –≤—Å–µ–º —Å–∫–∞—Ç–∞–º —Å–æ–≥–ª–∞—Å–Ω–æ –ø.–ë.1 –°–ü 20.13330.2016',
                    '–ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ': '–û—Å–Ω–æ–≤–Ω–∞—è —Ä–∞—Å—á–µ—Ç–Ω–∞—è —Å—Ö–µ–º–∞ –¥–ª—è –º–Ω–æ–≥–æ—Å–∫–∞—Ç–Ω—ã—Ö –∫—Ä—ã—à'
                }
            };
            if (angle >= 60) return {
                '–°—Ö–µ–º–∞ 1 (—Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–∞—è)': {
                    '–í—Å–µ —Å–∫–∞—Ç—ã': 0.0,
                    '–æ–ø–∏—Å–∞–Ω–∏–µ': '–°–Ω–µ–≥ –Ω–µ –∑–∞–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –Ω–∞ –∫—Ä—É—Ç—ã—Ö —Å–∫–∞—Ç–∞—Ö —Å–æ–≥–ª–∞—Å–Ω–æ –ø.–ë.1 –°–ü 20.13330.2016',
                    '–ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ': '–°–Ω–µ–≥–æ–≤–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–µ —É—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è'
                }
            };
            const mu = 1.0 - (angle - 25) / 35;
            return {
                '–°—Ö–µ–º–∞ 1 (—Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–∞—è)': {
                    '–í—Å–µ —Å–∫–∞—Ç—ã': mu.toFixed(2),
                    '–æ–ø–∏—Å–∞–Ω–∏–µ': '–†–∞–≤–Ω–æ–º–µ—Ä–Ω–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ –≤—Å–µ–º —Å–∫–∞—Ç–∞–º —Å —É—á–µ—Ç–æ–º —É–≥–ª–∞ –Ω–∞–∫–ª–æ–Ω–∞',
                    '–ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ': '–î–ª—è –º–Ω–æ–≥–æ—Å–∫–∞—Ç–Ω—ã—Ö –∫—Ä—ã—à —Å —É–≥–ª–∞–º–∏ –æ—Ç 25¬∞ –¥–æ 60¬∞'
                }
            };
        }

        function calculateMuForArchedRoof(ratio) {
            if (ratio <= 0.1) return {
                '–°—Ö–µ–º–∞ 1 (—Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–∞—è)': {
                    '–í—Å—è –ø–ª–æ—â–∞–¥—å': 1.0,
                    '–æ–ø–∏—Å–∞–Ω–∏–µ': '–î–ª—è –ø–æ–ª–æ–≥–∏—Ö –∞—Ä–æ–∫ (f/l ‚â§ 0.1) –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è —Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å–æ–≥–ª–∞—Å–Ω–æ –ø.–ë.2 –°–ü 20.13330.2016',
                    '–ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ': '–û—Å–Ω–æ–≤–Ω–∞—è —Å—Ö–µ–º–∞ –¥–ª—è –ø–æ–ª–æ–≥–∏—Ö –∞—Ä–æ–∫'
                }
            };
            if (ratio >= 0.4) return {
                '–°—Ö–µ–º–∞ 1 (—Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–∞—è)': {
                    '–í—Å—è –ø–ª–æ—â–∞–¥—å': 0.0,
                    '–æ–ø–∏—Å–∞–Ω–∏–µ': '–î–ª—è –∫—Ä—É—Ç—ã—Ö –∞—Ä–æ–∫ (f/l ‚â• 0.4) —Å–Ω–µ–≥ –Ω–µ –∑–∞–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è —Å–æ–≥–ª–∞—Å–Ω–æ –ø.–ë.2 –°–ü 20.13330.2016',
                    '–ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ': '–°–Ω–µ–≥–æ–≤–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–µ —É—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è'
                }
            };
            const mu = 1.0 - (ratio - 0.1) / 0.3;
            return {
                '–°—Ö–µ–º–∞ 1 (—Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–∞—è)': {
                    '–í—Å—è –ø–ª–æ—â–∞–¥—å': mu.toFixed(2),
                    '–æ–ø–∏—Å–∞–Ω–∏–µ': `–õ–∏–Ω–µ–π–Ω–∞—è –∏–Ω—Ç–µ—Ä–ø–æ–ª—è—Ü–∏—è –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Å—Ç—Ä–µ–ª—ã –ø–æ–¥—ä–µ–º–∞ f/l —Å–æ–≥–ª–∞—Å–Ω–æ –ø.–ë.2 –°–ü 20.13330.2016. –§–æ—Ä–º—É–ª–∞: Œº = 1.0 - (f/l - 0.1)/0.3`,
                    '–ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ': '–î–ª—è –∞—Ä–æ—á–Ω—ã—Ö –ø–æ–∫—Ä—ã—Ç–∏–π —Å–æ —Å—Ç—Ä–µ–ª–æ–π –ø–æ–¥—ä–µ–º–∞ –æ—Ç 0.1 –¥–æ 0.4'
                }
            };
        }

        function calculateMuForCylindricalRoof(angle) {
            if (angle <= 25) return {
                '–°—Ö–µ–º–∞ 1 (—Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–∞—è)': {
                    '–í—Å—è –ø–ª–æ—â–∞–¥—å': 1.0,
                    '–æ–ø–∏—Å–∞–Ω–∏–µ': '–î–ª—è —Ü–∏–ª–∏–Ω–¥—Ä–∏—á–µ—Å–∫–∏—Ö –ø–æ–∫—Ä—ã—Ç–∏–π —Å —É–≥–ª–æ–º –Ω–∞–∫–ª–æ–Ω–∞ –¥–æ 25¬∞ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è —Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å–æ–≥–ª–∞—Å–Ω–æ –ø.–ë.10 –°–ü 20.13330.2016',
                    '–ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ': '–û—Å–Ω–æ–≤–Ω–∞—è —Å—Ö–µ–º–∞ –¥–ª—è –ø–æ–ª–æ–≥–∏—Ö —Ü–∏–ª–∏–Ω–¥—Ä–∏—á–µ—Å–∫–∏—Ö –ø–æ–∫—Ä—ã—Ç–∏–π'
                }
            };
            if (angle >= 60) return {
                '–°—Ö–µ–º–∞ 1 (—Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–∞—è)': {
                    '–í—Å—è –ø–ª–æ—â–∞–¥—å': 0.0,
                    '–æ–ø–∏—Å–∞–Ω–∏–µ': '–î–ª—è –∫—Ä—É—Ç—ã—Ö —Ü–∏–ª–∏–Ω–¥—Ä–∏—á–µ—Å–∫–∏—Ö –ø–æ–∫—Ä—ã—Ç–∏–π (—É–≥–æ–ª ‚â• 60¬∞) —Å–Ω–µ–≥ –Ω–µ –∑–∞–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è —Å–æ–≥–ª–∞—Å–Ω–æ –ø.–ë.10 –°–ü 20.13330.2016',
                    '–ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ': '–°–Ω–µ–≥–æ–≤–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–µ —É—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è'
                }
            };
            const mu = 1.0 - (angle - 25) / 35;
            return {
                '–°—Ö–µ–º–∞ 1 (—Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–∞—è)': {
                    '–í—Å—è –ø–ª–æ—â–∞–¥—å': mu.toFixed(2),
                    '–æ–ø–∏—Å–∞–Ω–∏–µ': `–õ–∏–Ω–µ–π–Ω–∞—è –∏–Ω—Ç–µ—Ä–ø–æ–ª—è—Ü–∏—è –¥–ª—è —Ü–∏–ª–∏–Ω–¥—Ä–∏—á–µ—Å–∫–∏—Ö –ø–æ–∫—Ä—ã—Ç–∏–π —Å–æ–≥–ª–∞—Å–Ω–æ –ø.–ë.10 –°–ü 20.13330.2016. –§–æ—Ä–º—É–ª–∞: Œº = 1.0 - (Œ± - 25¬∞)/35¬∞`,
                    '–ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ': '–î–ª—è —Ü–∏–ª–∏–Ω–¥—Ä–∏—á–µ—Å–∫–∏—Ö –ø–æ–∫—Ä—ã—Ç–∏–π —Å —É–≥–ª–∞–º–∏ –æ—Ç 25¬∞ –¥–æ 60¬∞'
                }
            };
        }

        function calculateMuForDomeRoof(ratio) {
            if (ratio <= 0.1) return {
                '–°—Ö–µ–º–∞ 1 (—Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–∞—è)': {
                    '–í—Å—è –ø–ª–æ—â–∞–¥—å': 1.0,
                    '–æ–ø–∏—Å–∞–Ω–∏–µ': '–î–ª—è –ø–æ–ª–æ–≥–∏—Ö –∫—É–ø–æ–ª–æ–≤ (f/d ‚â§ 0.1) –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è —Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å–æ–≥–ª–∞—Å–Ω–æ –ø.–ë.11 –°–ü 20.13330.2016',
                    '–ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ': '–û—Å–Ω–æ–≤–Ω–∞—è —Å—Ö–µ–º–∞ –¥–ª—è –ø–æ–ª–æ–≥–∏—Ö –∫—É–ø–æ–ª—å–Ω—ã—Ö –ø–æ–∫—Ä—ã—Ç–∏–π'
                }
            };
            if (ratio >= 0.4) return {
                '–°—Ö–µ–º–∞ 1 (—Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–∞—è)': {
                    '–í—Å—è –ø–ª–æ—â–∞–¥—å': 0.0,
                    '–æ–ø–∏—Å–∞–Ω–∏–µ': '–î–ª—è –∫—Ä—É—Ç—ã—Ö –∫—É–ø–æ–ª–æ–≤ (f/d ‚â• 0.4) —Å–Ω–µ–≥ –Ω–µ –∑–∞–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è —Å–æ–≥–ª–∞—Å–Ω–æ –ø.–ë.11 –°–ü 20.13330.2016',
                    '–ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ': '–°–Ω–µ–≥–æ–≤–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–µ —É—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è'
                }
            };
            const mu = 1.0 - (ratio - 0.1) / 0.3;
            return {
                '–°—Ö–µ–º–∞ 1 (—Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–∞—è)': {
                    '–í—Å—è –ø–ª–æ—â–∞–¥—å': mu.toFixed(2),
                    '–æ–ø–∏—Å–∞–Ω–∏–µ': `–õ–∏–Ω–µ–π–Ω–∞—è –∏–Ω—Ç–µ—Ä–ø–æ–ª—è—Ü–∏—è –¥–ª—è –∫—É–ø–æ–ª—å–Ω—ã—Ö –ø–æ–∫—Ä—ã—Ç–∏–π —Å–æ–≥–ª–∞—Å–Ω–æ –ø.–ë.11 –°–ü 20.13330.2016. –§–æ—Ä–º—É–ª–∞: Œº = 1.0 - (f/d - 0.1)/0.3`,
                    '–ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ': '–î–ª—è –∫—É–ø–æ–ª—å–Ω—ã—Ö –ø–æ–∫—Ä—ã—Ç–∏–π —Å–æ —Å—Ç—Ä–µ–ª–æ–π –ø–æ–¥—ä–µ–º–∞ –æ—Ç 0.1 –¥–æ 0.4'
                }
            };
        }

        function calculateMuForConeRoof(angle) {
            if (angle <= 25) return {
                '–°—Ö–µ–º–∞ 1 (—Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–∞—è)': {
                    '–í—Å—è –ø–ª–æ—â–∞–¥—å': 1.0,
                    '–æ–ø–∏—Å–∞–Ω–∏–µ': '–î–ª—è –∫–æ–Ω–∏—á–µ—Å–∫–∏—Ö –ø–æ–∫—Ä—ã—Ç–∏–π —Å —É–≥–ª–æ–º –Ω–∞–∫–ª–æ–Ω–∞ –¥–æ 25¬∞ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è —Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å–æ–≥–ª–∞—Å–Ω–æ –ø.–ë.12 –°–ü 20.13330.2016',
                    '–ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ': '–û—Å–Ω–æ–≤–Ω–∞—è —Å—Ö–µ–º–∞ –¥–ª—è –ø–æ–ª–æ–≥–∏—Ö –∫–æ–Ω–∏—á–µ—Å–∫–∏—Ö –ø–æ–∫—Ä—ã—Ç–∏–π'
                }
            };
            if (angle >= 60) return {
                '–°—Ö–µ–º–∞ 1 (—Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–∞—è)': {
                    '–í—Å—è –ø–ª–æ—â–∞–¥—å': 0.0,
                    '–æ–ø–∏—Å–∞–Ω–∏–µ': '–î–ª—è –∫—Ä—É—Ç—ã—Ö –∫–æ–Ω–∏—á–µ—Å–∫–∏—Ö –ø–æ–∫—Ä—ã—Ç–∏–π (—É–≥–æ–ª ‚â• 60¬∞) —Å–Ω–µ–≥ –Ω–µ –∑–∞–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è —Å–æ–≥–ª–∞—Å–Ω–æ –ø.–ë.12 –°–ü 20.13330.2016',
                    '–ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ': '–°–Ω–µ–≥–æ–≤–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–µ —É—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è'
                }
            };
            const mu = 1.0 - (angle - 25) / 35;
            return {
                '–°—Ö–µ–º–∞ 1 (—Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–∞—è)': {
                    '–í—Å—è –ø–ª–æ—â–∞–¥—å': mu.toFixed(2),
                    '–æ–ø–∏—Å–∞–Ω–∏–µ': `–õ–∏–Ω–µ–π–Ω–∞—è –∏–Ω—Ç–µ—Ä–ø–æ–ª—è—Ü–∏—è –¥–ª—è –∫–æ–Ω–∏—á–µ—Å–∫–∏—Ö –ø–æ–∫—Ä—ã—Ç–∏–π —Å–æ–≥–ª–∞—Å–Ω–æ –ø.–ë.12 –°–ü 20.13330.2016. –§–æ—Ä–º—É–ª–∞: Œº = 1.0 - (Œ± - 25¬∞)/35¬∞`,
                    '–ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ': '–î–ª—è –∫–æ–Ω–∏—á–µ—Å–∫–∏—Ö –ø–æ–∫—Ä—ã—Ç–∏–π —Å —É–≥–ª–∞–º–∏ –æ—Ç 25¬∞ –¥–æ 60¬∞'
                }
            };
        }

        function calculateMuForHeightDrop(h, l1, l2) {
            const m = Math.min(2 * h, 8);
            const mu1 = Math.min(m, 4);
            const mu2 = Math.min(m / 1.4, 4);
            
            return {
                '–°—Ö–µ–º–∞ 1 (—Å–Ω–µ–≥–æ–≤–æ–π –º–µ—à–æ–∫)': {
                    '–í–µ—Ä—Ö–Ω–µ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ (–∑–æ–Ω–∞ –º–µ—à–∫–∞)': mu1.toFixed(2),
                    '–ù–∏–∂–Ω–µ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ': mu2.toFixed(2),
                    '–û—Å—Ç–∞–ª—å–Ω–∞—è –ø–ª–æ—â–∞–¥—å': '1.0',
                    '–æ–ø–∏—Å–∞–Ω–∏–µ': `–û–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ —Å–Ω–µ–≥–æ–≤–æ–≥–æ –º–µ—à–∫–∞ —É –ø–µ—Ä–µ–ø–∞–¥–∞ –≤—ã—Å–æ—Ç —Å–æ–≥–ª–∞—Å–Ω–æ –ø.–ë.8 –°–ü 20.13330.2016. –†–∞—Å—á–µ—Ç: m = min(2h, 8) = ${m}, Œº‚ÇÅ = min(m, 4) = ${mu1}, Œº‚ÇÇ = min(m/1.4, 4) = ${mu2.toFixed(2)}`,
                    '–ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ': '–î–ª—è —Ä–∞—Å—á–µ—Ç–∞ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –≤ –∑–æ–Ω–µ –ø–µ—Ä–µ–ø–∞–¥–∞ –≤—ã—Å–æ—Ç'
                }
            };
        }

        function calculateMuForSnowBags(width, length) {
            const area = width * length;
            let mu = 1.0;
            if (area > 50) mu = 1.5;
            else if (area > 20) mu = 2.0;
            else mu = 3.0;
            
            return {
                '–°—Ö–µ–º–∞ 1 (—Å–Ω–µ–≥–æ–≤–æ–π –º–µ—à–æ–∫)': {
                    '–ó–æ–Ω–∞ —Å–Ω–µ–≥–æ–≤–æ–≥–æ –º–µ—à–∫–∞': mu.toFixed(2),
                    '–û—Å—Ç–∞–ª—å–Ω–∞—è –ø–ª–æ—â–∞–¥—å': '1.0',
                    '–æ–ø–∏—Å–∞–Ω–∏–µ': `–û–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ —Å–Ω–µ–≥–æ–≤–æ–≥–æ –º–µ—à–∫–∞ –≤ –º–µ—Å—Ç–∞—Ö —Å –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏—è–º–∏ –¥–ª—è —Å–Ω–æ—Å–∞ —Å–Ω–µ–≥–∞ —Å–æ–≥–ª–∞—Å–Ω–æ –ø.–ë.9 –°–ü 20.13330.2016. –ü–ª–æ—â–∞–¥—å –º–µ—à–∫–∞: ${area} –º¬≤`,
                    '–ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ': '–î–ª—è —Ä–∞—Å—á–µ—Ç–∞ –∑–æ–Ω —Å –≤–æ–∑–º–æ–∂–Ω—ã–º –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ–º —Å–Ω–µ–≥–æ–≤—ã—Ö –º–µ—à–∫–æ–≤'
                }
            };
        }

        function displayMuSchemes(muResults) {
            const container = document.getElementById('muSchemesContainer');
            let html = '<div class="mu-scheme"><h4>üìê –°—Ö–µ–º—ã —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è Œº:</h4>';
            
            Object.keys(muResults).forEach(scheme => {
                const schemeData = muResults[scheme];
                html += `<div class="scheme-description">`;
                html += `<h5>${scheme}</h5>`;
                html += `<p><strong>üìù –û–ø–∏—Å–∞–Ω–∏–µ:</strong> ${schemeData.–æ–ø–∏—Å–∞–Ω–∏–µ}</p>`;
                html += `<p><strong>üéØ –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ:</strong> ${schemeData.–ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ}</p>`;
                html += `<div class="zone-calculation">`;
                
                Object.keys(schemeData).forEach(key => {
                    if (!['–æ–ø–∏—Å–∞–Ω–∏–µ', '–ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ'].includes(key)) {
                        html += `<div class="mu-zone"><strong>${key}:</strong> Œº = ${schemeData[key]}</div>`;
                    }
                });
                
                html += `</div></div>`;
            });
            
            html += '</div>';
            container.innerHTML = html;
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –æ–±—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ Œº (–±–µ—Ä–µ–º –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ)
            let maxMu = 0;
            Object.keys(muResults).forEach(scheme => {
                const schemeData = muResults[scheme];
                Object.keys(schemeData).forEach(key => {
                    if (!['–æ–ø–∏—Å–∞–Ω–∏–µ', '–ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ'].includes(key)) {
                        const muValue = parseFloat(schemeData[key]) || 0;
                        if (muValue > maxMu) maxMu = muValue;
                    }
                });
            });
            document.getElementById('muValue').textContent = `–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ Œº = ${maxMu.toFixed(2)}`;
        }

        function calculateSnowHeight(snowLoad) {
            const minHeight = (snowLoad / 8).toFixed(2);
            const maxHeight = (snowLoad / 3).toFixed(2);
            return { min: minHeight, max: maxHeight };
        }

        function updateCalculations() {
            // –û–±–Ω–æ–≤–ª—è–µ–º —Ä–∞—Å—á–µ—Ç—ã –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
        }

        // –û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è —Ä–∞—Å—á–µ—Ç–∞
        function calculate() {
            let Sg, Ce, Ct;
            let SgSource = '', CeSource = '', CtSource = '';
            
            // Sg
            const sgMethod = document.querySelector('input[name="sgMethod"]:checked').value;
            if (sgMethod === 'manual') {
                Sg = parseFloat(document.getElementById('sgManual').value) || 1.8;
                SgSource = '–†—É—á–Ω–æ–π –≤–≤–æ–¥';
            } else {
                if (document.querySelector('input[name="spMethod"]:checked').value === 'city') {
                    const citySelect = document.getElementById('citySelect');
                    const district = citySelect.options[citySelect.selectedIndex].getAttribute('data-district');
                    Sg = sgValues[district] || 1.8;
                    SgSource = `–ü–æ –Ω–∞—Å–µ–ª–µ–Ω–Ω–æ–º—É –ø—É–Ω–∫—Ç—É (${document.getElementById('citySelect').value})`;
                } else {
                    const district = document.getElementById('snowDistrictMap').value;
                    Sg = sgValues[district] || 1.8;
                    SgSource = '–ü–æ –∫–∞—Ä—Ç–µ —Å–Ω–µ–≥–æ–≤—ã—Ö —Ä–∞–π–æ–Ω–æ–≤';
                }
                const customSg = document.getElementById('customSg').value;
                if (customSg) {
                    Sg = parseFloat(customSg);
                    SgSource += ' (—É—Ç–æ—á–Ω–µ–Ω–æ –ø–æ –¥–∞–Ω–Ω—ã–º –†–æ—Å–≥–∏–¥—Ä–æ–º–µ—Ç–∞)';
                }
            }
            
            // Ce
            const ceMethod = document.querySelector('input[name="ceMethod"]:checked').value;
            if (ceMethod === 'manual') {
                Ce = parseFloat(document.getElementById('ceManual').value) || 1.0;
                CeSource = '–†—É—á–Ω–æ–π –≤–≤–æ–¥';
            } else {
                const terrain = document.getElementById('terrainType').value;
                const protected = document.getElementById('protected').checked;
                const dimMin = parseFloat(document.getElementById('dimMin').value) || 50;
                const dimMax = parseFloat(document.getElementById('dimMax').value) || 50;
                const tempSelect = document.getElementById('januaryTemp');
                const warmJan = tempSelect.value === 'warm';
                Ce = calculateCe(terrain, dimMin, dimMax, protected, warmJan);
                CeSource = '–†–∞—Å—á–µ—Ç –ø–æ –°–ü 20.13330.2016';
            }
            
            // Ct
            const ctMethod = document.querySelector('input[name="ctMethod"]:checked').value;
            if (ctMethod === 'manual') {
                Ct = parseFloat(document.getElementById('ctManual').value) || 1.0;
                CtSource = '–†—É—á–Ω–æ–π –≤–≤–æ–¥';
            } else {
                Ct = parseFloat(document.getElementById('ct').value) || 1.0;
                CtSource = '–ü–æ –°–ü 20.13330.2016';
            }
            
            // –ü–æ–ª—É—á–∞–µ–º –≤—Å–µ —Å—Ö–µ–º—ã Œº
            const type = document.getElementById('roofType').value;
            let muResults = {};
            
            if (document.querySelector('input[name="muMethod"]:checked').value === 'manual') {
                const singleMu = parseFloat(document.getElementById('muManual').value) || 1.0;
                muResults = {
                    '–°—Ö–µ–º–∞ 1 (—Ä—É—á–Ω–æ–π –≤–≤–æ–¥)': {
                        '–í—Å—è –ø–ª–æ—â–∞–¥—å': singleMu,
                        '–æ–ø–∏—Å–∞–Ω–∏–µ': '–ó–Ω–∞—á–µ–Ω–∏–µ Œº –∑–∞–¥–∞–Ω–æ –≤—Ä—É—á–Ω—É—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º',
                        '–ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ': '–î–ª—è —Ä–∞—Å—á–µ—Ç–∞ –ø–æ –∑–∞–¥–∞–Ω–Ω–æ–º—É –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—É'
                    }
                };
            } else {
                switch(type) {
                    case 'flat':
                        muResults = calculateMuForFlatRoof();
                        break;
                    case 'single_slope':
                        const angleSingle = parseFloat(document.getElementById('roofAngle').value) || 0;
                        muResults = calculateMuForSingleSlope(angleSingle);
                        break;
                    case 'pitched':
                        const anglePitched = parseFloat(document.getElementById('roofAngle').value) || 0;
                        muResults = calculateMuForPitchedRoof(anglePitched);
                        break;
                    case 'multi_slope':
                        const angleMulti = parseFloat(document.getElementById('roofAngle').value) || 0;
                        muResults = calculateMuForMultiSlope(angleMulti);
                        break;
                    case 'arched':
                        const ratio = parseFloat(document.getElementById('archRatio').value) || 0.1;
                        muResults = calculateMuForArchedRoof(ratio);
                        break;
                    case 'cylindrical':
                        const cylindricalAngle = parseFloat(document.getElementById('cylindricalAngle').value) || 30;
                        muResults = calculateMuForCylindricalRoof(cylindricalAngle);
                        break;
                    case 'dome':
                        const domeRatio = parseFloat(document.getElementById('domeRatio').value) || 0.1;
                        muResults = calculateMuForDomeRoof(domeRatio);
                        break;
                    case 'cone':
                        const coneAngle = parseFloat(document.getElementById('coneAngle').value) || 30;
                        muResults = calculateMuForConeRoof(coneAngle);
                        break;
                    case 'height_drop':
                        const h = parseFloat(document.getElementById('heightDrop').value) || 2;
                        const l1 = parseFloat(document.getElementById('lengthUpper').value) || 10;
                        const l2 = parseFloat(document.getElementById('lengthLower').value) || 10;
                        muResults = calculateMuForHeightDrop(h, l1, l2);
                        break;
                    case 'snow_bags':
                        const width = parseFloat(document.getElementById('snowBagWidth').value) || 5;
                        const length = parseFloat(document.getElementById('snowBagLength').value) || 10;
                        muResults = calculateMuForSnowBags(width, length);
                        break;
                    default:
                        muResults = {
                            '–°—Ö–µ–º–∞ 1 (—Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–∞—è)': {
                                '–û—Å–Ω–æ–≤–Ω–∞—è –∑–æ–Ω–∞': 1.0,
                                '–æ–ø–∏—Å–∞–Ω–∏–µ': '–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é',
                                '–ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ': '–û–±—â–∏–π —Ä–∞—Å—á–µ—Ç'
                            }
                        };
                }
            }
            
            // –†–∞—Å—á–µ—Ç –Ω–∞–≥—Ä—É–∑–æ–∫ –¥–ª—è –≤—Å–µ—Ö —Å—Ö–µ–º –∏ –∑–æ–Ω
            let allLoadResults = [];
            let calculationDetails = '';
            
            Object.keys(muResults).forEach(scheme => {
                const schemeData = muResults[scheme];
                calculationDetails += `<h4>${scheme}</h4>`;
                calculationDetails += `<div class="scheme-description">`;
                calculationDetails += `<p><strong>üìù –û–ø–∏—Å–∞–Ω–∏–µ:</strong> ${schemeData.–æ–ø–∏—Å–∞–Ω–∏–µ}</p>`;
                calculationDetails += `<p><strong>üéØ –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ:</strong> ${schemeData.–ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ}</p>`;
                calculationDetails += `</div>`;
                
                Object.keys(schemeData).forEach(zone => {
                    if (!['–æ–ø–∏—Å–∞–Ω–∏–µ', '–ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ'].includes(zone)) {
                        const mu = parseFloat(schemeData[zone]) || 1.0;
                        const Sn = mu * Ct * Ce * Sg;
                        const Sr = 1.4 * Sn;
                        
                        allLoadResults.push({ scheme, zone, mu, Sn, Sr });
                        
                        calculationDetails += `
                            <div class="zone-calculation">
                                <div class="calculation-formula">
                                    <strong>–†–∞—Å—á–µ—Ç –¥–ª—è –∑–æ–Ω—ã "${zone}":</strong><br>
                                    Œº = ${mu.toFixed(2)}<br>
                                    S_n = Œº √ó Ct √ó Ce √ó Sg = ${mu.toFixed(2)} √ó ${Ct} √ó ${Ce.toFixed(2)} √ó ${Sg} = ${Sn.toFixed(2)} –∫–ü–∞<br>
                                    S_r = 1.4 √ó S_n = 1.4 √ó ${Sn.toFixed(2)} = ${Sr.toFixed(2)} –∫–ü–∞
                                </div>
                                <div class="load-result">
                                    <strong>–†–µ–∑—É–ª—å—Ç–∞—Ç –¥–ª—è ${zone}:</strong><br>
                                    –ù–æ—Ä–º–∞—Ç–∏–≤–Ω–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ S_n = ${Sn.toFixed(2)} –∫–ü–∞<br>
                                    –†–∞—Å—á–µ—Ç–Ω–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ S_r = ${Sr.toFixed(2)} –∫–ü–∞
                                </div>
                            </div>
                        `;
                    }
                });
            });
            
            // –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≤—ã—Å–æ—Ç–µ —Å–Ω–µ–≥–∞
            const maxSn = Math.max(...allLoadResults.map(r => r.Sn));
            const snowHeight = calculateSnowHeight(maxSn);
            
            // –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–µ –¥–ª—è –æ—Ç—á–µ—Ç–∞
            const tempSelect = document.getElementById('januaryTemp');
            let temperatureInfo = '';
            if (tempSelect.value === 'cold') {
                temperatureInfo = `–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ —è–Ω–≤–∞—Ä—è: ‚â§ -5¬∞C (—Ö–æ–ª–æ–¥–Ω–∞—è –∑–∏–º–∞)${currentCity ? ` - ${currentCity}` : ''}`;
            } else if (tempSelect.value === 'warm') {
                temperatureInfo = `–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ —è–Ω–≤–∞—Ä—è: > -5¬∞C (—Ç–µ–ø–ª–∞—è –∑–∏–º–∞)${currentCity ? ` - ${currentCity}` : ''}`;
            } else {
                temperatureInfo = '–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ —è–Ω–≤–∞—Ä—è: –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞';
            }
            
            let reduced = '';
            const reducedLoadChecked = document.getElementById('reducedLoad').checked;
            if (reducedLoadChecked && tempSelect.value === 'cold') {
                const SnRed = 0.5 * Sg;
                reduced = `
                    <h3>üìâ –ü–æ–Ω–∏–∂–µ–Ω–Ω–∞—è –Ω–æ—Ä–º–∞—Ç–∏–≤–Ω–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ (–ø.10.11)</h3>
                    <div class="calculation-formula">
                        S_n_red = 0.5 √ó S_g = 0.5 √ó ${Sg} = ${SnRed.toFixed(2)} –∫–ü–∞
                    </div>
                    <div class="scheme-usage">
                        <strong>üéØ –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –ø–æ–Ω–∏–∂–µ–Ω–Ω–æ–π –Ω–∞–≥—Ä—É–∑–∫–∏:</strong><br>
                        ‚Ä¢ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¢–û–õ–¨–ö–û –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ –¥–µ—Ñ–æ—Ä–º–∞—Ü–∏–π –∏ –ø—Ä–æ–≥–∏–±–æ–≤<br>
                        ‚Ä¢ –ù–ï –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ –ø—Ä–æ—á–Ω–æ—Å—Ç–∏<br>
                        ‚Ä¢ –ü—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ —Ö–æ–ª–æ–¥–Ω—ã—Ö —Ä–µ–≥–∏–æ–Ω–∞—Ö (t_—è–Ω–≤ ‚â§ -5¬∞C)<br>
                        ‚Ä¢ –î–ª—è —Ä–∞—Å—á–µ—Ç–∞ –ø—Ä–æ—á–Ω–æ—Å—Ç–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–æ–ª–Ω—É—é –Ω–æ—Ä–º–∞—Ç–∏–≤–Ω—É—é –Ω–∞–≥—Ä—É–∑–∫—É –∏–∑ —Ç–∞–±–ª–∏—Ü—ã –≤—ã—à–µ
                    </div>
                `;
            } else if (reducedLoadChecked && tempSelect.value === 'warm') {
                reduced = '<div class="warning"><p>‚ùå –ü–æ–Ω–∏–∂–µ–Ω–Ω–∞—è —Å–Ω–µ–≥–æ–≤–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–µ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –¥–ª—è —Ç–µ–ø–ª—ã—Ö —Ä–µ–≥–∏–æ–Ω–æ–≤ (t_—è–Ω–≤ > -5¬∞C) –ø–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏!</p></div>';
            }

            const report = `
                <h3>üìù –ò—Å—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:</h3>
                <table>
                    <tr><th>–ü–∞—Ä–∞–º–µ—Ç—Ä</th><th>–ó–Ω–∞—á–µ–Ω–∏–µ</th><th>–ú–µ—Ç–æ–¥ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è</th></tr>
                    <tr><td>–ù–æ—Ä–º–∞—Ç–∏–≤–Ω–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ Sg</td><td>${Sg} –∫–ü–∞</td><td>${SgSource}</td></tr>
                    <tr><td>–ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –≤–µ—Ç—Ä–∞ Ce</td><td>${Ce.toFixed(2)}</td><td>${CeSource}</td></tr>
                    <tr><td>–¢–µ—Ä–º–∏—á–µ—Å–∫–∏–π –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç Ct</td><td>${Ct}</td><td>${CtSource}</td></tr>
                    <tr><td>–¢–∏–ø –ø–æ–∫—Ä—ã—Ç–∏—è</td><td>${document.getElementById('roofType').options[document.getElementById('roofType').selectedIndex].text}</td><td>-</td></tr>
                    <tr><td>${temperatureInfo}</td><td></td><td></td></tr>
                </table>

                <div class="snow-height-info">
                    <strong>üìè –°–ø—Ä–∞–≤–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:</strong> –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –Ω–æ—Ä–º–∞—Ç–∏–≤–Ω–∞—è —Å–Ω–µ–≥–æ–≤–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ ${maxSn.toFixed(2)} –∫–ü–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –≤—ã—Å–æ—Ç–µ —Å–Ω–µ–∂–Ω–æ–≥–æ –ø–æ–∫—Ä–æ–≤–∞ 
                    –æ—Ç ${snowHeight.min} –º –¥–æ ${snowHeight.max} –º (–ø—Ä–∏ –ø–ª–æ—Ç–Ω–æ—Å—Ç–∏ —Å–Ω–µ–≥–∞ 0.3-0.8 —Ç/–º¬≥)
                </div>

                <h3>üßÆ –î–µ—Ç–∞–ª—å–Ω—ã–π —Ä–∞—Å—á–µ—Ç –ø–æ —Å—Ö–µ–º–∞–º –∏ –∑–æ–Ω–∞–º:</h3>
                ${calculationDetails}

                <h3>üìä –°–≤–æ–¥–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤:</h3>
                <table>
                    <tr><th>–°—Ö–µ–º–∞</th><th>–ó–æ–Ω–∞</th><th>Œº</th><th>–ù–æ—Ä–º–∞—Ç–∏–≤–Ω–∞—è S_n, –∫–ü–∞</th><th>–†–∞—Å—á–µ—Ç–Ω–∞—è S_r, –∫–ü–∞</th><th>–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ</th></tr>
                    ${allLoadResults.map(result => `
                        <tr>
                            <td>${result.scheme}</td>
                            <td>${result.zone}</td>
                            <td>${result.mu.toFixed(2)}</td>
                            <td>${result.Sn.toFixed(2)}</td>
                            <td><strong>${result.Sr.toFixed(2)}</strong></td>
                            <td>${muResults[result.scheme].–ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ}</td>
                        </tr>
                    `).join('')}
                </table>

                ${reduced}

                <div class="note">
                    <p><strong>üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—é —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤:</strong></p>
                    <p>‚Ä¢ <strong>–î–ª—è —Ä–∞—Å—á–µ—Ç–∞ –ü–†–û–ß–ù–û–°–¢–ò</strong> –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ú–ê–ö–°–ò–ú–ê–õ–¨–ù–û–ï –∑–Ω–∞—á–µ–Ω–∏–µ —Ä–∞—Å—á–µ—Ç–Ω–æ–π –Ω–∞–≥—Ä—É–∑–∫–∏ S_r –∏–∑ —Ç–∞–±–ª–∏—Ü—ã</p>
                    <p>‚Ä¢ <strong>–î–ª—è —Ä–∞—Å—á–µ—Ç–∞ –î–ï–§–û–†–ú–ê–¶–ò–ô</strong> –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –Ω–æ—Ä–º–∞—Ç–∏–≤–Ω—É—é –Ω–∞–≥—Ä—É–∑–∫—É S_n —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–π –∑–æ–Ω—ã</p>
                    <p>‚Ä¢ <strong>–î–ª—è —Å–ª–æ–∂–Ω—ã—Ö –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–π</strong> –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ –∫–∞–∂–¥—É—é –∑–æ–Ω—É –æ—Ç–¥–µ–ª—å–Ω–æ –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ —Ä–∞–∑–Ω—ã—Ö –Ω–∞–≥—Ä—É–∑–æ–∫</p>
                    <p>‚Ä¢ <strong>–î–ª—è –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã—Ö –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–π</strong> –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–≤–∞–ª–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–º —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–º</p>
                    <p>‚Ä¢ <strong>–ü—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Å—Ö–µ–º</strong> —Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞–π—Ç–µ –∫–∞–∂–¥—É—é –∫–∞–∫ –æ—Ç–¥–µ–ª—å–Ω–æ–µ –∑–∞–≥—Ä—É–∂–µ–Ω–∏–µ</p>
                </div>

                <div class="warning">
                    <p><strong>‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è:</strong></p>
                    <p>‚Ä¢ –î–∞–Ω–Ω—ã–π —Ä–∞—Å—á–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å –°–ü 20.13330.2016</p>
                    <p>‚Ä¢ –î–ª—è –æ–∫–æ–Ω—á–∞—Ç–µ–ª—å–Ω–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–µ–æ–±—Ö–æ–¥–∏–º —É—á–µ—Ç –≤—Å–µ—Ö —Ñ–∞–∫—Ç–æ—Ä–æ–≤</p>
                    <p>‚Ä¢ –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è —Å –∫–≤–∞–ª–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤—â–∏–∫–æ–º</p>
                    <p>‚Ä¢ –ù–µ—Å—É—â–∞—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–π –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –ø—Ä–æ–≤–µ—Ä–µ–Ω–∞ –Ω–∞ –≤—Å–µ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ –Ω–∞–≥—Ä—É–∑–æ–∫</p>
                </div>
            `;
            
            document.getElementById('reportContent').innerHTML = report;
            document.getElementById('report').style.display = 'block';
            document.getElementById('report').scrollIntoView({ behavior: 'smooth' });
        }

        // –§—É–Ω–∫—Ü–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∫–∞–∫ PDF
        function saveAsPDF() {
            window.print();
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        toggleSgMethod();
        toggleCeMethod();
        toggleCtMethod();
        toggleMuMethod();
        showSpMethod('city');
        showParams();
        updateTemperatureInfo();
    </script>
</body>
</html>
