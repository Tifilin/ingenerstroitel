<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–†–∞—Å—á—ë—Ç —Å–Ω–µ–≥–æ–≤–æ–π –Ω–∞–≥—Ä—É–∑–∫–∏ –ø–æ –°–ü 20.13330.2016 —Å —É—á—ë—Ç–æ–º –≥–æ—Ä–Ω—ã—Ö —Ä–∞–π–æ–Ω–æ–≤</title>
    <style>
        body { 
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
            margin: 15px; 
            line-height: 1.4;
            color: #333;
            max-width: 1200px;
            margin-left: auto;
            margin-right: auto;
            font-size: 14px;
        }
        .steps-container {
            position: relative;
        }
        .step { 
            margin-bottom: 20px; 
            padding: 15px; 
            border: 1px solid #ddd; 
            border-radius: 6px;
            background: #fff;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            display: none;
        }
        .step.active {
            display: block;
        }
        .step h2 { 
            color: #2c3e50; 
            margin-top: 0;
            border-bottom: 1px solid #3498db;
            padding-bottom: 8px;
            font-size: 18px;
        }
        img { 
            max-width: 100%; 
            height: auto; 
            display: block; 
            margin: 10px auto;
            border: 1px solid #ddd;
            border-radius: 3px;
        }
        select, input { 
            padding: 6px 8px; 
            margin: 5px 3px; 
            border: 1px solid #ddd;
            border-radius: 3px;
            font-size: 13px;
        }
        button { 
            padding: 8px 16px; 
            background: #3498db; 
            color: white; 
            border: none; 
            border-radius: 4px; 
            cursor: pointer;
            font-size: 13px;
            font-weight: bold;
            transition: background 0.3s;
        }
        button:hover { 
            background: #2980b9; 
        }
        #report { 
            display: none; 
            margin-top: 20px; 
            padding: 15px; 
            background: #f8f9fa; 
            border-radius: 6px;
            border-left: 3px solid #3498db;
        }
        table { 
            border-collapse: collapse; 
            width: 100%; 
            margin: 10px 0; 
            background: white;
            font-size: 13px;
        }
        th, td { 
            border: 1px solid #ddd; 
            padding: 8px; 
            text-align: left; 
        }
        th { 
            background-color: #f2f2f2; 
            font-weight: bold;
        }
        #roofImage { 
            max-width: 400px; 
        }
        .italic { 
            font-style: italic; 
            font-weight: normal; 
            color: #7f8c8d;
            font-size: 12px;
        }
        #snowMap, #sp131Table { 
            display: none; 
        }
        #ceValue, #muValue { 
            font-weight: bold; 
            color: #e74c3c; 
            font-size: 14px;
        }
        .terrain-type { 
            display: block; 
            margin-bottom: 5px; 
            padding: 6px;
            background: #f8f9fa;
            border-radius: 3px;
            font-size: 13px;
        }
        .method-label { 
            display: block; 
            margin-bottom: 6px; 
            padding: 6px;
            cursor: pointer;
            font-size: 13px;
        }
        .method-label input {
            margin-right: 6px;
        }
        #sgDisplay { 
            font-weight: bold; 
            color: #2ecc71; 
            font-size: 14px;
        }
        .zone-table {
            margin: 10px 0;
            background: #ecf0f1;
            padding: 10px;
            border-radius: 4px;
        }
        .scheme-toggle {
            margin: 8px 0;
        }
        .scheme-toggle button {
            padding: 6px 12px;
            margin-right: 8px;
            background: #95a5a6;
            font-size: 12px;
        }
        .scheme-toggle button.active {
            background: #3498db;
        }
        .calculation-formula {
            background: #2c3e50;
            color: white;
            padding: 10px;
            border-radius: 4px;
            margin: 10px 0;
            font-family: 'Courier New', monospace;
            font-size: 12px;
        }
        .note {
            background: #fff3cd;
            border-left: 3px solid #ffc107;
            padding: 8px;
            margin: 10px 0;
            border-radius: 3px;
            font-size: 12px;
        }
        .warning {
            background: #f8d7da;
            border-left: 3px solid #dc3545;
            padding: 8px;
            margin: 10px 0;
            border-radius: 3px;
            font-size: 12px;
        }
        .info {
            background: #d1ecf1;
            border-left: 3px solid #17a2b8;
            padding: 8px;
            margin: 10px 0;
            border-radius: 3px;
            font-size: 12px;
        }
        .algorithm {
            background: #d1ecf1;
            border-left: 3px solid #17a2b8;
            padding: 15px;
            margin: 20px 0;
            border-radius: 4px;
            font-size: 13px;
        }
        .roof-scheme {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin: 15px 0;
        }
        .scheme-diagram {
            flex: 1;
            min-width: 280px;
            background: white;
            padding: 10px;
            border-radius: 4px;
            border: 1px solid #ddd;
        }
        .scheme-values {
            flex: 1;
            min-width: 280px;
        }
        .temperature-control {
            background: #e8f5e8;
            padding: 8px;
            border-radius: 4px;
            margin: 8px 0;
        }
        .calculation-method {
            margin: 8px 0;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        .calculation-method label {
            display: block;
            margin-bottom: 6px;
            font-weight: bold;
            font-size: 13px;
        }
        .sp-calculation {
            display: none;
            margin-top: 12px;
            padding: 12px;
            background: #f8f9fa;
            border-radius: 4px;
        }
        .manual-input {
            margin-top: 12px;
        }
        .city-temperature {
            background: #e8f5e8;
            padding: 8px;
            border-radius: 4px;
            margin: 8px 0;
        }
        .disclaimer {
            background: #fff3cd;
            border: 1px solid #ffc107;
            padding: 10px;
            border-radius: 4px;
            margin: 15px 0;
            font-size: 12px;
            text-align: center;
        }
        .feedback-link {
            float: right;
            font-size: 12px;
            color: #7f8c8d;
            margin-top: -5px;
        }
        .feedback-link a {
            color: #3498db;
            text-decoration: none;
        }
        .feedback-link a:hover {
            text-decoration: underline;
        }
        .snow-height-info {
            background: #e8f5e8;
            padding: 8px;
            border-radius: 4px;
            margin: 8px 0;
            font-size: 12px;
        }
        .mu-manual-option {
            margin-top: 10px;
            padding: 8px;
            background: #f8f9fa;
            border-radius: 4px;
        }
        .detailed-explanation {
            background: #e8f5e8;
            padding: 10px;
            border-radius: 4px;
            margin: 10px 0;
            font-size: 12px;
        }
        .report-actions {
            margin: 15px 0;
            text-align: center;
        }
        .report-actions button {
            margin: 0 10px;
        }
        .btn-print {
            background: #e74c3c;
        }
        .btn-print:hover {
            background: #c0392b;
        }
        .btn-reset {
            background: #95a5a6;
        }
        .btn-reset:hover {
            background: #7f8c8d;
        }
        .mu-scheme {
            margin: 10px 0;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 4px;
        }
        .mu-zone {
            margin: 5px 0;
            padding: 5px;
            background: white;
            border-radius: 3px;
        }
        .scheme-description {
            background: #e8f5e8;
            padding: 10px;
            border-radius: 4px;
            margin: 10px 0;
            font-size: 12px;
        }
        .zone-calculation {
            background: #f8f9fa;
            padding: 10px;
            border-radius: 4px;
            margin: 5px 0;
        }
        .load-result {
            background: #2c3e50;
            color: white;
            padding: 8px;
            border-radius: 4px;
            margin: 5px 0;
            font-family: 'Courier New', monospace;
        }
        .scheme-usage {
            background: #fff3cd;
            padding: 8px;
            border-radius: 4px;
            margin: 5px 0;
            font-size: 12px;
        }
        .dimension-error {
            background: #f8d7da;
            color: #721c24;
            padding: 8px;
            border-radius: 4px;
            margin: 5px 0;
            border-left: 3px solid #dc3545;
            font-size: 12px;
        }
        .step-navigation {
            margin-top: 20px;
            text-align: center;
            padding-top: 15px;
            border-top: 1px solid #eee;
        }
        .btn-prev {
            background: #95a5a6;
            margin-right: 10px;
        }
        .btn-prev:hover {
            background: #7f8c8d;
        }
        .btn-next {
            background: #3498db;
        }
        .btn-next:hover {
            background: #2980b9;
        }
        .btn-calculate {
            background: #27ae60;
            padding: 12px 24px;
            font-size: 16px;
        }
        .btn-calculate:hover {
            background: #219a52;
        }
        .mountain-control {
            background: #e8f4fd;
            padding: 12px;
            border-radius: 4px;
            margin: 10px 0;
            border-left: 3px solid #3498db;
        }
        .mountain-table {
            margin: 10px 0;
            background: white;
            border-radius: 4px;
            overflow: hidden;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        .mountain-table table {
            margin: 0;
        }
        .mountain-table th {
            background: #3498db;
            color: white;
        }
        .altitude-input {
            background: #f8f9fa;
            padding: 10px;
            border-radius: 4px;
            margin: 10px 0;
        }
        .kb-display {
            background: #2c3e50;
            color: white;
            padding: 8px;
            border-radius: 4px;
            margin: 5px 0;
            font-family: 'Courier New', monospace;
            font-weight: bold;
        }
        @media print {
            body * {
                visibility: hidden;
            }
            #report, #report * {
                visibility: visible;
            }
            #report {
                position: absolute;
                left: 0;
                top: 0;
                width: 100%;
                border: none;
                box-shadow: none;
            }
            .report-actions {
                display: none;
            }
            .step-navigation {
                display: none;
            }
        }
    </style>
</head>
<body>
    <div class="feedback-link">
        –û–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å: <a href="https://dzen.ru/ingenerstroitel" target="_blank">dzen.ru/ingenerstroitel</a>
    </div>
    
    <h1>üèîÔ∏èüßÆ –†–∞—Å—á—ë—Ç —Å–Ω–µ–≥–æ–≤–æ–π –Ω–∞–≥—Ä—É–∑–∫–∏ –ø–æ –°–ü 20.13330.2016 —Å —É—á—ë—Ç–æ–º –≥–æ—Ä–Ω—ã—Ö —Ä–∞–π–æ–Ω–æ–≤</h1>
    
    <div class="disclaimer">
        <strong>–í–Ω–∏–º–∞–Ω–∏–µ:</strong> –î–∞–Ω–Ω—ã–π –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Å–ø—Ä–∞–≤–æ—á–Ω—ã–π —Ä–∞—Å—á—ë—Ç –∏ –±—ã–ª –Ω–∞—Å—Ç—Ä–æ–µ–Ω –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å –Ω–æ—Ä–º–∞–º–∏ –°–ü 20.13330.2016. 
        –°—Ç–æ–∏—Ç –ø—Ä–æ–≤–µ—Ä—è—Ç—å –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç—å –°–ü –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ä–∞—Å—á—ë—Ç–∞.
    </div>

    <div class="steps-container">
        <!-- –®–∞–≥ 1 -->
        <div class="step active" id="step1">
            <h2>üìä –®–∞–≥ 1: –ù–æ—Ä–º–∞—Ç–∏–≤–Ω–∞—è —Å–Ω–µ–≥–æ–≤–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ Sg –∏ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞</h2>
            <p class="italic">Sg, –ø. 10.2; –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –¥–ª—è –ø. 10.11</p>
            
            <div class="calculation-method">
                <label>–°–ø–æ—Å–æ–± –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è Sg:</label>
                <label class="method-label">
                    <input type="radio" name="sgMethod" value="manual" checked onchange="toggleSgMethod()"> 
                    ‚úèÔ∏è –í–≤–µ—Å—Ç–∏ –∑–Ω–∞—á–µ–Ω–∏–µ –≤—Ä—É—á–Ω—É—é
                </label>
                <label class="method-label">
                    <input type="radio" name="sgMethod" value="sp" onchange="toggleSgMethod()"> 
                    üìñ –†–∞—Å—Å—á–∏—Ç–∞—Ç—å –ø–æ –°–ü 20.13330.2016
                </label>
            </div>

            <div id="sgManualInput" class="manual-input">
                <label>–ù–æ—Ä–º–∞—Ç–∏–≤–Ω–∞—è —Å–Ω–µ–≥–æ–≤–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ Sg (–∫–ü–∞): 
                    <input type="number" id="sgManual" step="0.1" value="1.8" min="0">
                </label>
                <p class="note">–£—Ç–æ—á–Ω–µ–Ω–Ω–æ–µ Sg (–ø–æ –¥–∞–Ω–Ω—ã–º –†–æ—Å–≥–∏–¥—Ä–æ–º–µ—Ç–∞, –∫–ü–∞, –µ—Å–ª–∏ –æ–±—ä–µ–∫—Ç –Ω–∞ –≥—Ä–∞–Ω–∏—Ü–µ —Ä–∞–π–æ–Ω–æ–≤ –∏–ª–∏ –≤ —Å–ª–æ–∂–Ω–æ–º —Ä–µ–ª—å–µ—Ñ–µ)</p>
            </div>

            <div id="sgSpCalculation" class="sp-calculation">
                <p><strong>–°–ø–æ—Å–æ–± –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø–æ –°–ü 20.13330.2016:</strong></p>
                <label class="method-label">
                    <input type="radio" name="spMethod" value="city" checked onchange="showSpMethod('city')"> 
                    üèôÔ∏è –ü–æ –Ω–∞—Å–µ–ª–µ–Ω–Ω–æ–º—É –ø—É–Ω–∫—Ç—É
                </label>
                <label class="method-label">
                    <input type="radio" name="spMethod" value="map" onchange="showSpMethod('map')"> 
                    üìç –ü–æ –∫–∞—Ä—Ç–µ —Å–Ω–µ–≥–æ–≤—ã—Ö —Ä–∞–π–æ–Ω–æ–≤
                </label>

                <div id="cityMethod">
                    <label>–ù–∞—Å–µ–ª–µ–Ω–Ω—ã–π –ø—É–Ω–∫—Ç: 
                        <select id="citySelect" onchange="setFromCity()">
                            <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –≥–æ—Ä–æ–¥</option>
                            <option value="–ú–æ—Å–∫–≤–∞" data-temp="-7.7" data-district="III">–ú–æ—Å–∫–≤–∞</option>
                            <option value="–°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥" data-temp="-5.5" data-district="III">–°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥</option>
                            <option value="–ï–∫–∞—Ç–µ—Ä–∏–Ω–±—É—Ä–≥" data-temp="-12.6" data-district="IV">–ï–∫–∞—Ç–µ—Ä–∏–Ω–±—É—Ä–≥</option>
                            <option value="–ù–æ–≤–æ—Å–∏–±–∏—Ä—Å–∫" data-temp="-16.2" data-district="V">–ù–æ–≤–æ—Å–∏–±–∏—Ä—Å–∫</option>
                            <option value="–ù–∏–∂–Ω–∏–π –ù–æ–≤–≥–æ—Ä–æ–¥" data-temp="-8.9" data-district="IV">–ù–∏–∂–Ω–∏–π –ù–æ–≤–≥–æ—Ä–æ–¥</option>
                            <option value="–ö–∞–∑–∞–Ω—å" data-temp="-9.8" data-district="IV">–ö–∞–∑–∞–Ω—å</option>
                            <option value="–°–∞–º–∞—Ä–∞" data-temp="-9.5" data-district="IV">–°–∞–º–∞—Ä–∞</option>
                            <option value="–û–º—Å–∫" data-temp="-16.3" data-district="IV">–û–º—Å–∫</option>
                            <option value="–ß–µ–ª—è–±–∏–Ω—Å–∫" data-temp="-12.8" data-district="IV">–ß–µ–ª—è–±–∏–Ω—Å–∫</option>
                            <option value="–†–æ—Å—Ç–æ–≤-–Ω–∞-–î–æ–Ω—É" data-temp="-3.1" data-district="III">–†–æ—Å—Ç–æ–≤-–Ω–∞-–î–æ–Ω—É</option>
                            <option value="–£—Ñ–∞" data-temp="-12.5" data-district="V">–£—Ñ–∞</option>
                            <option value="–í–æ–ª–≥–æ–≥—Ä–∞–¥" data-temp="-6.7" data-district="III">–í–æ–ª–≥–æ–≥—Ä–∞–¥</option>
                            <option value="–ü–µ—Ä–º—å" data-temp="-12.8" data-district="V">–ü–µ—Ä–º—å</option>
                            <option value="–ö—Ä–∞—Å–Ω–æ—è—Ä—Å–∫" data-temp="-15.6" data-district="IV">–ö—Ä–∞—Å–Ω–æ—è—Ä—Å–∫</option>
                            <option value="–í–æ—Ä–æ–Ω–µ–∂" data-temp="-6.5" data-district="III">–í–æ—Ä–æ–Ω–µ–∂</option>
                            <option value="–°–∞—Ä–∞—Ç–æ–≤" data-temp="-7.9" data-district="III">–°–∞—Ä–∞—Ç–æ–≤</option>
                            <option value="–ö—Ä–∞—Å–Ω–æ–¥–∞—Ä" data-temp="-0.3" data-district="II">–ö—Ä–∞—Å–Ω–æ–¥–∞—Ä</option>
                            <option value="–¢–æ–ª—å—è—Ç—Ç–∏" data-temp="-9.2" data-district="IV">–¢–æ–ª—å—è—Ç—Ç–∏</option>
                            <option value="–ò–∂–µ–≤—Å–∫" data-temp="-12.5" data-district="V">–ò–∂–µ–≤—Å–∫</option>
                            <option value="–ë–∞—Ä–Ω–∞—É–ª" data-temp="-15.5" data-district="IV">–ë–∞—Ä–Ω–∞—É–ª</option>
                            <option value="–£–ª—å—è–Ω–æ–≤—Å–∫" data-temp="-10.1" data-district="IV">–£–ª—å—è–Ω–æ–≤—Å–∫</option>
                            <option value="–ò—Ä–∫—É—Ç—Å–∫" data-temp="-17.8" data-district="II">–ò—Ä–∫—É—Ç—Å–∫</option>
                            <option value="–•–∞–±–∞—Ä–æ–≤—Å–∫" data-temp="-20.9" data-district="II">–•–∞–±–∞—Ä–æ–≤—Å–∫</option>
                            <option value="–Ø—Ä–æ—Å–ª–∞–≤–ª—å" data-temp="-8.9" data-district="IV">–Ø—Ä–æ—Å–ª–∞–≤–ª—å</option>
                            <option value="–í–ª–∞–¥–∏–≤–æ—Å—Ç–æ–∫" data-temp="-9.9" data-district="IV">–í–ª–∞–¥–∏–≤–æ—Å—Ç–æ–∫</option>
                            <option value="–ú–∞—Ö–∞—á–∫–∞–ª–∞" data-temp="1.2" data-district="II">–ú–∞—Ö–∞—á–∫–∞–ª–∞</option>
                            <option value="–¢–æ–º—Å–∫" data-temp="-17.1" data-district="IV">–¢–æ–º—Å–∫</option>
                            <option value="–ö–µ–º–µ—Ä–æ–≤–æ" data-temp="-15.8" data-district="IV">–ö–µ–º–µ—Ä–æ–≤–æ</option>
                            <option value="–ù–æ–≤–æ–∫—É–∑–Ω–µ—Ü–∫" data-temp="-14.2" data-district="IV">–ù–æ–≤–æ–∫—É–∑–Ω–µ—Ü–∫</option>
                            <option value="–°–æ—á–∏" data-temp="5.0" data-district="II">–°–æ—á–∏</option>
                            <option value="–Ø–∫—É—Ç—Å–∫" data-temp="-39.6" data-district="VII">–Ø–∫—É—Ç—Å–∫</option>
                            <option value="–ú—É—Ä–º–∞–Ω—Å–∫" data-temp="-8.1" data-district="V">–ú—É—Ä–º–∞–Ω—Å–∫</option>
                            <option value="–ê—Ä—Ö–∞–Ω–≥–µ–ª—å—Å–∫" data-temp="-12.8" data-district="V">–ê—Ä—Ö–∞–Ω–≥–µ–ª—å—Å–∫</option>
                            <option value="–ö–∞–ª–∏–Ω–∏–Ω–≥—Ä–∞–¥" data-temp="-1.5" data-district="II">–ö–∞–ª–∏–Ω–∏–Ω–≥—Ä–∞–¥</option>
                            <option value="–í–ª–∞–¥–∏–∫–∞–≤–∫–∞–∑" data-temp="-1.2" data-district="II">–í–ª–∞–¥–∏–∫–∞–≤–∫–∞–∑</option>
                            <option value="–ì—Ä–æ–∑–Ω—ã–π" data-temp="-2.1" data-district="II">–ì—Ä–æ–∑–Ω—ã–π</option>
                            <option value="–°—Ç–∞–≤—Ä–æ–ø–æ–ª—å" data-temp="-2.3" data-district="III">–°—Ç–∞–≤—Ä–æ–ø–æ–ª—å</option>
                            <option value="–ü–µ—Ç—Ä–æ–∑–∞–≤–æ–¥—Å–∫" data-temp="-9.0" data-district="IV">–ü–µ—Ç—Ä–æ–∑–∞–≤–æ–¥—Å–∫</option>
                            <option value="–°—ã–∫—Ç—ã–≤–∫–∞—Ä" data-temp="-14.1" data-district="V">–°—ã–∫—Ç—ã–≤–∫–∞—Ä</option>
                            <option value="–ù–∞–ª—å—á–∏–∫" data-temp="-2.5" data-district="II">–ù–∞–ª—å—á–∏–∫</option>
                            <option value="–ß–µ—Ä–∫–µ—Å—Å–∫" data-temp="-2.8" data-district="II">–ß–µ—Ä–∫–µ—Å—Å–∫</option>
                            <option value="–ú–∞–≥–∞—Å" data-temp="-1.8" data-district="II">–ú–∞–≥–∞—Å</option>
                            <option value="–ú–∞–≥–∞–¥–∞–Ω" data-temp="-16.4" data-district="VI">–ú–∞–≥–∞–¥–∞–Ω</option>
                            <option value="–°–∞–ª–µ—Ö–∞—Ä–¥" data-temp="-23.0" data-district="VI">–°–∞–ª–µ—Ö–∞—Ä–¥</option>
                            <option value="–ù–∞—Ä—å—è–Ω-–ú–∞—Ä" data-temp="-16.5" data-district="VI">–ù–∞—Ä—å—è–Ω-–ú–∞—Ä</option>
                            <option value="–ê–Ω–∞–¥—ã—Ä—å" data-temp="-22.1" data-district="VII">–ê–Ω–∞–¥—ã—Ä—å</option>
                            <option value="–ü–µ—Ç—Ä–æ–ø–∞–≤–ª–æ–≤—Å–∫-–ö–∞–º—á–∞—Ç—Å–∫–∏–π" data-temp="-7.6" data-district="VIII">–ü–µ—Ç—Ä–æ–ø–∞–≤–ª–æ–≤—Å–∫-–ö–∞–º—á–∞—Ç—Å–∫–∏–π</option>
                        </select>
                    </label>
                    <p id="sgDisplay">Sg: <span id="sgValue">1.8</span> –∫–ü–∞</p>
                </div>

                <div id="mapMethod" style="display: none;">
                    <label>–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ä—Ç—É: 
                        <select id="mapType" onchange="updateMapSrc()">
                            <option value="main">–û—Å–Ω–æ–≤–Ω–∞—è –†–æ—Å—Å–∏—è</option>
                            <option value="krym">–ö—Ä—ã–º</option>
                            <option value="sakhalin">–°–∞—Ö–∞–ª–∏–Ω</option>
                        </select>
                    </label>
                    <br>
                    <button type="button" id="mapToggleBtn" onclick="toggleMap('snowMap')">üó∫Ô∏è –ü–æ–∫–∞–∑–∞—Ç—å –∫–∞—Ä—Ç—É</button>
                    <img id="snowMap" src="https://saitinpro.ru/wp-content/uploads/2018/03/Karta-1_sneg.gif" alt="–ö–∞—Ä—Ç–∞ —Å–Ω–µ–≥–æ–≤—ã—Ö —Ä–∞–π–æ–Ω–æ–≤ –†–æ—Å—Å–∏–∏ –ø–æ –°–ü 20.13330.2016" style="display: none;">
                    <label>–í—ã–±—Ä–∞–Ω–Ω—ã–π —Å–Ω–µ–≥–æ–≤–æ–π —Ä–∞–π–æ–Ω: 
                        <select id="snowDistrictMap" onchange="updateSgFromMap()">
                            <option value="I">I (0.8 –∫–ü–∞)</option>
                            <option value="II">II (1.2 –∫–ü–∞)</option>
                            <option value="III">III (1.8 –∫–ü–∞)</option>
                            <option value="IV">IV (2.4 –∫–ü–∞)</option>
                            <option value="V">V (3.2 –∫–ü–∞)</option>
                            <option value="VI">VI (4.0 –∫–ü–∞)</option>
                            <option value="VII">VII (5.6 –∫–ü–∞)</option>
                            <option value="VIII">VIII (7.0 –∫–ü–∞)</option>
                        </select>
                    </label>
                </div>

                <div class="note">
                    <label>–£—Ç–æ—á–Ω–µ–Ω–Ω–æ–µ Sg (–ø–æ –¥–∞–Ω–Ω—ã–º –†–æ—Å–≥–∏–¥—Ä–æ–º–µ—Ç–∞, –∫–ü–∞): 
                        <input type="number" id="customSg" step="0.1" placeholder="–û—Å—Ç–∞–≤–∏—Ç—å –ø—É—Å—Ç—ã–º –¥–ª—è —Ç–∞–±–ª–∏—á–Ω–æ–≥–æ">
                    </label>
                    <p class="italic">–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –µ—Å–ª–∏ –æ–±—ä–µ–∫—Ç –Ω–∞ –≥—Ä–∞–Ω–∏—Ü–µ —Ä–∞–π–æ–Ω–æ–≤ –∏–ª–∏ –≤ —Å–ª–æ–∂–Ω–æ–º —Ä–µ–ª—å–µ—Ñ–µ</p>
                </div>
            </div>

            <!-- –ì–æ—Ä–Ω—ã–µ —Ä–∞–π–æ–Ω—ã -->
            <div class="mountain-control">
                <h3>üèîÔ∏è –£—á—ë—Ç –≤—ã—Å–æ—Ç–Ω–æ–≥–æ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–∞ –¥–ª—è –≥–æ—Ä–Ω—ã—Ö —Ä–∞–π–æ–Ω–æ–≤ (–¢–∞–±–ª–∏—Ü–∞ –ñ.1 –°–ü 20.13330.2016)</h3>
                <label class="method-label">
                    <input type="checkbox" id="mountainArea" onchange="toggleMountainArea()">
                    üóª –ü—Ä–∏–º–µ–Ω–∏—Ç—å –≤—ã—Å–æ—Ç–Ω—ã–π –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç k_b –¥–ª—è –≥–æ—Ä–Ω—ã—Ö —Ä–∞–π–æ–Ω–æ–≤
                </label>
                
                <div id="mountainCalculation" style="display: none;">
                    <div class="altitude-input">
                        <label>–í—ã—Å–æ—Ç–∞ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏—è –æ–±—ä–µ–∫—Ç–∞ –Ω–∞–¥ —É—Ä–æ–≤–Ω–µ–º –º–æ—Ä—è H (–º): 
                            <input type="number" id="altitude" min="0" max="5000" value="500" onchange="updateKb()">
                        </label>
                        <p class="italic">–í–≤–µ–¥–∏—Ç–µ –≤—ã—Å–æ—Ç—É —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏—è –æ–±—ä–µ–∫—Ç–∞ –Ω–∞–¥ —É—Ä–æ–≤–Ω–µ–º –º–æ—Ä—è</p>
                    </div>
                    
                    <label>–í—ã–±–µ—Ä–∏—Ç–µ –≥–æ—Ä–Ω—ã–π —Ä–∞–π–æ–Ω: 
                        <select id="mountainRegion" onchange="updateKb()">
                            <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —Ä–∞–π–æ–Ω</option>
                            <option value="dagestan">–†–µ—Å–ø—É–±–ª–∏–∫–∞ –î–∞–≥–µ—Å—Ç–∞–Ω</option>
                            <option value="krasnodar_adler">–ö—Ä–∞—Å–Ω–æ–¥–∞—Ä—Å–∫–∏–π –∫—Ä–∞–π: –ê–¥–ª–µ—Ä—Å–∫–∏–π —Ä–∞–π–æ–Ω</option>
                            <option value="krasnodar_apsheron">–ö—Ä–∞—Å–Ω–æ–¥–∞—Ä—Å–∫–∏–π –∫—Ä–∞–π: –ê–ø—à–µ—Ä–æ–Ω—Å–∫–∏–π –∏ –õ–∞–∑–∞—Ä–µ–≤—Å–∫–∏–π —Ä–∞–π–æ–Ω—ã</option>
                            <option value="krasnodar_tuapse">–ö—Ä–∞—Å–Ω–æ–¥–∞—Ä—Å–∫–∏–π –∫—Ä–∞–π: –¢—É–∞–ø—Å–∏–Ω—Å–∫–∏–π —Ä–∞–π–æ–Ω</option>
                            <option value="krasnodar_other">–ö—Ä–∞—Å–Ω–æ–¥–∞—Ä—Å–∫–∏–π –∫—Ä–∞–π: –û—Å—Ç–∞–ª—å–Ω—ã–µ —Ä–∞–π–æ–Ω—ã</option>
                            <option value="stavropol">–°—Ç–∞–≤—Ä–æ–ø–æ–ª—å—Å–∫–∏–π –∫—Ä–∞–π</option>
                            <option value="evenkia">–≠–≤–µ–Ω–∫–∏–π—Å–∫–∏–π –∞–≤—Ç–æ–Ω–æ–º–Ω—ã–π –æ–∫—Ä—É–≥</option>
                            <option value="krasnoyarsk_kuznetsk">–ö—Ä–∞—Å–Ω–æ—è—Ä—Å–∫–∏–π –∫—Ä–∞–π: –ö–µ–º–µ—Ä–æ–≤—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å, –ö—É–∑–Ω–µ—Ü–∫–∏–π –ê–ª–∞—Ç–∞—É, –ì–æ—Ä–Ω–∞—è –®–æ—Ä–∏—è</option>
                            <option value="krasnoyarsk_sayan">–ö—Ä–∞—Å–Ω–æ—è—Ä—Å–∫–∏–π –∫—Ä–∞–π: –°–∞—è–Ω—Å–∫–∏–π —Ö—Ä., –ö—É—Ä—Ç—É—à–∏–±–∏–Ω—Å–∫–∏–π —Ö—Ä.</option>
                            <option value="krasnoyarsk_north">–ö—Ä–∞—Å–Ω–æ—è—Ä—Å–∫–∏–π –∫—Ä–∞–π: –°–µ–≤–µ—Ä–æ-–ï–Ω–∏—Å–µ–π—Å–∫–∏–π —Ä–∞–π–æ–Ω</option>
                            <option value="buryatia_khamar">–†–µ—Å–ø—É–±–ª–∏–∫–∞ –ë—É—Ä—è—Ç–∏—è, —Ö—Ä. –•–∞–º–∞—Ä-–î–∞–±–∞–º</option>
                            <option value="buryatia_baikal">–†–µ—Å–ø—É–±–ª–∏–∫–∞ –ë—É—Ä—è—Ç–∏—è, –ë–∞–π–∫–∞–ª—å—Å–∫–∏–π —Ö—Ä.</option>
                            <option value="yakutia_aldan">–†–µ—Å–ø—É–±–ª–∏–∫–∞ –Ø–∫—É—Ç–∏—è, –ê–ª–¥–∞–Ω—Å–∫–æ–µ –Ω–∞–≥–æ—Ä—å–µ</option>
                        </select>
                    </label>
                    
                    <div id="kbCalculationDetails"></div>
                    <div id="kbDisplay" class="kb-display"></div>
                    
                    <div class="mountain-table">
                        <table>
                            <thead>
                                <tr>
                                    <th>–¢–µ—Ä—Ä–∏—Ç–æ—Ä–∏–∞–ª—å–Ω—ã–π —Ä–∞–π–æ–Ω –†–§</th>
                                    <th>–°–Ω–µ–≥–æ–≤–æ–π —Ä–∞–π–æ–Ω</th>
                                    <th>k_b</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr><td>–†–µ—Å–ø—É–±–ª–∏–∫–∞ –î–∞–≥–µ—Å—Ç–∞–Ω</td><td>II</td><td>0,001</td></tr>
                                <tr><td>–ö—Ä–∞—Å–Ω–æ–¥–∞—Ä—Å–∫–∏–π –ö—Ä–∞–π: –ê–¥–ª–µ—Ä—Å–∫–∏–π —Ä–∞–π–æ–Ω</td><td>III</td><td>0,009</td></tr>
                                <tr><td>–ö—Ä–∞—Å–Ω–æ–¥–∞—Ä—Å–∫–∏–π –ö—Ä–∞–π: –ê–ø—à–µ—Ä–æ–Ω—Å–∫–∏–π –∏ –õ–∞–∑–∞—Ä–µ–≤—Å–∫–∏–π —Ä–∞–π–æ–Ω—ã</td><td>II</td><td>0,008</td></tr>
                                <tr><td>–ö—Ä–∞—Å–Ω–æ–¥–∞—Ä—Å–∫–∏–π –ö—Ä–∞–π: –¢—É–∞–ø—Å–∏–Ω—Å–∫–∏–π —Ä–∞–π–æ–Ω</td><td>II</td><td>0,005</td></tr>
                                <tr><td>–ö—Ä–∞—Å–Ω–æ–¥–∞—Ä—Å–∫–∏–π –ö—Ä–∞–π: –û—Å—Ç–∞–ª—å–Ω—ã–µ —Ä–∞–π–æ–Ω—ã</td><td>II</td><td>0,003</td></tr>
                                <tr><td>–°—Ç–∞–≤—Ä–æ–ø–æ–ª—å—Å–∫–∏–π –ö—Ä–∞–π</td><td>II</td><td>0,001</td></tr>
                                <tr><td>–≠–≤–µ–Ω–∫–∏–π—Å–∫–∏–π –∞–≤—Ç–æ–Ω–æ–º–Ω—ã–π –æ–∫—Ä—É–≥</td><td>VI</td><td>0,001</td></tr>
                                <tr><td>–ö—Ä–∞—Å–Ω–æ—è—Ä—Å–∫–∏–π –ö—Ä–∞–π: –ö–µ–º–µ—Ä–æ–≤—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å, –ö—É–∑–Ω–µ—Ü–∫–∏–π –ê–ª–∞—Ç–∞—É, –ì–æ—Ä–Ω–∞—è –®–æ—Ä–∏—è</td><td>VI, VII</td><td>0,0068</td></tr>
                                <tr><td>–ö—Ä–∞—Å–Ω–æ—è—Ä—Å–∫–∏–π –ö—Ä–∞–π: –°–∞—è–Ω—Å–∫–∏–π —Ö—Ä., –ö—É—Ä—Ç—É—à–∏–±–∏–Ω—Å–∫–∏–π —Ö—Ä.</td><td>IV</td><td>0,0063</td></tr>
                                <tr><td>–ö—Ä–∞—Å–Ω–æ—è—Ä—Å–∫–∏–π –ö—Ä–∞–π: –°–µ–≤–µ—Ä–æ-–ï–Ω–∏—Å–µ–π—Å–∫–∏–π —Ä–∞–π–æ–Ω</td><td>VI</td><td>0,0028</td></tr>
                                <tr><td>–†–µ—Å–ø—É–±–ª–∏–∫–∞ –ë—É—Ä—è—Ç–∏—è, —Ö—Ä. –•–∞–º–∞—Ä-–î–∞–±–∞–º</td><td>IV</td><td>0,002</td></tr>
                                <tr><td>–†–µ—Å–ø—É–±–ª–∏–∫–∞ –ë—É—Ä—è—Ç–∏—è, –ë–∞–π–∫–∞–ª—å—Å–∫–∏–π —Ö—Ä.</td><td>IV</td><td>0,0046</td></tr>
                                <tr><td>–†–µ—Å–ø—É–±–ª–∏–∫–∞ –Ø–∫—É—Ç–∏—è, –ê–ª–¥–∞–Ω—Å–∫–æ–µ –Ω–∞–≥–æ—Ä—å–µ</td><td>III</td><td>0,002</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ —è–Ω–≤–∞—Ä—è -->
            <div id="temperatureControl" class="temperature-control">
                <label>üå°Ô∏è –°—Ä–µ–¥–Ω–µ–º–µ—Å—è—á–Ω–∞—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ —è–Ω–≤–∞—Ä—è: 
                    <select id="januaryTemp" onchange="updateTemperatureInfo()">
                        <option value="unknown">–ù–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞</option>
                        <option value="cold">‚â§ -5¬∞C (—Ö–æ–ª–æ–¥–Ω–∞—è –∑–∏–º–∞)</option>
                        <option value="warm">> -5¬∞C (—Ç–µ–ø–ª–∞—è –∑–∏–º–∞)</option>
                    </select>
                </label>
                <p class="italic">
                    –ó–Ω–∞—á–µ–Ω–∏–µ —Å—Ä–µ–¥–Ω–µ–π —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã –Ω–∞–∏–±–æ–ª–µ–µ —Ö–æ–ª–æ–¥–Ω–æ–≥–æ –º–µ—Å—è—Ü–∞ (—è–Ω–≤–∞—Ä—è) –º–æ–∂–Ω–æ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤ 
                    <a href="https://docs.cntd.ru/document/1200175796" target="_blank" class="sp-link">—Ç–∞–±–ª–∏—Ü–µ 7.1 –°–ü 131.13330.2020</a>
                </p>
                
                <div id="temperatureInfo">
                    <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–µ –±—É–¥–µ—Ç –∑–∞–ø–æ–ª–Ω—è—Ç—å—Å—è –∑–¥–µ—Å—å -->
                </div>
            </div>

            <div class="step-navigation">
                <button type="button" class="btn-next" onclick="nextStep(2)">–î–∞–ª–µ–µ ‚Üí</button>
            </div>
        </div>

        <!-- –®–∞–≥ 2 -->
        <div class="step" id="step2">
            <h2>üåÑ –®–∞–≥ 2: –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –≤–æ–∑–¥–µ–π—Å—Ç–≤–∏—è –≤–µ—Ç—Ä–∞ Ce</h2>
            <p class="italic">–ø. 10.5-10.9</p>
            
            <div class="calculation-method">
                <label>–°–ø–æ—Å–æ–± –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è Ce:</label>
                <label class="method-label">
                    <input type="radio" name="ceMethod" value="manual" checked onchange="toggleCeMethod()"> 
                    ‚úèÔ∏è –í–≤–µ—Å—Ç–∏ –∑–Ω–∞—á–µ–Ω–∏–µ –≤—Ä—É—á–Ω—É—é
                </label>
                <label class="method-label">
                    <input type="radio" name="ceMethod" value="sp" onchange="toggleCeMethod()"> 
                    üìñ –†–∞—Å—Å—á–∏—Ç–∞—Ç—å –ø–æ –°–ü 20.13330.2016
                </label>
            </div>

            <div id="ceManualInput" class="manual-input">
                <label>–ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –≤–æ–∑–¥–µ–π—Å—Ç–≤–∏—è –≤–µ—Ç—Ä–∞ Ce: 
                    <input type="number" id="ceManual" step="0.01" value="1.0" min="0.5" max="1.0">
                </label>
            </div>

            <div id="ceSpCalculation" class="sp-calculation">
                <p><strong>–¢–∏–ø –º–µ—Å—Ç–Ω–æ—Å—Ç–∏:</strong></p>
                <p class="terrain-type">üåä A - –æ—Ç–∫—Ä—ã—Ç—ã–µ –ø–æ–±–µ—Ä–µ–∂—å—è –º–æ—Ä–µ–π, –æ–∑–µ—Ä –∏ –≤–æ–¥–æ—Ö—Ä–∞–Ω–∏–ª–∏—â, –ø—É—Å—Ç—ã–Ω–∏, —Å—Ç–µ–ø–∏, –ª–µ—Å–æ—Å—Ç–µ–ø–∏, —Ç—É–Ω–¥—Ä–∞;</p>
                <p class="terrain-type">üèòÔ∏è B - –≥–æ—Ä–æ–¥—Å–∫–∏–µ —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–∏, –ª–µ—Å–Ω—ã–µ –º–∞—Å—Å–∏–≤—ã –∏ –¥—Ä—É–≥–∏–µ –º–µ—Å—Ç–Ω–æ—Å—Ç–∏, —Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–æ –ø–æ–∫—Ä—ã—Ç—ã–µ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏—è–º–∏ –≤—ã—Å–æ—Ç–æ–π –±–æ–ª–µ–µ 10 –º;</p>
                <p class="terrain-type">üèôÔ∏è C - –≥–æ—Ä–æ–¥—Å–∫–∏–µ —Ä–∞–π–æ–Ω—ã —Å –∑–∞—Å—Ç—Ä–æ–π–∫–æ–π –∑–¥–∞–Ω–∏—è–º–∏ –≤—ã—Å–æ—Ç–æ–π –±–æ–ª–µ–µ 25 –º.</p>
                
                <label>–¢–∏–ø –º–µ—Å—Ç–Ω–æ—Å—Ç–∏: 
                    <select id="terrainType" onchange="updateCe()">
                        <option value="A">A (–æ—Ç–∫—Ä—ã—Ç–∞—è)</option>
                        <option value="B" selected>B (—Å –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏—è–º–∏)</option>
                        <option value="C">C (–≥–æ—Ä–æ–¥—Å–∫–∞—è)</option>
                    </select>
                </label>
                
                <label>üè† –ó–∞—â–∏—â–µ–Ω–æ –æ—Ç –≤–µ—Ç—Ä–∞? (—Å–æ—Å–µ–¥–Ω–∏–µ –∑–¥–∞–Ω–∏—è, –ª–µ—Å –∏ —Ç.–ø.): 
                    <input type="checkbox" id="protected" onchange="updateCe()">
                </label>

                <div id="dimSection">
                    <p><strong>–†–∞–∑–º–µ—Ä—ã –ø–æ–∫—Ä—ã—Ç–∏—è –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ —Å–Ω–æ—Å–∞ —Å–Ω–µ–≥–∞:</strong></p>
                    <label>–ù–∞–∏–º–µ–Ω—å—à–∏–π —Ä–∞–∑–º–µ—Ä –≤ –ø–ª–∞–Ω–µ l (–º): <input type="number" id="dimMin" value="50" min="0" onchange="updateCe()"></label>
                    <label>–ù–∞–∏–±–æ–ª—å—à–∏–π —Ä–∞–∑–º–µ—Ä –≤ –ø–ª–∞–Ω–µ L (–º): <input type="number" id="dimMax" value="50" min="0" onchange="updateCe()"></label>
                    <div id="dimensionError" class="dimension-error" style="display: none;">
                        ‚ùå –û—à–∏–±–∫–∞: –ù–∞–∏–º–µ–Ω—å—à–∏–π —Ä–∞–∑–º–µ—Ä –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –±–æ–ª—å—à–µ –Ω–∞–∏–±–æ–ª—å—à–µ–≥–æ —Ä–∞–∑–º–µ—Ä–∞. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∏—Å–ø—Ä–∞–≤—å—Ç–µ –∑–Ω–∞—á–µ–Ω–∏—è.
                    </div>
                </div>

                <p id="ceValue">–†–∞—Å—Å—á–∏—Ç–∞–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ Ce: 1.0</p>
                <div id="ceCalculationDetails"></div>
            </div>

            <div class="step-navigation">
                <button type="button" class="btn-prev" onclick="prevStep(1)">‚Üê –ù–∞–∑–∞–¥</button>
                <button type="button" class="btn-next" onclick="nextStep(3)">–î–∞–ª–µ–µ ‚Üí</button>
            </div>
        </div>

        <!-- –®–∞–≥ 3 -->
        <div class="step" id="step3">
            <h2>üî• –®–∞–≥ 3: –¢–µ—Ä–º–∏—á–µ—Å–∫–∏–π –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç Ct</h2>
            <p class="italic">–ø. 10.10-10.11</p>
            
            <div class="calculation-method">
                <label>–°–ø–æ—Å–æ–± –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è Ct:</label>
                <label class="method-label">
                    <input type="radio" name="ctMethod" value="manual" checked onchange="toggleCtMethod()"> 
                    ‚úèÔ∏è –í–≤–µ—Å—Ç–∏ –∑–Ω–∞—á–µ–Ω–∏–µ –≤—Ä—É—á–Ω—É—é
                </label>
                <label class="method-label">
                    <input type="radio" name="ctMethod" value="sp" onchange="toggleCtMethod()"> 
                    üìñ –†–∞—Å—Å—á–∏—Ç–∞—Ç—å –ø–æ –°–ü 20.13330.2016
                </label>
            </div>

            <div id="ctManualInput" class="manual-input">
                <label>–¢–µ—Ä–º–∏—á–µ—Å–∫–∏–π –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç Ct: 
                    <input type="number" id="ctManual" step="0.01" value="1.0" min="0.8" max="1.2">
                </label>
            </div>

            <div id="ctSpCalculation" class="sp-calculation">
                <p><strong>–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø –ø–æ–∫—Ä—ã—Ç–∏—è:</strong></p>
                <label class="method-label">
                    <input type="radio" name="ctType" value="normal" checked onchange="updateCt()"> 
                    üè† –û–±—ã—á–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ —Å —É—Ç–µ–ø–ª–µ–Ω–∏–µ–º
                </label>
                <label class="method-label">
                    <input type="radio" name="ctType" value="transparent" onchange="updateCt()"> 
                    ‚òÄÔ∏è –ü—Ä–æ–∑—Ä–∞—á–Ω—ã–µ –ø–æ–∫—Ä—ã—Ç–∏—è (—Å –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–æ–º —Ç–µ–ø–ª–æ–ø–µ—Ä–µ–¥–∞—á–∏ > 1 –í—Ç/(–º¬≤¬∑¬∞C))
                </label>
                <label class="method-label">
                    <input type="radio" name="ctType" value="highLoss" onchange="updateCt()"> 
                    ‚ùÑÔ∏è –ü–æ–∫—Ä—ã—Ç–∏—è —Å –ø–æ–≤—ã—à–µ–Ω–Ω—ã–º–∏ —Ç–µ–ø–ª–æ–≤—ã–º–∏ –ø–æ—Ç–µ—Ä—è–º–∏
                </label>
                <label class="method-label">
                    <input type="radio" name="ctType" value="cold" onchange="updateCt()"> 
                    üè≠ –•–æ–ª–æ–¥–Ω—ã–µ –ø–æ–∫—Ä—ã—Ç–∏—è (—Å –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–æ–º —Ç–µ–ø–ª–æ–ø–µ—Ä–µ–¥–∞—á–∏ ‚â§ 1 –í—Ç/(–º¬≤¬∑¬∞C))
                </label>
                
                <div id="ctValue">–†–∞—Å—Å—á–∏—Ç–∞–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ Ct: 1.0</div>
                <div id="ctCalculationDetails"></div>
            </div>

            <div class="step-navigation">
                <button type="button" class="btn-prev" onclick="prevStep(2)">‚Üê –ù–∞–∑–∞–¥</button>
                <button type="button" class="btn-next" onclick="nextStep(4)">–î–∞–ª–µ–µ ‚Üí</button>
            </div>
        </div>

        <!-- –®–∞–≥ 4 -->
        <div class="step" id="step4">
            <h2>üè† –®–∞–≥ 4: –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –ø–µ—Ä–µ—Ö–æ–¥–∞ Œº –∏ —Å—Ö–µ–º–∞ –Ω–∞–≥—Ä—É–∑–∫–∏</h2>
            <p class="italic">–ø. 10.4, –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ñ</p>
            
            <div class="calculation-method">
                <label>–°–ø–æ—Å–æ–± –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è Œº:</label>
                <label class="method-label">
                    <input type="radio" name="muMethod" value="sp" checked onchange="toggleMuMethod()"> 
                    üìñ –†–∞—Å—Å—á–∏—Ç–∞—Ç—å –ø–æ –°–ü 20.13330.2016
                </label>
                <label class="method-label">
                    <input type="radio" name="muMethod" value="manual" onchange="toggleMuMethod()"> 
                    ‚úèÔ∏è –í–≤–µ—Å—Ç–∏ –∑–Ω–∞—á–µ–Ω–∏–µ –≤—Ä—É—á–Ω—É—é
                </label>
            </div>

            <div id="muManualInput" class="manual-input mu-manual-option" style="display: none;">
                <label>–ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –ø–µ—Ä–µ—Ö–æ–¥–∞ Œº: 
                    <input type="number" id="muManual" step="0.01" value="1.0" min="0">
                </label>
            </div>

            <div id="muSpCalculation">
                <p><strong>–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø –ø–æ–∫—Ä—ã—Ç–∏—è:</strong></p>
                <select id="roofType" onchange="showRoofScheme()">
                    <option value="flat">–ü–ª–æ—Å–∫–∏–µ –ø–æ–∫—Ä—ã—Ç–∏—è (—É–∫–ª–æ–Ω ‚â§ 12¬∞ –∏–ª–∏ ‚â§ 21%)</option>
                    <option value="single">–û–¥–Ω–æ—Å–∫–∞—Ç–Ω—ã–µ –ø–æ–∫—Ä—ã—Ç–∏—è</option>
                    <option value="double">–î–≤—É—Å–∫–∞—Ç–Ω—ã–µ –ø–æ–∫—Ä—ã—Ç–∏—è</option>
                    <option value="mansard">–õ–æ–º–∞–Ω—ã–µ (–º–∞–Ω—Å–∞—Ä–¥–Ω—ã–µ) –ø–æ–∫—Ä—ã—Ç–∏—è</option>
                    <option value="vaulted">–°–≤–æ–¥—á–∞—Ç—ã–µ –∏ –±–ª–∏–∑–∫–∏–µ –∫ –Ω–∏–º –ø–æ –æ—á–µ—Ä—Ç–∞–Ω–∏—é –ø–æ–∫—Ä—ã—Ç–∏—è</option>
                    <option value="conical">–ö–æ–Ω–∏—á–µ—Å–∫–∏–µ –ø–æ–∫—Ä—ã—Ç–∏—è –∫—Ä—É–≥–æ–≤—ã—Ö –æ—á–µ—Ä—Ç–∞–Ω–∏–π</option>
                </select>

                <div id="roofScheme"></div>
                
                <div id="muValue">–†–∞—Å—Å—á–∏—Ç–∞–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ Œº: 1.0</div>
                <div id="muCalculationDetails"></div>
            </div>

            <div class="step-navigation">
                <button type="button" class="btn-prev" onclick="prevStep(3)">‚Üê –ù–∞–∑–∞–¥</button>
                <button type="button" class="btn-next" onclick="nextStep(5)">–î–∞–ª–µ–µ ‚Üí</button>
            </div>
        </div>

        <!-- –®–∞–≥ 5 -->
        <div class="step" id="step5">
            <h2>üßÆ –®–∞–≥ 5: –†–∞—Å—á—ë—Ç –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã</h2>
            
            <div class="calculation-formula">
                <strong>–†–∞—Å—á—ë—Ç–Ω–∞—è —Ñ–æ—Ä–º—É–ª–∞:</strong> S = Sg √ó k_b √ó Œº √ó Ce √ó Ct √ó Œ≥f
            </div>
            
            <div class="info">
                <strong>–ò—Å—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:</strong>
                <div id="inputData"></div>
            </div>
            
            <div class="info">
                <strong>–ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã:</strong>
                <div id="coefficientsData"></div>
            </div>
            
            <div class="algorithm">
                <strong>–ê–ª–≥–æ—Ä–∏—Ç–º —Ä–∞—Å—á—ë—Ç–∞:</strong>
                <div id="calculationAlgorithm"></div>
            </div>
            
            <div class="report-actions">
                <button type="button" class="btn-calculate" onclick="calculateSnowLoad()">üßÆ –†–∞—Å—Å—á–∏—Ç–∞—Ç—å —Å–Ω–µ–≥–æ–≤—É—é –Ω–∞–≥—Ä—É–∑–∫—É</button>
            </div>
            
            <div id="report"></div>
            
            <div class="step-navigation">
                <button type="button" class="btn-prev" onclick="prevStep(4)">‚Üê –ù–∞–∑–∞–¥</button>
            </div>
        </div>
    </div>

    <script>
        // –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
        let currentStep = 1;
        let sgValue = 1.8;
        let ceValue = 1.0;
        let ctValue = 1.0;
        let muValue = 1.0;
        let kbValue = 1.0;
        let gammaF = 1.4;
        let isMountainArea = false;
        let altitude = 500;
        let mountainRegion = '';
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        document.addEventListener('DOMContentLoaded', function() {
            updateSgFromMap();
            updateCe();
            updateCt();
            showRoofScheme();
            updateKb();
        });
        
        // –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ —à–∞–≥–∞–º
        function nextStep(step) {
            document.getElementById('step' + currentStep).classList.remove('active');
            currentStep = step;
            document.getElementById('step' + currentStep).classList.add('active');
        }
        
        function prevStep(step) {
            document.getElementById('step' + currentStep).classList.remove('active');
            currentStep = step;
            document.getElementById('step' + currentStep).classList.add('active');
        }
        
        // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ—Ç–æ–¥–æ–≤ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è Sg
        function toggleSgMethod() {
            const manualMethod = document.querySelector('input[name="sgMethod"]:checked').value === 'manual';
            document.getElementById('sgManualInput').style.display = manualMethod ? 'block' : 'none';
            document.getElementById('sgSpCalculation').style.display = manualMethod ? 'none' : 'block';
            
            if (!manualMethod) {
                showSpMethod('city');
            }
        }
        
        // –ü–æ–∫–∞–∑–∞—Ç—å –º–µ—Ç–æ–¥ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø–æ –°–ü
        function showSpMethod(method) {
            document.getElementById('cityMethod').style.display = method === 'city' ? 'block' : 'none';
            document.getElementById('mapMethod').style.display = method === 'map' ? 'none' : 'block';
        }
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞—Ä—Ç—ã
        function updateMapSrc() {
            const mapType = document.getElementById('mapType').value;
            const snowMap = document.getElementById('snowMap');
            
            if (mapType === 'main') {
                snowMap.src = 'https://saitinpro.ru/wp-content/uploads/2018/03/Karta-1_sneg.gif';
            } else if (mapType === 'krym') {
                snowMap.src = 'https://saitinpro.ru/wp-content/uploads/2018/03/Karta-1_sneg_krym.gif';
            } else if (mapType === 'sakhalin') {
                snowMap.src = 'https://saitinpro.ru/wp-content/uploads/2018/03/Karta-1_sneg_sahal.gif';
            }
        }
        
        // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –≤–∏–¥–∏–º–æ—Å—Ç–∏ –∫–∞—Ä—Ç—ã
        function toggleMap(mapId) {
            const map = document.getElementById(mapId);
            const btn = document.getElementById('mapToggleBtn');
            
            if (map.style.display === 'none') {
                map.style.display = 'block';
                btn.textContent = 'üó∫Ô∏è –°–∫—Ä—ã—Ç—å –∫–∞—Ä—Ç—É';
            } else {
                map.style.display = 'none';
                btn.textContent = 'üó∫Ô∏è –ü–æ–∫–∞–∑–∞—Ç—å –∫–∞—Ä—Ç—É';
            }
        }
        
        // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–Ω–∞—á–µ–Ω–∏–π –∏–∑ –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –≥–æ—Ä–æ–¥–∞
        function setFromCity() {
            const citySelect = document.getElementById('citySelect');
            const selectedOption = citySelect.options[citySelect.selectedIndex];
            
            if (selectedOption.value) {
                const temp = selectedOption.getAttribute('data-temp');
                const district = selectedOption.getAttribute('data-district');
                
                // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–Ω–µ–≥–æ–≤–æ–≥–æ —Ä–∞–π–æ–Ω–∞
                const sgValues = {
                    'I': 0.8, 'II': 1.2, 'III': 1.8, 'IV': 2.4, 
                    'V': 3.2, 'VI': 4.0, 'VII': 5.6, 'VIII': 7.0
                };
                
                sgValue = sgValues[district];
                document.getElementById('sgValue').textContent = sgValue;
                
                // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã
                document.getElementById('januaryTemp').value = parseFloat(temp) <= -5 ? 'cold' : 'warm';
                updateTemperatureInfo();
            }
        }
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ Sg –∏–∑ –∫–∞—Ä—Ç—ã
        function updateSgFromMap() {
            const district = document.getElementById('snowDistrictMap').value;
            const sgValues = {
                'I': 0.8, 'II': 1.2, 'III': 1.8, 'IV': 2.4, 
                'V': 3.2, 'VI': 4.0, 'VII': 5.6, 'VIII': 7.0
            };
            
            sgValue = sgValues[district];
            document.getElementById('sgValue').textContent = sgValue;
        }
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–µ
        function updateTemperatureInfo() {
            const tempSelect = document.getElementById('januaryTemp');
            const tempInfo = document.getElementById('temperatureInfo');
            
            if (tempSelect.value === 'unknown') {
                tempInfo.innerHTML = '<div class="warning">‚ö†Ô∏è –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞. –î–ª—è —Ç–æ—á–Ω–æ–≥–æ —Ä–∞—Å—á–µ—Ç–∞ Ct —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—É.</div>';
            } else if (tempSelect.value === 'cold') {
                tempInfo.innerHTML = '<div class="info">‚ùÑÔ∏è –•–æ–ª–æ–¥–Ω–∞—è –∑–∏–º–∞ (‚â§ -5¬∞C). –£—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ —Ä–∞—Å—á–µ—Ç–µ Ct –¥–ª—è –ø–æ–∫—Ä—ã—Ç–∏–π —Å –ø–æ–≤—ã—à–µ–Ω–Ω—ã–º–∏ —Ç–µ–ø–ª–æ–≤—ã–º–∏ –ø–æ—Ç–µ—Ä—è–º–∏.</div>';
            } else {
                tempInfo.innerHTML = '<div class="info">üå°Ô∏è –¢–µ–ø–ª–∞—è –∑–∏–º–∞ (> -5¬∞C). –£—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ —Ä–∞—Å—á–µ—Ç–µ Ct –¥–ª—è –ø–æ–∫—Ä—ã—Ç–∏–π —Å –ø–æ–≤—ã—à–µ–Ω–Ω—ã–º–∏ —Ç–µ–ø–ª–æ–≤—ã–º–∏ –ø–æ—Ç–µ—Ä—è–º–∏.</div>';
            }
        }
        
        // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ—Ç–æ–¥–æ–≤ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è Ce
        function toggleCeMethod() {
            const manualMethod = document.querySelector('input[name="ceMethod"]:checked').value === 'manual';
            document.getElementById('ceManualInput').style.display = manualMethod ? 'block' : 'none';
            document.getElementById('ceSpCalculation').style.display = manualMethod ? 'none' : 'block';
            
            if (!manualMethod) {
                updateCe();
            }
        }
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ Ce
        function updateCe() {
            const terrainType = document.getElementById('terrainType').value;
            const isProtected = document.getElementById('protected').checked;
            const dimMin = parseFloat(document.getElementById('dimMin').value) || 50;
            const dimMax = parseFloat(document.getElementById('dimMax').value) || 50;
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ —Ä–∞–∑–º–µ—Ä–æ–≤
            if (dimMin > dimMax) {
                document.getElementById('dimensionError').style.display = 'block';
                return;
            } else {
                document.getElementById('dimensionError').style.display = 'none';
            }
            
            // –†–∞—Å—á–µ—Ç Ce –ø–æ –°–ü 20.13330.2016
            let ce = 1.0;
            let calculationDetails = '';
            
            if (isProtected) {
                ce = 1.0;
                calculationDetails = 'Ce = 1.0 (–º–µ—Å—Ç–æ —Å—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤–∞ –∑–∞—â–∏—â–µ–Ω–æ –æ—Ç –≤–µ—Ç—Ä–∞)';
            } else {
                // –†–∞—Å—á–µ—Ç –ø–æ —Ñ–æ—Ä–º—É–ª–µ 10.1
                const k = terrainType === 'A' ? 0.3 : (terrainType === 'B' ? 0.4 : 0.5);
                const l = Math.min(dimMin, dimMax);
                const L = Math.max(dimMin, dimMax);
                
                if (l <= L && l <= 100) {
                    ce = 1.0;
                    calculationDetails = `Ce = 1.0 (l = ${l} –º ‚â§ 100 –º)`;
                } else if (l > 100 && l <= 200) {
                    ce = 1.2;
                    calculationDetails = `Ce = 1.2 (100 –º < l = ${l} –º ‚â§ 200 –º)`;
                } else if (l > 200 && l <= 300) {
                    ce = 1.4;
                    calculationDetails = `Ce = 1.4 (200 –º < l = ${l} –º ‚â§ 300 –º)`;
                } else if (l > 300) {
                    ce = 1.6;
                    calculationDetails = `Ce = 1.6 (l = ${l} –º > 300 –º)`;
                }
                
                // –£—á–µ—Ç —Ç–∏–ø–∞ –º–µ—Å—Ç–Ω–æ—Å—Ç–∏
                if (terrainType === 'A') {
                    ce *= 0.8;
                    calculationDetails += ` √ó 0.8 (—Ç–∏–ø –º–µ—Å—Ç–Ω–æ—Å—Ç–∏ A) = ${ce.toFixed(2)}`;
                } else if (terrainType === 'C') {
                    ce *= 1.2;
                    calculationDetails += ` √ó 1.2 (—Ç–∏–ø –º–µ—Å—Ç–Ω–æ—Å—Ç–∏ C) = ${ce.toFixed(2)}`;
                } else {
                    calculationDetails += ` (—Ç–∏–ø –º–µ—Å—Ç–Ω–æ—Å—Ç–∏ B) = ${ce.toFixed(2)}`;
                }
            }
            
            ceValue = ce;
            document.getElementById('ceValue').textContent = `–†–∞—Å—Å—á–∏—Ç–∞–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ Ce: ${ce.toFixed(2)}`;
            document.getElementById('ceCalculationDetails').innerHTML = `<div class="detailed-explanation">${calculationDetails}</div>`;
        }
        
        // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ—Ç–æ–¥–æ–≤ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è Ct
        function toggleCtMethod() {
            const manualMethod = document.querySelector('input[name="ctMethod"]:checked').value === 'manual';
            document.getElementById('ctManualInput').style.display = manualMethod ? 'block' : 'none';
            document.getElementById('ctSpCalculation').style.display = manualMethod ? 'none' : 'block';
            
            if (!manualMethod) {
                updateCt();
            }
        }
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ Ct
        function updateCt() {
            const ctType = document.querySelector('input[name="ctType"]:checked').value;
            const tempSelect = document.getElementById('januaryTemp').value;
            
            let ct = 1.0;
            let calculationDetails = '';
            
            switch(ctType) {
                case 'normal':
                    ct = 1.0;
                    calculationDetails = 'Ct = 1.0 (–æ–±—ã—á–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ —Å —É—Ç–µ–ø–ª–µ–Ω–∏–µ–º)';
                    break;
                case 'transparent':
                    ct = 1.0;
                    calculationDetails = 'Ct = 1.0 (–ø—Ä–æ–∑—Ä–∞—á–Ω—ã–µ –ø–æ–∫—Ä—ã—Ç–∏—è)';
                    break;
                case 'highLoss':
                    if (tempSelect === 'cold') {
                        ct = 1.1;
                        calculationDetails = 'Ct = 1.1 (–ø–æ–∫—Ä—ã—Ç–∏—è —Å –ø–æ–≤—ã—à–µ–Ω–Ω—ã–º–∏ —Ç–µ–ø–ª–æ–≤—ã–º–∏ –ø–æ—Ç–µ—Ä—è–º–∏, —Ö–æ–ª–æ–¥–Ω–∞—è –∑–∏–º–∞ ‚â§ -5¬∞C)';
                    } else if (tempSelect === 'warm') {
                        ct = 1.2;
                        calculationDetails = 'Ct = 1.2 (–ø–æ–∫—Ä—ã—Ç–∏—è —Å –ø–æ–≤—ã—à–µ–Ω–Ω—ã–º–∏ —Ç–µ–ø–ª–æ–≤—ã–º–∏ –ø–æ—Ç–µ—Ä—è–º–∏, —Ç–µ–ø–ª–∞—è –∑–∏–º–∞ > -5¬∞C)';
                    } else {
                        ct = 1.1;
                        calculationDetails = 'Ct = 1.1 (–ø–æ–∫—Ä—ã—Ç–∏—è —Å –ø–æ–≤—ã—à–µ–Ω–Ω—ã–º–∏ —Ç–µ–ø–ª–æ–≤—ã–º–∏ –ø–æ—Ç–µ—Ä—è–º–∏, —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞ - –ø—Ä–∏–Ω—è—Ç–æ –ø–æ —Ö–æ–ª–æ–¥–Ω–æ–π –∑–∏–º–µ)';
                    }
                    break;
                case 'cold':
                    ct = 1.2;
                    calculationDetails = 'Ct = 1.2 (—Ö–æ–ª–æ–¥–Ω—ã–µ –ø–æ–∫—Ä—ã—Ç–∏—è —Å –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–æ–º —Ç–µ–ø–ª–æ–ø–µ—Ä–µ–¥–∞—á–∏ ‚â§ 1 –í—Ç/(–º¬≤¬∑¬∞C))';
                    break;
            }
            
            ctValue = ct;
            document.getElementById('ctValue').textContent = `–†–∞—Å—Å—á–∏—Ç–∞–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ Ct: ${ct.toFixed(2)}`;
            document.getElementById('ctCalculationDetails').innerHTML = `<div class="detailed-explanation">${calculationDetails}</div>`;
        }
        
        // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ—Ç–æ–¥–æ–≤ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è Œº
        function toggleMuMethod() {
            const manualMethod = document.querySelector('input[name="muMethod"]:checked').value === 'manual';
            document.getElementById('muManualInput').style.display = manualMethod ? 'block' : 'none';
            document.getElementById('muSpCalculation').style.display = manualMethod ? 'none' : 'block';
            
            if (!manualMethod) {
                showRoofScheme();
            }
        }
        
        // –ü–æ–∫–∞–∑–∞—Ç—å —Å—Ö–µ–º—É –∫—Ä—ã—à–∏
        function showRoofScheme() {
            const roofType = document.getElementById('roofType').value;
            const roofScheme = document.getElementById('roofScheme');
            
            let schemeHTML = '';
            let mu = 1.0;
            let calculationDetails = '';
            
            switch(roofType) {
                case 'flat':
                    schemeHTML = `
                        <div class="roof-scheme">
                            <div class="scheme-diagram">
                                <h4>üìê –°—Ö–µ–º–∞ –ø–ª–æ—Å–∫–æ–≥–æ –ø–æ–∫—Ä—ã—Ç–∏—è</h4>
                                <div style="text-align: center; margin: 10px 0;">
                                    <div style="background: #ddd; height: 30px; width: 200px; margin: 0 auto; position: relative;">
                                        <div style="position: absolute; top: -20px; left: 50%; transform: translateX(-50%);">Œ± ‚â§ 12¬∞</div>
                                    </div>
                                    <div style="margin-top: 10px;">–ü–ª–æ—Å–∫–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ</div>
                                </div>
                            </div>
                            <div class="scheme-values">
                                <h4>üìä –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã Œº</h4>
                                <div class="mu-zone">
                                    <strong>–í—Å—è –ø–ª–æ—â–∞–¥—å –ø–æ–∫—Ä—ã—Ç–∏—è:</strong> Œº = 1.0
                                </div>
                                <div class="scheme-usage">
                                    <strong>–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ:</strong> –î–ª—è —É–∫–ª–æ–Ω–æ–≤ ‚â§ 12¬∞ –∏–ª–∏ ‚â§ 21%
                                </div>
                            </div>
                        </div>
                    `;
                    mu = 1.0;
                    calculationDetails = 'Œº = 1.0 (–ø–ª–æ—Å–∫–∏–µ –ø–æ–∫—Ä—ã—Ç–∏—è —Å —É–∫–ª–æ–Ω–æ–º ‚â§ 12¬∞)';
                    break;
                    
                case 'single':
                    schemeHTML = `
                        <div class="roof-scheme">
                            <div class="scheme-diagram">
                                <h4>üìê –°—Ö–µ–º–∞ –æ–¥–Ω–æ—Å–∫–∞—Ç–Ω–æ–≥–æ –ø–æ–∫—Ä—ã—Ç–∏—è</h4>
                                <div style="text-align: center; margin: 10px 0;">
                                    <div style="background: linear-gradient(to bottom right, #ddd 50%, #eee 50%); height: 100px; width: 200px; margin: 0 auto; position: relative;">
                                        <div style="position: absolute; top: 10px; left: 10px;">Œ±</div>
                                        <div style="position: absolute; bottom: 10px; left: 50%; transform: translateX(-50%);">L</div>
                                    </div>
                                </div>
                                <label>–£–≥–æ–ª –Ω–∞–∫–ª–æ–Ω–∞ Œ± (¬∞): <input type="number" id="singleSlope" value="30" min="0" max="60" onchange="updateSingleSlopeMu()"></label>
                                <label>–î–ª–∏–Ω–∞ —Å–∫–∞—Ç–∞ L (–º): <input type="number" id="singleLength" value="10" min="1" onchange="updateSingleSlopeMu()"></label>
                            </div>
                            <div class="scheme-values">
                                <h4>üìä –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã Œº</h4>
                                <div id="singleMuZones"></div>
                            </div>
                        </div>
                    `;
                    updateSingleSlopeMu();
                    break;
                    
                case 'double':
                    schemeHTML = `
                        <div class="roof-scheme">
                            <div class="scheme-diagram">
                                <h4>üìê –°—Ö–µ–º–∞ –¥–≤—É—Å–∫–∞—Ç–Ω–æ–≥–æ –ø–æ–∫—Ä—ã—Ç–∏—è</h4>
                                <div style="text-align: center; margin: 10px 0;">
                                    <div style="background: linear-gradient(to bottom, #ddd 50%, #eee 50%); height: 100px; width: 200px; margin: 0 auto; position: relative;">
                                        <div style="position: absolute; top: 10px; left: 50%; transform: translateX(-50%);">Œ±</div>
                                        <div style="position: absolute; bottom: 10px; left: 50%; transform: translateX(-50%);">L</div>
                                        <div style="position: absolute; top: 50%; left: 10px; transform: translateY(-50%);">Œº‚ÇÅ</div>
                                        <div style="position: absolute; top: 50%; right: 10px; transform: translateY(-50%);">Œº‚ÇÇ</div>
                                    </div>
                                </div>
                                <label>–£–≥–æ–ª –Ω–∞–∫–ª–æ–Ω–∞ Œ± (¬∞): <input type="number" id="doubleSlope" value="30" min="0" max="60" onchange="updateDoubleSlopeMu()"></label>
                                <label>–î–ª–∏–Ω–∞ —Å–∫–∞—Ç–∞ L (–º): <input type="number" id="doubleLength" value="10" min="1" onchange="updateDoubleSlopeMu()"></label>
                            </div>
                            <div class="scheme-values">
                                <h4>üìä –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã Œº</h4>
                                <div id="doubleMuZones"></div>
                            </div>
                        </div>
                    `;
                    updateDoubleSlopeMu();
                    break;
                    
                // –î—Ä—É–≥–∏–µ —Ç–∏–ø—ã –ø–æ–∫—Ä—ã—Ç–∏–π –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ
                default:
                    schemeHTML = `<div class="info">–í—ã–±—Ä–∞–Ω–Ω—ã–π —Ç–∏–ø –ø–æ–∫—Ä—ã—Ç–∏—è –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Œº = 1.0</div>`;
                    mu = 1.0;
                    calculationDetails = 'Œº = 1.0 (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–ª—è –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —Ç–∏–ø–∞ –ø–æ–∫—Ä—ã—Ç–∏—è)';
            }
            
            roofScheme.innerHTML = schemeHTML;
            muValue = mu;
            
            if (calculationDetails) {
                document.getElementById('muValue').textContent = `–†–∞—Å—Å—á–∏—Ç–∞–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ Œº: ${mu.toFixed(2)}`;
                document.getElementById('muCalculationDetails').innerHTML = `<div class="detailed-explanation">${calculationDetails}</div>`;
            }
        }
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ Œº –¥–ª—è –æ–¥–Ω–æ—Å–∫–∞—Ç–Ω–æ–≥–æ –ø–æ–∫—Ä—ã—Ç–∏—è
        function updateSingleSlopeMu() {
            const slope = parseFloat(document.getElementById('singleSlope').value) || 30;
            const length = parseFloat(document.getElementById('singleLength').value) || 10;
            
            let mu1, mu2;
            let calculationDetails = '';
            
            if (slope <= 30) {
                mu1 = 1.0;
                mu2 = 1.0;
                calculationDetails = `Œº = 1.0 (—É–∫–ª–æ–Ω Œ± = ${slope}¬∞ ‚â§ 30¬∞)`;
            } else if (slope > 30 && slope <= 60) {
                mu1 = (60 - slope) / 30;
                mu2 = (60 - slope) / 30;
                calculationDetails = `Œº = (60 - ${slope}) / 30 = ${mu1.toFixed(2)} (—É–∫–ª–æ–Ω Œ± = ${slope}¬∞ > 30¬∞ –∏ ‚â§ 60¬∞)`;
            } else {
                mu1 = 0;
                mu2 = 0;
                calculationDetails = `Œº = 0 (—É–∫–ª–æ–Ω Œ± = ${slope}¬∞ > 60¬∞)`;
            }
            
            // –£—á–µ—Ç –¥–ª–∏–Ω—ã —Å–∫–∞—Ç–∞ –¥–ª—è –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è —Å–Ω–µ–≥–æ–≤–æ–≥–æ –º–µ—à–∫–∞
            if (slope > 15 && slope <= 30 && length > 6) {
                mu2 = 1.5;
                calculationDetails += `<br>–ù–∞ –Ω–∏–∂–Ω–µ–π —á–∞—Å—Ç–∏ —Å–∫–∞—Ç–∞ Œº = 1.5 (–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ —Å–Ω–µ–≥–æ–≤–æ–≥–æ –º–µ—à–∫–∞ –ø—Ä–∏ L = ${length} –º > 6 –º)`;
            }
            
            document.getElementById('singleMuZones').innerHTML = `
                <div class="mu-zone">
                    <strong>–í–µ—Ä—Ö–Ω—è—è —á–∞—Å—Ç—å —Å–∫–∞—Ç–∞:</strong> Œº = ${mu1.toFixed(2)}
                </div>
                <div class="mu-zone">
                    <strong>–ù–∏–∂–Ω—è—è —á–∞—Å—Ç—å —Å–∫–∞—Ç–∞:</strong> Œº = ${mu2.toFixed(2)}
                </div>
            `;
            
            muValue = Math.max(mu1, mu2);
            document.getElementById('muValue').textContent = `–†–∞—Å—Å—á–∏—Ç–∞–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ Œº: ${muValue.toFixed(2)}`;
            document.getElementById('muCalculationDetails').innerHTML = `<div class="detailed-explanation">${calculationDetails}</div>`;
        }
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ Œº –¥–ª—è –¥–≤—É—Å–∫–∞—Ç–Ω–æ–≥–æ –ø–æ–∫—Ä—ã—Ç–∏—è
        function updateDoubleSlopeMu() {
            const slope = parseFloat(document.getElementById('doubleSlope').value) || 30;
            const length = parseFloat(document.getElementById('doubleLength').value) || 10;
            
            let mu1, mu2, mu3;
            let calculationDetails = '';
            
            if (slope <= 30) {
                mu1 = 0.8;
                mu2 = 1.0;
                mu3 = 0.8;
                calculationDetails = `Œº‚ÇÅ = 0.8, Œº‚ÇÇ = 1.0, Œº‚ÇÉ = 0.8 (—É–∫–ª–æ–Ω Œ± = ${slope}¬∞ ‚â§ 30¬∞)`;
            } else if (slope > 30 && slope <= 60) {
                mu1 = 0.8 * (60 - slope) / 30;
                mu2 = (60 - slope) / 30;
                mu3 = 0.8 * (60 - slope) / 30;
                calculationDetails = `Œº‚ÇÅ = 0.8 √ó (60 - ${slope}) / 30 = ${mu1.toFixed(2)}, Œº‚ÇÇ = (60 - ${slope}) / 30 = ${mu2.toFixed(2)}, Œº‚ÇÉ = 0.8 √ó (60 - ${slope}) / 30 = ${mu3.toFixed(2)} (—É–∫–ª–æ–Ω Œ± = ${slope}¬∞ > 30¬∞ –∏ ‚â§ 60¬∞)`;
            } else {
                mu1 = 0;
                mu2 = 0;
                mu3 = 0;
                calculationDetails = `Œº = 0 (—É–∫–ª–æ–Ω Œ± = ${slope}¬∞ > 60¬∞)`;
            }
            
            // –£—á–µ—Ç –¥–ª–∏–Ω—ã —Å–∫–∞—Ç–∞ –¥–ª—è –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è —Å–Ω–µ–≥–æ–≤–æ–≥–æ –º–µ—à–∫–∞ –≤ –µ–Ω–¥–æ–≤–µ
            if (slope > 15 && slope <= 30 && length > 6) {
                mu2 = 1.5;
                calculationDetails += `<br>–í –µ–Ω–¥–æ–≤–µ Œº = 1.5 (–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ —Å–Ω–µ–≥–æ–≤–æ–≥–æ –º–µ—à–∫–∞ –ø—Ä–∏ L = ${length} –º > 6 –º)`;
            }
            
            document.getElementById('doubleMuZones').innerHTML = `
                <div class="mu-zone">
                    <strong>–õ–µ–≤—ã–π —Å–∫–∞—Ç (–≤–µ—Ä—Ö):</strong> Œº = ${mu1.toFixed(2)}
                </div>
                <div class="mu-zone">
                    <strong>–ï–Ω–¥–æ–≤–∞ (—Ü–µ–Ω—Ç—Ä):</strong> Œº = ${mu2.toFixed(2)}
                </div>
                <div class="mu-zone">
                    <strong>–ü—Ä–∞–≤—ã–π —Å–∫–∞—Ç (–≤–µ—Ä—Ö):</strong> Œº = ${mu3.toFixed(2)}
                </div>
            `;
            
            muValue = Math.max(mu1, mu2, mu3);
            document.getElementById('muValue').textContent = `–†–∞—Å—Å—á–∏—Ç–∞–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ Œº: ${muValue.toFixed(2)}`;
            document.getElementById('muCalculationDetails').innerHTML = `<div class="detailed-explanation">${calculationDetails}</div>`;
        }
        
        // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —É—á–µ—Ç–∞ –≥–æ—Ä–Ω—ã—Ö —Ä–∞–π–æ–Ω–æ–≤
        function toggleMountainArea() {
            isMountainArea = document.getElementById('mountainArea').checked;
            document.getElementById('mountainCalculation').style.display = isMountainArea ? 'block' : 'none';
            
            if (!isMountainArea) {
                kbValue = 1.0;
                document.getElementById('kbDisplay').innerHTML = '';
            } else {
                updateKb();
            }
        }
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤—ã—Å–æ—Ç–Ω–æ–≥–æ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–∞ k_b
        function updateKb() {
            if (!isMountainArea) return;
            
            altitude = parseFloat(document.getElementById('altitude').value) || 500;
            mountainRegion = document.getElementById('mountainRegion').value;
            
            let kb = 1.0;
            let calculationDetails = '';
            
            // –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã –∏–∑ –¢–∞–±–ª–∏—Ü—ã –ñ.1 –°–ü 20.13330.2016
            const regionCoefficients = {
                'dagestan': 0.001,
                'krasnodar_adler': 0.009,
                'krasnodar_apsheron': 0.008,
                'krasnodar_tuapse': 0.005,
                'krasnodar_other': 0.003,
                'stavropol': 0.001,
                'evenkia': 0.001,
                'krasnoyarsk_kuznetsk': 0.0068,
                'krasnoyarsk_sayan': 0.0063,
                'krasnoyarsk_north': 0.0028,
                'buryatia_khamar': 0.002,
                'buryatia_baikal': 0.0046,
                'yakutia_aldan': 0.002
            };
            
            if (mountainRegion && regionCoefficients[mountainRegion]) {
                const coefficient = regionCoefficients[mountainRegion];
                kb = 1 + coefficient * altitude;
                calculationDetails = `k_b = 1 + ${coefficient} √ó ${altitude} = ${kb.toFixed(3)}`;
                
                document.getElementById('kbCalculationDetails').innerHTML = `
                    <div class="detailed-explanation">
                        <strong>–†–∞—Å—á–µ—Ç –≤—ã—Å–æ—Ç–Ω–æ–≥–æ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–∞:</strong><br>
                        ${calculationDetails}
                    </div>
                `;
                
                document.getElementById('kbDisplay').innerHTML = `
                    <div class="kb-display">
                        –í—ã—Å–æ—Ç–Ω—ã–π –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç k_b = ${kb.toFixed(3)}
                    </div>
                `;
            } else {
                calculationDetails = 'k_b = 1.0 (—Ä–∞–π–æ–Ω –Ω–µ –≤—ã–±—Ä–∞–Ω)';
                document.getElementById('kbCalculationDetails').innerHTML = `
                    <div class="warning">
                        ‚ö†Ô∏è –í—ã—Å–æ—Ç–Ω—ã–π –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –Ω–µ —Ä–∞—Å—Å—á–∏—Ç–∞–Ω. –í—ã–±–µ—Ä–∏—Ç–µ –≥–æ—Ä–Ω—ã–π —Ä–∞–π–æ–Ω –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞.
                    </div>
                `;
                document.getElementById('kbDisplay').innerHTML = '';
            }
            
            kbValue = kb;
        }
        
        // –û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è —Ä–∞—Å—á–µ—Ç–∞ —Å–Ω–µ–≥–æ–≤–æ–π –Ω–∞–≥—Ä—É–∑–∫–∏
        function calculateSnowLoad() {
            // –ü–æ–ª—É—á–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏–π –∏–∑ —Ñ–æ—Ä–º—ã
            const sgMethod = document.querySelector('input[name="sgMethod"]:checked').value;
            if (sgMethod === 'manual') {
                sgValue = parseFloat(document.getElementById('sgManual').value) || 1.8;
            } else {
                const customSg = document.getElementById('customSg').value;
                if (customSg && !isNaN(customSg)) {
                    sgValue = parseFloat(customSg);
                }
                // –ò–Ω–∞—á–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∑–Ω–∞—á–µ–Ω–∏–µ, —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–æ–µ —Ä–∞–Ω–µ–µ
            }
            
            const ceMethod = document.querySelector('input[name="ceMethod"]:checked').value;
            if (ceMethod === 'manual') {
                ceValue = parseFloat(document.getElementById('ceManual').value) || 1.0;
            }
            
            const ctMethod = document.querySelector('input[name="ctMethod"]:checked').value;
            if (ctMethod === 'manual') {
                ctValue = parseFloat(document.getElementById('ctManual').value) || 1.0;
            }
            
            const muMethod = document.querySelector('input[name="muMethod"]:checked').value;
            if (muMethod === 'manual') {
                muValue = parseFloat(document.getElementById('muManual').value) || 1.0;
            }
            
            // –†–∞—Å—á–µ—Ç —Å–Ω–µ–≥–æ–≤–æ–π –Ω–∞–≥—Ä—É–∑–∫–∏
            const S = sgValue * kbValue * muValue * ceValue * ctValue * gammaF;
            
            // –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç—á–µ—Ç–∞
            const report = document.getElementById('report');
            report.style.display = 'block';
            
            // –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
            document.getElementById('inputData').innerHTML = `
                <div>Sg = ${sgValue.toFixed(2)} –∫–ü–∞ (–Ω–æ—Ä–º–∞—Ç–∏–≤–Ω–∞—è —Å–Ω–µ–≥–æ–≤–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞)</div>
                ${isMountainArea ? `<div>H = ${altitude} –º (–≤—ã—Å–æ—Ç–∞ –Ω–∞–¥ —É—Ä–æ–≤–Ω–µ–º –º–æ—Ä—è)</div>` : ''}
                <div>Œº = ${muValue.toFixed(2)} (–∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –ø–µ—Ä–µ—Ö–æ–¥–∞)</div>
                <div>Ce = ${ceValue.toFixed(2)} (–∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –≤–æ–∑–¥–µ–π—Å—Ç–≤–∏—è –≤–µ—Ç—Ä–∞)</div>
                <div>Ct = ${ctValue.toFixed(2)} (—Ç–µ—Ä–º–∏—á–µ—Å–∫–∏–π –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç)</div>
                <div>Œ≥f = ${gammaF.toFixed(1)} (–∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏)</div>
                ${isMountainArea ? `<div>k_b = ${kbValue.toFixed(3)} (–≤—ã—Å–æ—Ç–Ω—ã–π –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç)</div>` : ''}
            `;
            
            // –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø–æ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–∞–º
            document.getElementById('coefficientsData').innerHTML = `
                <div>–ù–æ—Ä–º–∞—Ç–∏–≤–Ω–∞—è —Å–Ω–µ–≥–æ–≤–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞: Sg = ${sgValue.toFixed(2)} –∫–ü–∞</div>
                ${isMountainArea ? `<div>–í—ã—Å–æ—Ç–Ω—ã–π –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç: k_b = ${kbValue.toFixed(3)}</div>` : '<div>–í—ã—Å–æ—Ç–Ω—ã–π –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç: k_b = 1.0 (–Ω–µ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è)</div>'}
                <div>–ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –ø–µ—Ä–µ—Ö–æ–¥–∞: Œº = ${muValue.toFixed(2)}</div>
                <div>–ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –≤–æ–∑–¥–µ–π—Å—Ç–≤–∏—è –≤–µ—Ç—Ä–∞: Ce = ${ceValue.toFixed(2)}</div>
                <div>–¢–µ—Ä–º–∏—á–µ—Å–∫–∏–π –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç: Ct = ${ctValue.toFixed(2)}</div>
                <div>–ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏: Œ≥f = ${gammaF.toFixed(1)}</div>
            `;
            
            // –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–ª–≥–æ—Ä–∏—Ç–º–∞ —Ä–∞—Å—á–µ—Ç–∞
            let algorithmHTML = `
                <div>1. –ù–æ—Ä–º–∞—Ç–∏–≤–Ω–∞—è —Å–Ω–µ–≥–æ–≤–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞: Sg = ${sgValue.toFixed(2)} –∫–ü–∞</div>
            `;
            
            if (isMountainArea) {
                algorithmHTML += `
                    <div>2. –í—ã—Å–æ—Ç–Ω—ã–π –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç: k_b = ${kbValue.toFixed(3)}</div>
                    <div>3. –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –ø–µ—Ä–µ—Ö–æ–¥–∞: Œº = ${muValue.toFixed(2)}</div>
                    <div>4. –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –≤–æ–∑–¥–µ–π—Å—Ç–≤–∏—è –≤–µ—Ç—Ä–∞: Ce = ${ceValue.toFixed(2)}</div>
                    <div>5. –¢–µ—Ä–º–∏—á–µ—Å–∫–∏–π –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç: Ct = ${ctValue.toFixed(2)}</div>
                    <div>6. –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏: Œ≥f = ${gammaF.toFixed(1)}</div>
                    <div class="calculation-formula">
                        7. –†–∞—Å—á—ë—Ç–Ω–∞—è —Å–Ω–µ–≥–æ–≤–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞: S = Sg √ó k_b √ó Œº √ó Ce √ó Ct √ó Œ≥f = 
                        ${sgValue.toFixed(2)} √ó ${kbValue.toFixed(3)} √ó ${muValue.toFixed(2)} √ó ${ceValue.toFixed(2)} √ó ${ctValue.toFixed(2)} √ó ${gammaF.toFixed(1)} = ${S.toFixed(3)} –∫–ü–∞
                    </div>
                `;
            } else {
                algorithmHTML += `
                    <div>2. –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –ø–µ—Ä–µ—Ö–æ–¥–∞: Œº = ${muValue.toFixed(2)}</div>
                    <div>3. –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –≤–æ–∑–¥–µ–π—Å—Ç–≤–∏—è –≤–µ—Ç—Ä–∞: Ce = ${ceValue.toFixed(2)}</div>
                    <div>4. –¢–µ—Ä–º–∏—á–µ—Å–∫–∏–π –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç: Ct = ${ctValue.toFixed(2)}</div>
                    <div>5. –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏: Œ≥f = ${gammaF.toFixed(1)}</div>
                    <div class="calculation-formula">
                        6. –†–∞—Å—á—ë—Ç–Ω–∞—è —Å–Ω–µ–≥–æ–≤–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞: S = Sg √ó Œº √ó Ce √ó Ct √ó Œ≥f = 
                        ${sgValue.toFixed(2)} √ó ${muValue.toFixed(2)} √ó ${ceValue.toFixed(2)} √ó ${ctValue.toFixed(2)} √ó ${gammaF.toFixed(1)} = ${S.toFixed(3)} –∫–ü–∞
                    </div>
                `;
            }
            
            document.getElementById('calculationAlgorithm').innerHTML = algorithmHTML;
            
            // –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –∏—Ç–æ–≥–æ–≤–æ–≥–æ –æ—Ç—á–µ—Ç–∞
            report.innerHTML = `
                <h2>üìã –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ä–∞—Å—á—ë—Ç–∞ —Å–Ω–µ–≥–æ–≤–æ–π –Ω–∞–≥—Ä—É–∑–∫–∏</h2>
                
                <div class="info">
                    <h3>üìä –ò—Å—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ</h3>
                    <div>–ù–æ—Ä–º–∞—Ç–∏–≤–Ω–∞—è —Å–Ω–µ–≥–æ–≤–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ Sg = ${sgValue.toFixed(2)} –∫–ü–∞</div>
                    ${isMountainArea ? `<div>–í—ã—Å–æ—Ç–∞ –Ω–∞–¥ —É—Ä–æ–≤–Ω–µ–º –º–æ—Ä—è H = ${altitude} –º</div>` : ''}
                    <div>–ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –ø–µ—Ä–µ—Ö–æ–¥–∞ Œº = ${muValue.toFixed(2)}</div>
                    <div>–ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –≤–æ–∑–¥–µ–π—Å—Ç–≤–∏—è –≤–µ—Ç—Ä–∞ Ce = ${ceValue.toFixed(2)}</div>
                    <div>–¢–µ—Ä–º–∏—á–µ—Å–∫–∏–π –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç Ct = ${ctValue.toFixed(2)}</div>
                    <div>–ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏ Œ≥f = ${gammaF.toFixed(1)}</div>
                    ${isMountainArea ? `<div>–í—ã—Å–æ—Ç–Ω—ã–π –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç k_b = ${kbValue.toFixed(3)}</div>` : ''}
                </div>
                
                <div class="algorithm">
                    <h3>üßÆ –ê–ª–≥–æ—Ä–∏—Ç–º —Ä–∞—Å—á—ë—Ç–∞</h3>
                    ${algorithmHTML}
                </div>
                
                <div class="load-result">
                    <h3>üéØ –ò—Ç–æ–≥–æ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è —Å–Ω–µ–≥–æ–≤–æ–π –Ω–∞–≥—Ä—É–∑–∫–∏</h3>
                    <div><strong>–ù–æ—Ä–º–∞—Ç–∏–≤–Ω–∞—è —Å–Ω–µ–≥–æ–≤–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞:</strong> S‚ÇÄ = Sg √ó Œº = ${sgValue.toFixed(2)} √ó ${muValue.toFixed(2)} = ${(sgValue * muValue).toFixed(3)} –∫–ü–∞</div>
                    <div><strong>–†–∞—Å—á—ë—Ç–Ω–∞—è —Å–Ω–µ–≥–æ–≤–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞:</strong> S = ${S.toFixed(3)} –∫–ü–∞</div>
                    <div><strong>–†–∞—Å—á—ë—Ç–Ω–∞—è —Å–Ω–µ–≥–æ–≤–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞:</strong> S = ${(S * 100).toFixed(1)} –∫–≥/–º¬≤</div>
                </div>
                
                ${isMountainArea ? `
                <div class="mountain-control">
                    <h3>üèîÔ∏è –£—á—ë—Ç –≤—ã—Å–æ—Ç–Ω–æ–≥–æ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–∞ –¥–ª—è –≥–æ—Ä–Ω—ã—Ö —Ä–∞–π–æ–Ω–æ–≤</h3>
                    <div>–ü—Ä–∏–º–µ–Ω—ë–Ω –≤—ã—Å–æ—Ç–Ω—ã–π –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç k_b = ${kbValue.toFixed(3)} –¥–ª—è ${document.getElementById('mountainRegion').options[document.getElementById('mountainRegion').selectedIndex].text}</div>
                    <div>–í—ã—Å–æ—Ç–∞ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏—è –æ–±—ä–µ–∫—Ç–∞: ${altitude} –º –Ω–∞–¥ —É—Ä–æ–≤–Ω–µ–º –º–æ—Ä—è</div>
                </div>
                ` : ''}
                
                <div class="report-actions">
                    <button type="button" class="btn-print" onclick="window.print()">üñ®Ô∏è –ü–µ—á–∞—Ç—å –æ—Ç—á—ë—Ç–∞</button>
                    <button type="button" class="btn-reset" onclick="resetCalculator()">üîÑ –ù–æ–≤—ã–π —Ä–∞—Å—á—ë—Ç</button>
                </div>
                
                <div class="disclaimer">
                    <strong>–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:</strong> –î–∞–Ω–Ω—ã–π —Ä–∞—Å—á—ë—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å –°–ü 20.13330.2016 "–ù–∞–≥—Ä—É–∑–∫–∏ –∏ –≤–æ–∑–¥–µ–π—Å—Ç–≤–∏—è". 
                    –î–ª—è –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã—Ö –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–π —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –≤—ã–ø–æ–ª–Ω—è—Ç—å –ø—Ä–æ–≤–µ—Ä–æ—á–Ω—ã–µ —Ä–∞—Å—á—ë—Ç—ã –∏ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏ —Å –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤—â–∏–∫–æ–º.
                </div>
            `;
            
            // –ü—Ä–æ–∫—Ä—É—Ç–∫–∞ –∫ –æ—Ç—á–µ—Ç—É
            report.scrollIntoView({ behavior: 'smooth' });
        }
        
        // –°–±—Ä–æ—Å –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∞
        function resetCalculator() {
            location.reload();
        }
    </script>
</body>
</html>
